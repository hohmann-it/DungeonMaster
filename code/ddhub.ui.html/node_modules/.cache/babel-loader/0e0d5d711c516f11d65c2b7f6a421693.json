{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, CarouselLayout, events, GridData, HtmlComponent, SingleLayout, Widget } from '../index';\nexport default class Carousel extends Widget {\n  constructor() {\n    super();\n    this._addWidgetProperties(['widgets']);\n\n    // default values\n    this.statusEnabled = true;\n    this.statusItemHtml = '&bull;';\n    this.currentItem = 0; // current item\n    this.moveThreshold = 0.25; // threshold\n    this.widgets = []; // widgets\n\n    this.$carouselFilmstrip; // carousel filmstrip\n    this.$carouselItems = []; // carousel items\n    this.$carouselStatus; // carousel status bar (containing current position)\n    this.$carouselStatusItems = []; // carousel status items\n\n    this.positionX = 0; // last translation position\n  }\n\n  _init(model) {\n    super._init(model);\n    this._setGridData(this.gridData);\n    this.widgets = arrays.ensure(this.widgets);\n  }\n  _setGridData(gridData) {\n    this._setProperty('gridData', new GridData(gridData));\n  }\n  _render() {\n    // add container\n    this.$container = this.$parent.appendDiv('carousel');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new CarouselLayout(this));\n\n    // add content filmstrip\n    this.$carouselFilmstrip = this.$container.appendDiv('carousel-filmstrip');\n    this._registerCarouselFilmstripEventListeners();\n    this.htmlCompFilmstrip = HtmlComponent.install(this.$carouselFilmstrip, this.session);\n  }\n  _remove() {\n    this._removeStatus();\n    super._remove();\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderWidgets();\n    this._renderCurrentItem(); // must be called after renderWidgets\n    this._renderStatusEnabled();\n  }\n  setStatusEnabled(statusEnabled) {\n    this.setProperty('statusEnabled', statusEnabled);\n  }\n  _renderStatusEnabled() {\n    if (this.statusEnabled) {\n      this._renderStatus();\n      this._renderStatusItems();\n      this._renderCurrentStatusItem();\n    } else {\n      this._removeStatus();\n    }\n    this.invalidateLayoutTree();\n  }\n  _renderStatus() {\n    if (!this.$carouselStatus) {\n      this.$carouselStatus = this.$container.appendDiv('carousel-status');\n      this.htmlCompStatus = HtmlComponent.install(this.$carouselStatus, this.session);\n    }\n  }\n  _removeStatus() {\n    if (this.$carouselStatus) {\n      this.$carouselStatus.remove();\n      this.$carouselStatus = null;\n    }\n  }\n  _renderStatusItems() {\n    if (!this.$carouselStatus) {\n      return;\n    }\n    this.$carouselStatusItems = [];\n    this.$carouselStatus.empty();\n    this.$carouselItems.forEach(() => {\n      let $statusItem = this.$carouselStatus.appendDiv('status-item');\n      $statusItem.html(this.statusItemHtml);\n      this.$carouselStatusItems.push($statusItem);\n    });\n  }\n  _renderCurrentStatusItem() {\n    if (!this.$carouselStatus) {\n      return;\n    }\n    this.$carouselStatusItems.forEach((e, i) => {\n      e.toggleClass('current-item', i === this.currentItem);\n    });\n  }\n  recalcTransformation() {\n    this.positionX = this.currentItem * this.$container.width() * -1;\n    this.$carouselFilmstrip.css({\n      transform: 'translateX(' + this.positionX + 'px)'\n    });\n  }\n  setCurrentItem(currentItem) {\n    this.setProperty('currentItem', currentItem);\n  }\n  _renderCurrentItem() {\n    this._renderItemsInternal(undefined, false);\n    this._renderCurrentStatusItem();\n    this.invalidateLayoutTree();\n  }\n  _renderItemsInternal(item, skipRemove) {\n    item = item || this.currentItem;\n    if (!skipRemove) {\n      this.widgets.forEach((w, j) => {\n        if (w.rendered && (j < item - 1 || j > item + 1)) {\n          w.remove();\n        }\n      }, this);\n    }\n    for (let i = Math.max(item - 1, 0); i < Math.min(item + 2, this.widgets.length); i++) {\n      let widget = this.widgets[i];\n      if (!widget.rendered) {\n        widget.render(this.$carouselItems[i]);\n        widget.htmlComp.revalidateLayout();\n      }\n    }\n  }\n  setWidgets(widgets) {\n    this.setProperty('widgets', widgets);\n  }\n  _renderWidgets() {\n    this.$carouselFilmstrip.empty();\n    this.$carouselItems = this.widgets.map(function (widget) {\n      let $carouselItem = this.$carouselFilmstrip.appendDiv('carousel-item');\n      let htmlComp = HtmlComponent.install($carouselItem, this.session);\n      htmlComp.setLayout(new SingleLayout());\n\n      // Add the CSS classes of the widget to be able to style the carousel items.\n      // Use a suffix to prevent conflicts\n      let cssClasses = widget.cssClassAsArray();\n      cssClasses.forEach(cssClass => {\n        $carouselItem.addClass(cssClass + '-carousel-item');\n      });\n      return $carouselItem;\n    }, this);\n    this._renderStatusItems();\n\n    // reset current item\n    this.setCurrentItem(0);\n  }\n  _registerCarouselFilmstripEventListeners() {\n    let $window = this.$carouselFilmstrip.window();\n    this.$carouselFilmstrip.on('mousedown touchstart', event => {\n      let origPageX = events.pageX(event);\n      let origPosition = this.positionX;\n      let minPositionX = this.$container.width() - this.$carouselFilmstrip.width();\n      let containerWidth = this.$container.width();\n      $window.on('mousemove.carouselDrag touchmove.carouselDrag', event => {\n        let pageX = events.pageX(event);\n        let moveX = pageX - origPageX;\n        let positionX = origPosition + moveX;\n        if (positionX !== this.positionX && positionX <= 0 && positionX >= minPositionX) {\n          this.$carouselFilmstrip.css({\n            transform: 'translateX(' + positionX + 'px)'\n          });\n          this.positionX = positionX;\n          // item\n          let i = positionX / containerWidth * -1;\n          this._renderItemsInternal(positionX < origPosition ? Math.floor(i) : Math.ceil(i), true);\n        }\n      });\n      $window.on('mouseup.carouselDrag touchend.carouselDrag touchcancel.carouselDrag', e => {\n        $window.off('.carouselDrag');\n        // show only whole items\n        let mod = this.positionX % containerWidth;\n        let newCurrentItem = this.currentItem;\n        if (this.positionX < origPosition && mod / containerWidth < 0 - this.moveThreshold) {\n          // next\n          newCurrentItem = Math.ceil(this.positionX / containerWidth * -1);\n        } else if (this.positionX > origPosition && mod / containerWidth >= this.moveThreshold - 1) {\n          // prev\n          newCurrentItem = Math.floor(this.positionX / containerWidth * -1);\n        }\n        this.setCurrentItem(newCurrentItem);\n        if (mod !== 0) {\n          this.positionX = newCurrentItem * containerWidth * -1;\n          this.recalcTransformation();\n        }\n      });\n    });\n  }\n}","map":{"version":3,"names":["arrays","CarouselLayout","events","GridData","HtmlComponent","SingleLayout","Widget","Carousel","constructor","_addWidgetProperties","statusEnabled","statusItemHtml","currentItem","moveThreshold","widgets","$carouselFilmstrip","$carouselItems","$carouselStatus","$carouselStatusItems","positionX","_init","model","_setGridData","gridData","ensure","_setProperty","_render","$container","$parent","appendDiv","htmlComp","install","session","setLayout","_registerCarouselFilmstripEventListeners","htmlCompFilmstrip","_remove","_removeStatus","_renderProperties","_renderWidgets","_renderCurrentItem","_renderStatusEnabled","setStatusEnabled","setProperty","_renderStatus","_renderStatusItems","_renderCurrentStatusItem","invalidateLayoutTree","htmlCompStatus","remove","empty","forEach","$statusItem","html","push","e","i","toggleClass","recalcTransformation","width","css","transform","setCurrentItem","_renderItemsInternal","undefined","item","skipRemove","w","j","rendered","Math","max","min","length","widget","render","revalidateLayout","setWidgets","map","$carouselItem","cssClasses","cssClassAsArray","cssClass","addClass","$window","window","on","event","origPageX","pageX","origPosition","minPositionX","containerWidth","moveX","floor","ceil","off","mod","newCurrentItem"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/carousel/Carousel.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, CarouselLayout, events, GridData, HtmlComponent, SingleLayout, Widget} from '../index';\n\nexport default class Carousel extends Widget {\n\n  constructor() {\n    super();\n    this._addWidgetProperties(['widgets']);\n\n    // default values\n    this.statusEnabled = true;\n    this.statusItemHtml = '&bull;';\n    this.currentItem = 0; // current item\n    this.moveThreshold = 0.25; // threshold\n    this.widgets = []; // widgets\n\n    this.$carouselFilmstrip; // carousel filmstrip\n    this.$carouselItems = []; // carousel items\n    this.$carouselStatus; // carousel status bar (containing current position)\n    this.$carouselStatusItems = []; // carousel status items\n\n    this.positionX = 0; // last translation position\n  }\n\n  _init(model) {\n    super._init(model);\n    this._setGridData(this.gridData);\n    this.widgets = arrays.ensure(this.widgets);\n  }\n\n  _setGridData(gridData) {\n    this._setProperty('gridData', new GridData(gridData));\n  }\n\n  _render() {\n    // add container\n    this.$container = this.$parent.appendDiv('carousel');\n\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new CarouselLayout(this));\n\n    // add content filmstrip\n    this.$carouselFilmstrip = this.$container.appendDiv('carousel-filmstrip');\n    this._registerCarouselFilmstripEventListeners();\n    this.htmlCompFilmstrip = HtmlComponent.install(this.$carouselFilmstrip, this.session);\n  }\n\n  _remove() {\n    this._removeStatus();\n    super._remove();\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n\n    this._renderWidgets();\n    this._renderCurrentItem(); // must be called after renderWidgets\n    this._renderStatusEnabled();\n  }\n\n  setStatusEnabled(statusEnabled) {\n    this.setProperty('statusEnabled', statusEnabled);\n  }\n\n  _renderStatusEnabled() {\n    if (this.statusEnabled) {\n      this._renderStatus();\n      this._renderStatusItems();\n      this._renderCurrentStatusItem();\n    } else {\n      this._removeStatus();\n    }\n    this.invalidateLayoutTree();\n  }\n\n  _renderStatus() {\n    if (!this.$carouselStatus) {\n      this.$carouselStatus = this.$container.appendDiv('carousel-status');\n      this.htmlCompStatus = HtmlComponent.install(this.$carouselStatus, this.session);\n    }\n  }\n\n  _removeStatus() {\n    if (this.$carouselStatus) {\n      this.$carouselStatus.remove();\n      this.$carouselStatus = null;\n    }\n  }\n\n  _renderStatusItems() {\n    if (!this.$carouselStatus) {\n      return;\n    }\n    this.$carouselStatusItems = [];\n    this.$carouselStatus.empty();\n    this.$carouselItems.forEach(() => {\n      let $statusItem = this.$carouselStatus.appendDiv('status-item');\n      $statusItem.html(this.statusItemHtml);\n      this.$carouselStatusItems.push($statusItem);\n    });\n  }\n\n  _renderCurrentStatusItem() {\n    if (!this.$carouselStatus) {\n      return;\n    }\n    this.$carouselStatusItems.forEach((e, i) => {\n      e.toggleClass('current-item', i === this.currentItem);\n    });\n  }\n\n  recalcTransformation() {\n    this.positionX = this.currentItem * this.$container.width() * -1;\n    this.$carouselFilmstrip.css({\n      transform: 'translateX(' + this.positionX + 'px)'\n    });\n  }\n\n  setCurrentItem(currentItem) {\n    this.setProperty('currentItem', currentItem);\n  }\n\n  _renderCurrentItem() {\n    this._renderItemsInternal(undefined, false);\n    this._renderCurrentStatusItem();\n    this.invalidateLayoutTree();\n  }\n\n  _renderItemsInternal(item, skipRemove) {\n    item = item || this.currentItem;\n    if (!skipRemove) {\n      this.widgets.forEach((w, j) => {\n        if (w.rendered && (j < item - 1 || j > item + 1)) {\n          w.remove();\n        }\n      }, this);\n    }\n    for (let i = Math.max(item - 1, 0); i < Math.min(item + 2, this.widgets.length); i++) {\n      let widget = this.widgets[i];\n      if (!widget.rendered) {\n        widget.render(this.$carouselItems[i]);\n        widget.htmlComp.revalidateLayout();\n      }\n    }\n  }\n\n  setWidgets(widgets) {\n    this.setProperty('widgets', widgets);\n  }\n\n  _renderWidgets() {\n    this.$carouselFilmstrip.empty();\n    this.$carouselItems = this.widgets.map(function(widget) {\n      let $carouselItem = this.$carouselFilmstrip.appendDiv('carousel-item');\n      let htmlComp = HtmlComponent.install($carouselItem, this.session);\n      htmlComp.setLayout(new SingleLayout());\n\n      // Add the CSS classes of the widget to be able to style the carousel items.\n      // Use a suffix to prevent conflicts\n      let cssClasses = widget.cssClassAsArray();\n      cssClasses.forEach(cssClass => {\n        $carouselItem.addClass(cssClass + '-carousel-item');\n      });\n\n      return $carouselItem;\n    }, this);\n\n    this._renderStatusItems();\n\n    // reset current item\n    this.setCurrentItem(0);\n  }\n\n  _registerCarouselFilmstripEventListeners() {\n    let $window = this.$carouselFilmstrip.window();\n    this.$carouselFilmstrip.on('mousedown touchstart', event => {\n      let origPageX = events.pageX(event);\n      let origPosition = this.positionX;\n      let minPositionX = this.$container.width() - this.$carouselFilmstrip.width();\n      let containerWidth = this.$container.width();\n      $window.on('mousemove.carouselDrag touchmove.carouselDrag', event => {\n        let pageX = events.pageX(event);\n        let moveX = pageX - origPageX;\n        let positionX = origPosition + moveX;\n        if (positionX !== this.positionX && positionX <= 0 && positionX >= minPositionX) {\n          this.$carouselFilmstrip.css({\n            transform: 'translateX(' + positionX + 'px)'\n          });\n          this.positionX = positionX;\n          // item\n          let i = positionX / containerWidth * -1;\n          this._renderItemsInternal(positionX < origPosition ? Math.floor(i) : Math.ceil(i), true);\n        }\n      });\n      $window.on('mouseup.carouselDrag touchend.carouselDrag touchcancel.carouselDrag', e => {\n        $window.off('.carouselDrag');\n        // show only whole items\n        let mod = this.positionX % containerWidth;\n        let newCurrentItem = this.currentItem;\n        if (this.positionX < origPosition && mod / containerWidth < (0 - this.moveThreshold)) { // next\n          newCurrentItem = Math.ceil(this.positionX / containerWidth * -1);\n        } else if (this.positionX > origPosition && mod / containerWidth >= this.moveThreshold - 1) { // prev\n          newCurrentItem = Math.floor(this.positionX / containerWidth * -1);\n        }\n        this.setCurrentItem(newCurrentItem);\n        if (mod !== 0) {\n          this.positionX = newCurrentItem * containerWidth * -1;\n          this.recalcTransformation();\n        }\n      });\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}