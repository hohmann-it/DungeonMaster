{"ast":null,"code":"/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, BoxButtons, ClickActiveElementKeyStroke, CloseKeyStroke, Device, dragAndDrop, Event, FileInput, files as fileUtil, FocusAdjacentElementKeyStroke, FocusRule, Form, FormLayout, GlassPaneRenderer, HtmlComponent, keys, KeyStrokeContext, MessageBoxes, scout, scrollbars, Status, Widget } from '../index';\nexport default class FileChooser extends Widget {\n  constructor() {\n    super();\n    this.displayParent = null;\n    this.files = [];\n    this._glassPaneRenderer = null;\n    this.maximumUploadSize = FileInput.DEFAULT_MAXIMUM_UPLOAD_SIZE;\n    this.boxButtons = null;\n    this.uploadButton = null;\n    this.cancelButton = null;\n    this.inheritAccessibility = false; // inherit not necessary. if the FileChooser can be opened, it must be editable. Opening a disabled chooser makes no sense.\n    this._addWidgetProperties(['boxButtons', 'uploadButton', 'cancelButton']);\n  }\n  _init(model) {\n    super._init(model);\n    this._setDisplayParent(this.displayParent);\n    this._glassPaneRenderer = new GlassPaneRenderer(this);\n    this.fileInput = scout.create('FileInput', {\n      parent: this,\n      acceptTypes: this.acceptTypes,\n      maximumUploadSize: this.maximumUploadSize,\n      multiSelect: this.multiSelect,\n      visible: !Device.get().supportsFile()\n    });\n    this.fileInput.on('change', this._onFileChange.bind(this));\n    this.boxButtons = scout.create('BoxButtons', {\n      parent: this\n    });\n    if (!this.fileInput.legacy) {\n      let addFileButton = this.boxButtons.addButton({\n        text: this.session.text('ui.Browse')\n      });\n      addFileButton.on('action', event => this._onAddFileButtonClicked(event));\n    }\n    this.uploadButton = this.boxButtons.addButton({\n      text: this.session.text('ui.Upload'),\n      enabled: false\n    });\n    this.uploadButton.on('action', event => this._onUploadButtonClicked(event));\n    this.cancelButton = this.boxButtons.addButton({\n      text: this.session.text('Cancel')\n    });\n    this.cancelButton.on('action', event => this._onCancelButtonClicked(event));\n  }\n\n  /**\n   * @override\n   */\n  _createKeyStrokeContext() {\n    return new KeyStrokeContext();\n  }\n\n  /**\n   * @override\n   */\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    this.keyStrokeContext.registerKeyStroke([new FocusAdjacentElementKeyStroke(this.session, this), new ClickActiveElementKeyStroke(this, [keys.SPACE, keys.ENTER]), new CloseKeyStroke(this, () => {\n      if (!this.cancelButton) {\n        return null;\n      }\n      return this.cancelButton.$container;\n    })]);\n  }\n  _render() {\n    this.$container = this.$parent.appendDiv('file-chooser').on('mousedown', this._onMouseDown.bind(this));\n    let $handle = this.$container.appendDiv('drag-handle');\n    this.$container.draggable($handle);\n    this.$content = this.$container.appendDiv('file-chooser-content');\n    this.$title = this.$content.appendDiv('file-chooser-title').text(this.session.text(this.multiSelect ? 'ui.ChooseFiles' : 'ui.ChooseFile'));\n    this.fileInput.render(this.$content);\n\n    // DnD and Multiple files are only supported with the new file api\n    if (!this.fileInput.legacy) {\n      // explanation for file chooser\n      this.$content.appendDiv('file-chooser-label').text(this.session.text('ui.FileChooserHint'));\n\n      // List of files\n      this.$files = this.$content.appendElement('<ul>', 'file-chooser-files');\n      this._installScrollbars();\n    }\n\n    // Buttons\n    this.boxButtons.render();\n    this.boxButtons.$container.addClass('file-chooser-buttons');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new FormLayout(this));\n    this.$container.addClassForAnimation('animate-open');\n    // Prevent resizing when file chooser is dragged off the viewport\n    this.$container.addClass('calc-helper');\n    let windowSize = this.$container.windowSize();\n    // Use css width, but ensure that it is not larger than the window (mobile)\n    let w = Math.min(this.$container.width(), windowSize.width);\n    this.$container.css('min-width', w);\n    this.$container.css('max-width', w);\n    this.$container.removeClass('calc-helper');\n\n    // Render modality glass-panes\n    this._glassPaneRenderer.renderGlassPanes();\n\n    // Now that all texts, paddings, widths etc. are set, we can calculate the position\n    this._position();\n  }\n  _renderProperties() {\n    super._renderProperties();\n    if (this.fileInput.legacy) {\n      // Files may not be set into native control -> clear list in order to be sync again\n      this.setFiles([]);\n    }\n    this._renderFiles();\n  }\n  _renderEnabled() {\n    super._renderEnabled();\n    this._installOrUninstallDragAndDropHandler();\n  }\n  _postRender() {\n    super._postRender();\n    this._installFocusContext();\n  }\n  _remove() {\n    this._glassPaneRenderer.removeGlassPanes();\n    dragAndDrop.uninstallDragAndDropHandler(this);\n    this._uninstallFocusContext();\n    super._remove();\n  }\n  _installFocusContext() {\n    this.session.focusManager.installFocusContext(this.$container, FocusRule.AUTO);\n  }\n  _uninstallFocusContext() {\n    this.session.focusManager.uninstallFocusContext(this.$container);\n  }\n\n  /**\n   * @override\n   */\n  get$Scrollable() {\n    return this.$files;\n  }\n  _position() {\n    this.$container.cssMarginLeft(-this.$container.outerWidth() / 2);\n  }\n  setDisplayParent(displayParent) {\n    this.setProperty('displayParent', displayParent);\n  }\n  _setDisplayParent(displayParent) {\n    this._setProperty('displayParent', displayParent);\n    if (displayParent) {\n      this.setParent(this.findDesktop().computeParentForDisplayParent(displayParent));\n    }\n  }\n  setMaximumUploadSize(maximumUploadSize) {\n    this.setProperty('maximumUploadSize', maximumUploadSize);\n    this.fileInput.setMaximumUploadSize(maximumUploadSize);\n  }\n\n  /**\n   * Renders the file chooser and links it with the display parent.\n   */\n  open() {\n    this.setDisplayParent(this.displayParent || this.session.desktop);\n    this.displayParent.fileChooserController.registerAndRender(this);\n  }\n\n  /**\n   * Destroys the file chooser and unlinks it from the display parent.\n   */\n  close() {\n    if (!this.rendered) {\n      this.cancel();\n      return;\n    }\n    if (this.cancelButton && this.cancelButton.$container && this.session.focusManager.requestFocus(this.cancelButton.$container)) {\n      this.cancelButton.doAction();\n    }\n  }\n  cancel() {\n    let event = new Event();\n    this.trigger('cancel', event);\n    if (!event.defaultPrevented) {\n      this._close();\n    }\n  }\n\n  /**\n   * Destroys the file chooser and unlinks it from the display parent.\n   */\n  _close() {\n    if (this.displayParent) {\n      this.displayParent.fileChooserController.unregisterAndRemove(this);\n    }\n    this.destroy();\n  }\n  _installOrUninstallDragAndDropHandler() {\n    dragAndDrop.installOrUninstallDragAndDropHandler({\n      target: this,\n      onDrop: event => this.addFiles(event.files),\n      dropMaximumSize: () => this.maximumUploadSize,\n      // disable file validation\n      validateFiles: (files, defaultValidator) => {}\n    });\n  }\n  browse() {\n    this.fileInput.browse();\n  }\n  setAcceptTypes(acceptTypes) {\n    this.setProperty('acceptTypes', acceptTypes);\n    this.fileInput.setAcceptTypes(acceptTypes);\n  }\n  setMultiSelect(multiSelect) {\n    this.setProperty('multiSelect', multiSelect);\n    this.fileInput.setMultiSelect(multiSelect);\n  }\n  addFiles(files) {\n    if (files instanceof FileList) {\n      files = fileUtil.fileListToArray(files);\n    }\n    files = arrays.ensure(files);\n    if (files.length === 0) {\n      return;\n    }\n    if (!this.multiSelect || this.fileInput.legacy) {\n      files = [files[0]];\n      this.setFiles([files[0]]);\n    } else {\n      // copy so that parameter stays untouched\n      files = files.slice();\n      // append new files to existing ones\n      arrays.insertAll(files, this.files, 0);\n      this.setFiles(files);\n    }\n  }\n  removeFile(file) {\n    let files = this.files.slice();\n    arrays.remove(files, file);\n    this.setFiles(files);\n    // Clear the input, otherwise user could not choose the file which he has removed previously\n    this.fileInput.clear();\n  }\n  setFiles(files) {\n    if (files instanceof FileList) {\n      files = fileUtil.fileListToArray(files);\n    }\n    files = arrays.ensure(files);\n    try {\n      this.fileInput.validateMaximumUploadSize(files);\n    } catch (errorMessage) {\n      MessageBoxes.createOk(this).withHeader(this.session.text('ui.FileSizeLimitTitle')).withBody(errorMessage).withSeverity(Status.Severity.ERROR).buildAndOpen();\n      return;\n    }\n    this.setProperty('files', files);\n  }\n  _renderFiles() {\n    let files = this.files;\n    if (!this.fileInput.legacy) {\n      this.$files.empty();\n      files.forEach(function (file) {\n        let $file = this.$files.appendElement('<li>', 'file', file.name);\n        // Append a space to allow the browser to break the line here when it gets too long\n        $file.append(' ');\n        let $remove = $file.appendSpan('remove').on('click', this.removeFile.bind(this, file));\n        let $removeLink = $file.makeElement('<a>', 'remove-link', this.session.text('Remove'));\n        $remove.append($removeLink);\n      }, this);\n      scrollbars.update(this.$files);\n    }\n    this.uploadButton.setEnabled(files.length > 0);\n  }\n  _onUploadButtonClicked(event) {\n    this.trigger('upload');\n  }\n  _onCancelButtonClicked(event) {\n    this.cancel();\n  }\n  _onAddFileButtonClicked(event) {\n    this.browse();\n  }\n  _onFileChange(event) {\n    this.addFiles(event.files);\n  }\n  _onMouseDown(event, option) {\n    // If there is a dialog in the parent-hierarchy activate it in order to bring it on top of other dialogs.\n    let parent = this.findParent(p => {\n      return p instanceof Form && p.isDialog();\n    });\n    if (parent) {\n      parent.activate();\n    }\n  }\n\n  /**\n   * @override Widget.js\n   */\n  _attach() {\n    this.$parent.append(this.$container);\n    super._attach();\n  }\n\n  /**\n   * @override Widget.js\n   */\n  _detach() {\n    this.$container.detach();\n    super._detach();\n  }\n}","map":{"version":3,"names":["arrays","BoxButtons","ClickActiveElementKeyStroke","CloseKeyStroke","Device","dragAndDrop","Event","FileInput","files","fileUtil","FocusAdjacentElementKeyStroke","FocusRule","Form","FormLayout","GlassPaneRenderer","HtmlComponent","keys","KeyStrokeContext","MessageBoxes","scout","scrollbars","Status","Widget","FileChooser","constructor","displayParent","_glassPaneRenderer","maximumUploadSize","DEFAULT_MAXIMUM_UPLOAD_SIZE","boxButtons","uploadButton","cancelButton","inheritAccessibility","_addWidgetProperties","_init","model","_setDisplayParent","fileInput","create","parent","acceptTypes","multiSelect","visible","get","supportsFile","on","_onFileChange","bind","legacy","addFileButton","addButton","text","session","event","_onAddFileButtonClicked","enabled","_onUploadButtonClicked","_onCancelButtonClicked","_createKeyStrokeContext","_initKeyStrokeContext","keyStrokeContext","registerKeyStroke","SPACE","ENTER","$container","_render","$parent","appendDiv","_onMouseDown","$handle","draggable","$content","$title","render","$files","appendElement","_installScrollbars","addClass","htmlComp","install","setLayout","addClassForAnimation","windowSize","w","Math","min","width","css","removeClass","renderGlassPanes","_position","_renderProperties","setFiles","_renderFiles","_renderEnabled","_installOrUninstallDragAndDropHandler","_postRender","_installFocusContext","_remove","removeGlassPanes","uninstallDragAndDropHandler","_uninstallFocusContext","focusManager","installFocusContext","AUTO","uninstallFocusContext","get$Scrollable","cssMarginLeft","outerWidth","setDisplayParent","setProperty","_setProperty","setParent","findDesktop","computeParentForDisplayParent","setMaximumUploadSize","open","desktop","fileChooserController","registerAndRender","close","rendered","cancel","requestFocus","doAction","trigger","defaultPrevented","_close","unregisterAndRemove","destroy","installOrUninstallDragAndDropHandler","target","onDrop","addFiles","dropMaximumSize","validateFiles","defaultValidator","browse","setAcceptTypes","setMultiSelect","FileList","fileListToArray","ensure","length","slice","insertAll","removeFile","file","remove","clear","validateMaximumUploadSize","errorMessage","createOk","withHeader","withBody","withSeverity","Severity","ERROR","buildAndOpen","empty","forEach","$file","name","append","$remove","appendSpan","$removeLink","makeElement","update","setEnabled","option","findParent","p","isDialog","activate","_attach","_detach","detach"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/filechooser/FileChooser.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, BoxButtons, ClickActiveElementKeyStroke, CloseKeyStroke, Device, dragAndDrop, Event, FileInput, files as fileUtil, FocusAdjacentElementKeyStroke, FocusRule, Form, FormLayout, GlassPaneRenderer, HtmlComponent, keys, KeyStrokeContext, MessageBoxes, scout, scrollbars, Status, Widget} from '../index';\n\nexport default class FileChooser extends Widget {\n\n  constructor() {\n    super();\n    this.displayParent = null;\n    this.files = [];\n    this._glassPaneRenderer = null;\n    this.maximumUploadSize = FileInput.DEFAULT_MAXIMUM_UPLOAD_SIZE;\n    this.boxButtons = null;\n    this.uploadButton = null;\n    this.cancelButton = null;\n    this.inheritAccessibility = false; // inherit not necessary. if the FileChooser can be opened, it must be editable. Opening a disabled chooser makes no sense.\n    this._addWidgetProperties(['boxButtons', 'uploadButton', 'cancelButton']);\n  }\n\n  _init(model) {\n    super._init(model);\n    this._setDisplayParent(this.displayParent);\n    this._glassPaneRenderer = new GlassPaneRenderer(this);\n\n    this.fileInput = scout.create('FileInput', {\n      parent: this,\n      acceptTypes: this.acceptTypes,\n      maximumUploadSize: this.maximumUploadSize,\n      multiSelect: this.multiSelect,\n      visible: !Device.get().supportsFile()\n    });\n    this.fileInput.on('change', this._onFileChange.bind(this));\n\n    this.boxButtons = scout.create('BoxButtons', {parent: this});\n    if (!this.fileInput.legacy) {\n      let addFileButton = this.boxButtons.addButton({text: this.session.text('ui.Browse')});\n      addFileButton.on('action', event => this._onAddFileButtonClicked(event));\n    }\n\n    this.uploadButton = this.boxButtons.addButton({\n      text: this.session.text('ui.Upload'),\n      enabled: false\n    });\n    this.uploadButton.on('action', event => this._onUploadButtonClicked(event));\n\n    this.cancelButton = this.boxButtons.addButton({text: this.session.text('Cancel')});\n    this.cancelButton.on('action', event => this._onCancelButtonClicked(event));\n  }\n\n  /**\n   * @override\n   */\n  _createKeyStrokeContext() {\n    return new KeyStrokeContext();\n  }\n\n  /**\n   * @override\n   */\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n\n    this.keyStrokeContext.registerKeyStroke([\n      new FocusAdjacentElementKeyStroke(this.session, this),\n      new ClickActiveElementKeyStroke(this, [\n        keys.SPACE, keys.ENTER\n      ]),\n      new CloseKeyStroke(this, (() => {\n        if (!this.cancelButton) {\n          return null;\n        }\n        return this.cancelButton.$container;\n      }))\n    ]);\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('file-chooser')\n      .on('mousedown', this._onMouseDown.bind(this));\n    let $handle = this.$container.appendDiv('drag-handle');\n    this.$container.draggable($handle);\n\n    this.$content = this.$container.appendDiv('file-chooser-content');\n    this.$title = this.$content.appendDiv('file-chooser-title')\n      .text(this.session.text(this.multiSelect ? 'ui.ChooseFiles' : 'ui.ChooseFile'));\n\n    this.fileInput.render(this.$content);\n\n    // DnD and Multiple files are only supported with the new file api\n    if (!this.fileInput.legacy) {\n\n      // explanation for file chooser\n      this.$content.appendDiv('file-chooser-label')\n        .text(this.session.text('ui.FileChooserHint'));\n\n      // List of files\n      this.$files = this.$content.appendElement('<ul>', 'file-chooser-files');\n      this._installScrollbars();\n    }\n\n    // Buttons\n    this.boxButtons.render();\n    this.boxButtons.$container.addClass('file-chooser-buttons');\n\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new FormLayout(this));\n\n    this.$container.addClassForAnimation('animate-open');\n    // Prevent resizing when file chooser is dragged off the viewport\n    this.$container.addClass('calc-helper');\n    let windowSize = this.$container.windowSize();\n    // Use css width, but ensure that it is not larger than the window (mobile)\n    let w = Math.min(this.$container.width(), windowSize.width);\n    this.$container.css('min-width', w);\n    this.$container.css('max-width', w);\n    this.$container.removeClass('calc-helper');\n\n    // Render modality glass-panes\n    this._glassPaneRenderer.renderGlassPanes();\n\n    // Now that all texts, paddings, widths etc. are set, we can calculate the position\n    this._position();\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    if (this.fileInput.legacy) {\n      // Files may not be set into native control -> clear list in order to be sync again\n      this.setFiles([]);\n    }\n    this._renderFiles();\n  }\n\n  _renderEnabled() {\n    super._renderEnabled();\n    this._installOrUninstallDragAndDropHandler();\n  }\n\n  _postRender() {\n    super._postRender();\n    this._installFocusContext();\n  }\n\n  _remove() {\n    this._glassPaneRenderer.removeGlassPanes();\n    dragAndDrop.uninstallDragAndDropHandler(this);\n    this._uninstallFocusContext();\n    super._remove();\n  }\n\n  _installFocusContext() {\n    this.session.focusManager.installFocusContext(this.$container, FocusRule.AUTO);\n  }\n\n  _uninstallFocusContext() {\n    this.session.focusManager.uninstallFocusContext(this.$container);\n  }\n\n  /**\n   * @override\n   */\n  get$Scrollable() {\n    return this.$files;\n  }\n\n  _position() {\n    this.$container.cssMarginLeft(-this.$container.outerWidth() / 2);\n  }\n\n  setDisplayParent(displayParent) {\n    this.setProperty('displayParent', displayParent);\n  }\n\n  _setDisplayParent(displayParent) {\n    this._setProperty('displayParent', displayParent);\n    if (displayParent) {\n      this.setParent(this.findDesktop().computeParentForDisplayParent(displayParent));\n    }\n  }\n\n  setMaximumUploadSize(maximumUploadSize) {\n    this.setProperty('maximumUploadSize', maximumUploadSize);\n    this.fileInput.setMaximumUploadSize(maximumUploadSize);\n  }\n\n  /**\n   * Renders the file chooser and links it with the display parent.\n   */\n  open() {\n    this.setDisplayParent(this.displayParent || this.session.desktop);\n    this.displayParent.fileChooserController.registerAndRender(this);\n  }\n\n  /**\n   * Destroys the file chooser and unlinks it from the display parent.\n   */\n  close() {\n    if (!this.rendered) {\n      this.cancel();\n      return;\n    }\n    if (this.cancelButton && this.cancelButton.$container && this.session.focusManager.requestFocus(this.cancelButton.$container)) {\n      this.cancelButton.doAction();\n    }\n  }\n\n  cancel() {\n    let event = new Event();\n    this.trigger('cancel', event);\n    if (!event.defaultPrevented) {\n      this._close();\n    }\n  }\n\n  /**\n   * Destroys the file chooser and unlinks it from the display parent.\n   */\n  _close() {\n    if (this.displayParent) {\n      this.displayParent.fileChooserController.unregisterAndRemove(this);\n    }\n    this.destroy();\n  }\n\n  _installOrUninstallDragAndDropHandler() {\n    dragAndDrop.installOrUninstallDragAndDropHandler(\n      {\n        target: this,\n        onDrop: event => this.addFiles(event.files),\n        dropMaximumSize: () => this.maximumUploadSize,\n        // disable file validation\n        validateFiles: (files, defaultValidator) => {\n        }\n      });\n  }\n\n  browse() {\n    this.fileInput.browse();\n  }\n\n  setAcceptTypes(acceptTypes) {\n    this.setProperty('acceptTypes', acceptTypes);\n    this.fileInput.setAcceptTypes(acceptTypes);\n  }\n\n  setMultiSelect(multiSelect) {\n    this.setProperty('multiSelect', multiSelect);\n    this.fileInput.setMultiSelect(multiSelect);\n  }\n\n  addFiles(files) {\n    if (files instanceof FileList) {\n      files = fileUtil.fileListToArray(files);\n    }\n    files = arrays.ensure(files);\n    if (files.length === 0) {\n      return;\n    }\n    if (!this.multiSelect || this.fileInput.legacy) {\n      files = [files[0]];\n      this.setFiles([files[0]]);\n    } else {\n      // copy so that parameter stays untouched\n      files = files.slice();\n      // append new files to existing ones\n      arrays.insertAll(files, this.files, 0);\n      this.setFiles(files);\n    }\n  }\n\n  removeFile(file) {\n    let files = this.files.slice();\n    arrays.remove(files, file);\n    this.setFiles(files);\n    // Clear the input, otherwise user could not choose the file which he has removed previously\n    this.fileInput.clear();\n  }\n\n  setFiles(files) {\n    if (files instanceof FileList) {\n      files = fileUtil.fileListToArray(files);\n    }\n    files = arrays.ensure(files);\n\n    try {\n      this.fileInput.validateMaximumUploadSize(files);\n    } catch (errorMessage) {\n      MessageBoxes.createOk(this)\n        .withHeader(this.session.text('ui.FileSizeLimitTitle'))\n        .withBody(errorMessage)\n        .withSeverity(Status.Severity.ERROR)\n        .buildAndOpen();\n      return;\n    }\n\n    this.setProperty('files', files);\n  }\n\n  _renderFiles() {\n    let files = this.files;\n\n    if (!this.fileInput.legacy) {\n      this.$files.empty();\n      files.forEach(function(file) {\n        let $file = this.$files.appendElement('<li>', 'file', file.name);\n        // Append a space to allow the browser to break the line here when it gets too long\n        $file.append(' ');\n        let $remove = $file\n          .appendSpan('remove')\n          .on('click', this.removeFile.bind(this, file));\n        let $removeLink = $file.makeElement('<a>', 'remove-link', this.session.text('Remove'));\n        $remove.append($removeLink);\n      }, this);\n      scrollbars.update(this.$files);\n    }\n    this.uploadButton.setEnabled(files.length > 0);\n  }\n\n  _onUploadButtonClicked(event) {\n    this.trigger('upload');\n  }\n\n  _onCancelButtonClicked(event) {\n    this.cancel();\n  }\n\n  _onAddFileButtonClicked(event) {\n    this.browse();\n  }\n\n  _onFileChange(event) {\n    this.addFiles(event.files);\n  }\n\n  _onMouseDown(event, option) {\n    // If there is a dialog in the parent-hierarchy activate it in order to bring it on top of other dialogs.\n    let parent = this.findParent(p => {\n      return p instanceof Form && p.isDialog();\n    });\n    if (parent) {\n      parent.activate();\n    }\n  }\n\n  /**\n   * @override Widget.js\n   */\n  _attach() {\n    this.$parent.append(this.$container);\n    super._attach();\n  }\n\n  /**\n   * @override Widget.js\n   */\n  _detach() {\n    this.$container.detach();\n    super._detach();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}