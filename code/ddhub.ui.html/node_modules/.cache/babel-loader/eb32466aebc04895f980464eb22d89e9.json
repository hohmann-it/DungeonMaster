{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { scout, TouchPopup } from '../../../index';\n\n/**\n * Info: this class must have the same interface as SmartFieldPopup. That's why there's some\n * copy/pasted code here, because we don't have multi inheritance.\n */\nexport default class SmartFieldTouchPopup extends TouchPopup {\n  constructor() {\n    super();\n  }\n  _init(options) {\n    options.withFocusContext = false;\n    options.smartField = options.parent; // alias for parent (required by proposal chooser)\n    super._init(options);\n    this.setLookupResult(options.lookupResult);\n    this.setStatus(options.status);\n    this.one('close', this._beforeClosePopup.bind(this));\n    this.smartField.on('propertyChange', this._onPropertyChange.bind(this));\n    this.addCssClass('smart-field-touch-popup');\n  }\n  _initWidget(options) {\n    this._widget = this._createProposalChooser();\n    this._widget.on('lookupRowSelected', this._triggerEvent.bind(this));\n    this._widget.on('activeFilterSelected', this._triggerEvent.bind(this));\n  }\n  _createProposalChooser() {\n    let objectType = this.parent.browseHierarchy ? 'TreeProposalChooser' : 'TableProposalChooser';\n    return scout.create(objectType, {\n      parent: this,\n      touch: true,\n      smartField: this._field\n    });\n  }\n  _fieldOverrides() {\n    let obj = super._fieldOverrides();\n    // Make sure proposal chooser does not get cloned, because it would not work (e.g. because selectedRows may not be cloned)\n    // It would also generate a loop because field would try to render the chooser and the popup\n    // -> The original smart field has to control the chooser\n    obj.proposalChooser = null;\n    return obj;\n  }\n  _onMouseDownOutside() {\n    this._acceptInput(); // see: #_beforeClosePopup()\n  }\n\n  /**\n   * Delegates the key event to the proposal chooser.\n   */\n  delegateKeyEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this._widget.delegateKeyEvent(event);\n  }\n  getSelectedLookupRow() {\n    return this._widget.getSelectedLookupRow();\n  }\n  _triggerEvent(event) {\n    this.trigger(event.type, event);\n  }\n  setLookupResult(result) {\n    this._widget.setLookupResult(result);\n  }\n  setStatus(status) {\n    this._widget.setStatus(status);\n  }\n  clearLookupRows() {\n    this._widget.clearLookupRows();\n  }\n  selectFirstLookupRow() {\n    this._widget.selectFirstLookupRow();\n  }\n  selectLookupRow() {\n    this._widget.triggerLookupRowSelected();\n  }\n  _onPropertyChange(event) {\n    if ('lookupStatus' === event.propertyName) {\n      this._field.setLookupStatus(event.newValue);\n    }\n  }\n  _beforeClosePopup(event) {\n    this.smartField.acceptInputFromField(this._field);\n  }\n}","map":{"version":3,"names":["scout","TouchPopup","SmartFieldTouchPopup","constructor","_init","options","withFocusContext","smartField","parent","setLookupResult","lookupResult","setStatus","status","one","_beforeClosePopup","bind","on","_onPropertyChange","addCssClass","_initWidget","_widget","_createProposalChooser","_triggerEvent","objectType","browseHierarchy","create","touch","_field","_fieldOverrides","obj","proposalChooser","_onMouseDownOutside","_acceptInput","delegateKeyEvent","event","originalEvent","smartFieldEvent","getSelectedLookupRow","trigger","type","result","clearLookupRows","selectFirstLookupRow","selectLookupRow","triggerLookupRowSelected","propertyName","setLookupStatus","newValue","acceptInputFromField"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/fields/smartfield/SmartFieldTouchPopup.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {scout, TouchPopup} from '../../../index';\n\n/**\n * Info: this class must have the same interface as SmartFieldPopup. That's why there's some\n * copy/pasted code here, because we don't have multi inheritance.\n */\nexport default class SmartFieldTouchPopup extends TouchPopup {\n\n  constructor() {\n    super();\n  }\n\n  _init(options) {\n    options.withFocusContext = false;\n    options.smartField = options.parent; // alias for parent (required by proposal chooser)\n    super._init(options);\n\n    this.setLookupResult(options.lookupResult);\n    this.setStatus(options.status);\n    this.one('close', this._beforeClosePopup.bind(this));\n    this.smartField.on('propertyChange', this._onPropertyChange.bind(this));\n    this.addCssClass('smart-field-touch-popup');\n  }\n\n  _initWidget(options) {\n    this._widget = this._createProposalChooser();\n    this._widget.on('lookupRowSelected', this._triggerEvent.bind(this));\n    this._widget.on('activeFilterSelected', this._triggerEvent.bind(this));\n  }\n\n  _createProposalChooser() {\n    let objectType = this.parent.browseHierarchy ? 'TreeProposalChooser' : 'TableProposalChooser';\n    return scout.create(objectType, {\n      parent: this,\n      touch: true,\n      smartField: this._field\n    });\n  }\n\n  _fieldOverrides() {\n    let obj = super._fieldOverrides();\n    // Make sure proposal chooser does not get cloned, because it would not work (e.g. because selectedRows may not be cloned)\n    // It would also generate a loop because field would try to render the chooser and the popup\n    // -> The original smart field has to control the chooser\n    obj.proposalChooser = null;\n    return obj;\n  }\n\n  _onMouseDownOutside() {\n    this._acceptInput(); // see: #_beforeClosePopup()\n  }\n\n  /**\n   * Delegates the key event to the proposal chooser.\n   */\n  delegateKeyEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this._widget.delegateKeyEvent(event);\n  }\n\n  getSelectedLookupRow() {\n    return this._widget.getSelectedLookupRow();\n  }\n\n  _triggerEvent(event) {\n    this.trigger(event.type, event);\n  }\n\n  setLookupResult(result) {\n    this._widget.setLookupResult(result);\n  }\n\n  setStatus(status) {\n    this._widget.setStatus(status);\n  }\n\n  clearLookupRows() {\n    this._widget.clearLookupRows();\n  }\n\n  selectFirstLookupRow() {\n    this._widget.selectFirstLookupRow();\n  }\n\n  selectLookupRow() {\n    this._widget.triggerLookupRowSelected();\n  }\n\n  _onPropertyChange(event) {\n    if ('lookupStatus' === event.propertyName) {\n      this._field.setLookupStatus(event.newValue);\n    }\n  }\n\n  _beforeClosePopup(event) {\n    this.smartField.acceptInputFromField(this._field);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}