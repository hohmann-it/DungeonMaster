{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout, Dimension, HtmlComponent, HtmlEnvironment } from '../../index';\nexport default class LookupBoxLayout extends AbstractLayout {\n  constructor(box, structure, filterBox) {\n    super();\n    this.box = box;\n    this.structure = structure;\n    this.filterBox = filterBox;\n  }\n  layout($container) {\n    let htmlContainer = HtmlComponent.get($container),\n      size = htmlContainer.size(),\n      height = size.height,\n      filterBoxHeight;\n    if (this.filterBox && this.filterBox.rendered) {\n      filterBoxHeight = HtmlComponent.get(this.filterBox.$container).prefSize().height;\n      height -= filterBoxHeight;\n    }\n    height = Math.max(height, 20);\n    let htmlStructure = HtmlComponent.get(this.structure.$container);\n    htmlStructure.setSize(new Dimension(size.width, height));\n    if (this.filterBox && this.filterBox.rendered) {\n      let htmlFilterBox = HtmlComponent.get(this.filterBox.$container);\n      htmlFilterBox.setSize(new Dimension(size.width, filterBoxHeight));\n    }\n  }\n  preferredLayoutSize($container, options) {\n    options = options || {};\n    let prefSizeStructure,\n      prefSizeFilterBox,\n      structureContainer,\n      filterContainer,\n      width = 0,\n      htmlContainer = HtmlComponent.get($container),\n      height = HtmlEnvironment.get().formRowHeight,\n      box = this.box;\n\n    // HeightHint not supported\n    options.heightHint = null;\n    if (box.$label && box.labelVisible) {\n      width += HtmlEnvironment.get().fieldLabelWidth;\n    }\n    if (box.$mandatory && box.$mandatory.isVisible()) {\n      width += box.$mandatory.outerWidth(true);\n    }\n    if (box.$status && box.statusVisible) {\n      width += box.$status.outerWidth(true);\n    }\n\n    // size of table and size of filterBox\n    structureContainer = HtmlComponent.optGet(this.structure.$container);\n    if (structureContainer) {\n      prefSizeStructure = structureContainer.prefSize(options).add(htmlContainer.insets()).add(structureContainer.margins());\n    } else {\n      prefSizeStructure = this.naturalSize(box);\n    }\n    prefSizeFilterBox = new Dimension(0, 0);\n    if (this.filterBox) {\n      filterContainer = HtmlComponent.optGet(this.filterBox.$container);\n      if (filterContainer) {\n        prefSizeFilterBox = filterContainer.prefSize(options).add(htmlContainer.insets()).add(filterContainer.margins());\n      }\n    }\n    width += Math.max(prefSizeStructure.width, prefSizeFilterBox.width);\n    height = Math.max(height, prefSizeStructure.height + prefSizeFilterBox.height);\n    return new Dimension(width, height);\n  }\n  naturalSize(formField) {\n    return new Dimension(formField.$fieldContainer.width(), formField.$fieldContainer.height());\n  }\n}","map":{"version":3,"names":["AbstractLayout","Dimension","HtmlComponent","HtmlEnvironment","LookupBoxLayout","constructor","box","structure","filterBox","layout","$container","htmlContainer","get","size","height","filterBoxHeight","rendered","prefSize","Math","max","htmlStructure","setSize","width","htmlFilterBox","preferredLayoutSize","options","prefSizeStructure","prefSizeFilterBox","structureContainer","filterContainer","formRowHeight","heightHint","$label","labelVisible","fieldLabelWidth","$mandatory","isVisible","outerWidth","$status","statusVisible","optGet","add","insets","margins","naturalSize","formField","$fieldContainer"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/fields/LookupBoxLayout.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout, Dimension, HtmlComponent, HtmlEnvironment} from '../../index';\n\nexport default class LookupBoxLayout extends AbstractLayout {\n\n  constructor(box, structure, filterBox) {\n    super();\n    this.box = box;\n    this.structure = structure;\n    this.filterBox = filterBox;\n  }\n\n  layout($container) {\n    let htmlContainer = HtmlComponent.get($container),\n      size = htmlContainer.size(),\n      height = size.height,\n      filterBoxHeight;\n\n    if (this.filterBox && this.filterBox.rendered) {\n      filterBoxHeight = HtmlComponent.get(this.filterBox.$container).prefSize().height;\n      height -= filterBoxHeight;\n    }\n\n    height = Math.max(height, 20);\n    let htmlStructure = HtmlComponent.get(this.structure.$container);\n    htmlStructure.setSize(new Dimension(size.width, height));\n\n    if (this.filterBox && this.filterBox.rendered) {\n      let htmlFilterBox = HtmlComponent.get(this.filterBox.$container);\n      htmlFilterBox.setSize(new Dimension(size.width, filterBoxHeight));\n    }\n  }\n\n  preferredLayoutSize($container, options) {\n    options = options || {};\n    let prefSizeStructure, prefSizeFilterBox, structureContainer, filterContainer,\n      width = 0,\n      htmlContainer = HtmlComponent.get($container),\n      height = HtmlEnvironment.get().formRowHeight,\n      box = this.box;\n\n    // HeightHint not supported\n    options.heightHint = null;\n\n    if (box.$label && box.labelVisible) {\n      width += HtmlEnvironment.get().fieldLabelWidth;\n    }\n    if (box.$mandatory && box.$mandatory.isVisible()) {\n      width += box.$mandatory.outerWidth(true);\n    }\n    if (box.$status && box.statusVisible) {\n      width += box.$status.outerWidth(true);\n    }\n\n    // size of table and size of filterBox\n    structureContainer = HtmlComponent.optGet(this.structure.$container);\n    if (structureContainer) {\n      prefSizeStructure = structureContainer.prefSize(options)\n        .add(htmlContainer.insets())\n        .add(structureContainer.margins());\n    } else {\n      prefSizeStructure = this.naturalSize(box);\n    }\n\n    prefSizeFilterBox = new Dimension(0, 0);\n    if (this.filterBox) {\n      filterContainer = HtmlComponent.optGet(this.filterBox.$container);\n      if (filterContainer) {\n        prefSizeFilterBox = filterContainer.prefSize(options)\n          .add(htmlContainer.insets())\n          .add(filterContainer.margins());\n      }\n    }\n\n    width += Math.max(prefSizeStructure.width, prefSizeFilterBox.width);\n    height = Math.max(height, prefSizeStructure.height + prefSizeFilterBox.height);\n\n    return new Dimension(width, height);\n  }\n\n  naturalSize(formField) {\n    return new Dimension(formField.$fieldContainer.width(), formField.$fieldContainer.height());\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}