{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { EventSupport, router, strings } from '../index';\nimport $ from 'jquery';\nlet routes = []; // array with Routes\nlet events = new EventSupport();\nlet currentRoute = null;\nlet defaultLocation = null;\n\n/**\n * Default location is used, when no route is set in the URL when routes are activated initially.\n * Typically this points to your 'home' page.\n */\nexport function setDefaultLocation(location) {\n  defaultLocation = '#' + location;\n}\nexport function prepare($a, location) {\n  if (!strings.startsWith(location, '#')) {\n    location = '#' + location;\n  }\n  $a.attr('href', location).on('mousedown', event => {\n    activate(location);\n    return false; // prevent default\n  });\n}\n\nexport function activate(location) {\n  if (!location) {\n    let regexp = new RegExp('[^/]*$'); // match everything after last slash\n    let matches = regexp.exec(document.location.href);\n    location = matches[0];\n  }\n\n  // no route is set in the URL\n  if (strings.empty(location) || '/' === location) {\n    location = defaultLocation;\n  }\n  let i,\n    route = null;\n  for (i = 0; i < routes.length; i++) {\n    route = routes[i];\n    if (route.matches(location)) {\n      if (route === currentRoute && route.location === location) {\n        $.log.isDebugEnabled() && $.log.debug('Route has not changed - do not activate route');\n        return;\n      }\n\n      // deactivate old route\n      if (currentRoute) {\n        currentRoute.deactivate();\n      }\n\n      // activate new route\n      currentRoute = route;\n      currentRoute.activate(location);\n      window.location.replace(location);\n      $.log.isInfoEnabled() && $.log.info('router: activated route for location=', location);\n      events.trigger('routeChange', {\n        route: route\n      });\n      return;\n    }\n  }\n  $.log.warn('router: no route registered for location=', location);\n}\nexport function register(route) {\n  routes.push(route);\n}\nexport function on(event, handler) {\n  events.on(event, handler);\n}\n\n/**\n * Updates the location (URL) field in the browser.\n *\n * @param {string} routeRef a string which identifies a route.\n */\nexport function updateLocation(routeRef) {\n  let location = '#' + routeRef;\n  window.location.replace(location);\n}\nexport default {\n  activate,\n  currentRoute,\n  defaultLocation,\n  events,\n  on,\n  prepare,\n  register,\n  routes,\n  setDefaultLocation,\n  updateLocation\n};\nwindow.addEventListener('popstate', event => {\n  router.activate(null);\n  return false;\n});","map":{"version":3,"names":["EventSupport","router","strings","$","routes","events","currentRoute","defaultLocation","setDefaultLocation","location","prepare","$a","startsWith","attr","on","event","activate","regexp","RegExp","matches","exec","document","href","empty","i","route","length","log","isDebugEnabled","debug","deactivate","window","replace","isInfoEnabled","info","trigger","warn","register","push","handler","updateLocation","routeRef","addEventListener"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/router/router.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {EventSupport, router, strings} from '../index';\nimport $ from 'jquery';\n\nlet routes = []; // array with Routes\nlet events = new EventSupport();\nlet currentRoute = null;\nlet defaultLocation = null;\n\n/**\n * Default location is used, when no route is set in the URL when routes are activated initially.\n * Typically this points to your 'home' page.\n */\nexport function setDefaultLocation(location) {\n  defaultLocation = '#' + location;\n}\n\nexport function prepare($a, location) {\n  if (!strings.startsWith(location, '#')) {\n    location = '#' + location;\n  }\n  $a\n    .attr('href', location)\n    .on('mousedown', event => {\n      activate(location);\n      return false; // prevent default\n    });\n\n}\n\nexport function activate(location) {\n  if (!location) {\n    let regexp = new RegExp('[^/]*$'); // match everything after last slash\n    let matches = regexp.exec(document.location.href);\n    location = matches[0];\n  }\n\n  // no route is set in the URL\n  if (strings.empty(location) || '/' === location) {\n    location = defaultLocation;\n  }\n\n  let i, route = null;\n  for (i = 0; i < routes.length; i++) {\n    route = routes[i];\n    if (route.matches(location)) {\n\n      if (route === currentRoute && route.location === location) {\n        $.log.isDebugEnabled() && $.log.debug('Route has not changed - do not activate route');\n        return;\n      }\n\n      // deactivate old route\n      if (currentRoute) {\n        currentRoute.deactivate();\n      }\n\n      // activate new route\n      currentRoute = route;\n      currentRoute.activate(location);\n\n      window.location.replace(location);\n      $.log.isInfoEnabled() && $.log.info('router: activated route for location=', location);\n\n      events.trigger('routeChange', {\n        route: route\n      });\n      return;\n    }\n  }\n  $.log.warn('router: no route registered for location=', location);\n}\n\nexport function register(route) {\n  routes.push(route);\n}\n\nexport function on(event, handler) {\n  events.on(event, handler);\n}\n\n/**\n * Updates the location (URL) field in the browser.\n *\n * @param {string} routeRef a string which identifies a route.\n */\nexport function updateLocation(routeRef) {\n  let location = '#' + routeRef;\n  window.location.replace(location);\n}\n\nexport default {\n  activate,\n  currentRoute,\n  defaultLocation,\n  events,\n  on,\n  prepare,\n  register,\n  routes,\n  setDefaultLocation,\n  updateLocation\n};\n\nwindow.addEventListener('popstate', event => {\n  router.activate(null);\n  return false;\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}