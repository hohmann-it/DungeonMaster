{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { lookupField, Popup, scout, TagChooserPopupLayout } from '../../../index';\nexport default class TagChooserPopup extends Popup {\n  constructor() {\n    super();\n    this.table = null;\n    this.windowPaddingX = 0;\n    this.windowPaddingY = 0;\n  }\n  _init(model) {\n    super._init(model);\n    let column = scout.create('Column', {\n      index: 0,\n      session: this.session,\n      text: 'Tag',\n      autoOptimizeWidth: false\n    });\n    this.table = scout.create('Table', {\n      parent: this,\n      headerVisible: false,\n      autoResizeColumns: true,\n      multiSelect: false,\n      scrollToSelection: true,\n      columns: [column],\n      headerMenusEnabled: false,\n      textFilterEnabled: false\n    });\n    this.table.on('rowClick', this._onRowClick.bind(this));\n  }\n  _createLayout() {\n    return new TagChooserPopupLayout(this);\n  }\n  _render() {\n    super._render();\n    this.$container.addClass('tag-chooser-popup').on('mousedown', this._onContainerMouseDown.bind(this));\n    this._renderTable();\n  }\n  _renderTable() {\n    this.table.setVirtual(false);\n    this.table.render();\n\n    // Make sure table never gets the focus, but looks focused\n    this.table.$container.setTabbable(false).addClass('focused');\n  }\n  setLookupResult(result) {\n    let tableRows = [],\n      lookupRows = result.lookupRows;\n    this.table.deleteAllRows();\n    lookupRows.forEach(lookupRow => {\n      tableRows.push(lookupField.createTableRow(lookupRow));\n    }, this);\n    this.table.insertRows(tableRows);\n  }\n  _onRowClick(event) {\n    this.triggerLookupRowSelected();\n  }\n\n  /**\n   * This event handler is called before the mousedown handler on the _document_ is triggered\n   * This allows us to prevent the default, which is important for the CellEditorPopup which\n   * should stay open when the SmartField popup is closed. It also prevents the focus blur\n   * event on the SmartField input-field.\n   */\n  _onContainerMouseDown(event) {\n    // when user clicks on proposal popup with table or tree (prevent default,\n    // so input-field does not lose the focus, popup will be closed by the\n    // proposal chooser impl.\n    return false;\n  }\n  _isMouseDownOnAnchor(event) {\n    return this.field.$field.isOrHas(event.target);\n  }\n  delegateKeyEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this.table.$container.trigger(event);\n  }\n  triggerLookupRowSelected(row) {\n    row = row || this.selectedRow();\n    if (!row || !row.enabled) {\n      return;\n    }\n    this.trigger('lookupRowSelected', {\n      lookupRow: row.lookupRow\n    });\n  }\n  selectedRow() {\n    return this.table.selectedRow();\n  }\n}","map":{"version":3,"names":["lookupField","Popup","scout","TagChooserPopupLayout","TagChooserPopup","constructor","table","windowPaddingX","windowPaddingY","_init","model","column","create","index","session","text","autoOptimizeWidth","parent","headerVisible","autoResizeColumns","multiSelect","scrollToSelection","columns","headerMenusEnabled","textFilterEnabled","on","_onRowClick","bind","_createLayout","_render","$container","addClass","_onContainerMouseDown","_renderTable","setVirtual","render","setTabbable","setLookupResult","result","tableRows","lookupRows","deleteAllRows","forEach","lookupRow","push","createTableRow","insertRows","event","triggerLookupRowSelected","_isMouseDownOnAnchor","field","$field","isOrHas","target","delegateKeyEvent","originalEvent","smartFieldEvent","trigger","row","selectedRow","enabled"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/fields/tagfield/TagChooserPopup.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {lookupField, Popup, scout, TagChooserPopupLayout} from '../../../index';\n\nexport default class TagChooserPopup extends Popup {\n\n  constructor() {\n    super();\n\n    this.table = null;\n    this.windowPaddingX = 0;\n    this.windowPaddingY = 0;\n  }\n\n  _init(model) {\n    super._init(model);\n\n    let column = scout.create('Column', {\n      index: 0,\n      session: this.session,\n      text: 'Tag',\n      autoOptimizeWidth: false\n    });\n\n    this.table = scout.create('Table', {\n      parent: this,\n      headerVisible: false,\n      autoResizeColumns: true,\n      multiSelect: false,\n      scrollToSelection: true,\n      columns: [column],\n      headerMenusEnabled: false,\n      textFilterEnabled: false\n    });\n\n    this.table.on('rowClick', this._onRowClick.bind(this));\n  }\n\n  _createLayout() {\n    return new TagChooserPopupLayout(this);\n  }\n\n  _render() {\n    super._render();\n\n    this.$container\n      .addClass('tag-chooser-popup')\n      .on('mousedown', this._onContainerMouseDown.bind(this));\n    this._renderTable();\n  }\n\n  _renderTable() {\n    this.table.setVirtual(false);\n    this.table.render();\n\n    // Make sure table never gets the focus, but looks focused\n    this.table.$container\n      .setTabbable(false)\n      .addClass('focused');\n  }\n\n  setLookupResult(result) {\n    let\n      tableRows = [],\n      lookupRows = result.lookupRows;\n\n    this.table.deleteAllRows();\n    lookupRows.forEach(lookupRow => {\n      tableRows.push(lookupField.createTableRow(lookupRow));\n    }, this);\n    this.table.insertRows(tableRows);\n  }\n\n  _onRowClick(event) {\n    this.triggerLookupRowSelected();\n  }\n\n  /**\n   * This event handler is called before the mousedown handler on the _document_ is triggered\n   * This allows us to prevent the default, which is important for the CellEditorPopup which\n   * should stay open when the SmartField popup is closed. It also prevents the focus blur\n   * event on the SmartField input-field.\n   */\n  _onContainerMouseDown(event) {\n    // when user clicks on proposal popup with table or tree (prevent default,\n    // so input-field does not lose the focus, popup will be closed by the\n    // proposal chooser impl.\n    return false;\n  }\n\n  _isMouseDownOnAnchor(event) {\n    return this.field.$field.isOrHas(event.target);\n  }\n\n  delegateKeyEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this.table.$container.trigger(event);\n  }\n\n  triggerLookupRowSelected(row) {\n    row = row || this.selectedRow();\n    if (!row || !row.enabled) {\n      return;\n    }\n    this.trigger('lookupRowSelected', {\n      lookupRow: row.lookupRow\n    });\n  }\n\n  selectedRow() {\n    return this.table.selectedRow();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}