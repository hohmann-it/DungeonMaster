{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout, graphics, HtmlComponent } from '../index';\nimport $ from 'jquery';\nexport default class FormLayout extends AbstractLayout {\n  constructor(form) {\n    super();\n    this.form = form;\n  }\n  layout($container) {\n    let htmlContainer = HtmlComponent.get($container),\n      htmlRootGb = this._htmlRootGroupBox(),\n      rootGbSize;\n    this.form.validateLogicalGrid();\n    rootGbSize = htmlContainer.availableSize().subtract(htmlContainer.insets()).subtract(htmlRootGb.margins());\n    rootGbSize.height -= this._headerHeight();\n    $.log.isTraceEnabled() && $.log.trace('(FormLayout#layout) rootGbSize=' + rootGbSize);\n    htmlRootGb.setSize(rootGbSize);\n  }\n  preferredLayoutSize($container, options) {\n    options = options || {};\n    let htmlContainer = HtmlComponent.get($container),\n      htmlRootGb = this._htmlRootGroupBox(),\n      prefSize;\n    this.form.validateLogicalGrid();\n    let titleHeight = this._headerHeight();\n    if (options.heightHint) {\n      options.heightHint -= titleHeight;\n    }\n    prefSize = htmlRootGb.prefSize(options).add(htmlContainer.insets()).add(htmlRootGb.margins());\n    prefSize.height += titleHeight;\n    return prefSize;\n  }\n  _htmlRootGroupBox() {\n    let $rootGroupBox = this.form.$container.children('.root-group-box');\n    return HtmlComponent.get($rootGroupBox);\n  }\n  _headerHeight() {\n    if (this.form.$header && this.form.$header.css('position') !== 'absolute') {\n      return graphics.prefSize(this.form.$header, true).height;\n    }\n    return 0;\n  }\n}","map":{"version":3,"names":["AbstractLayout","graphics","HtmlComponent","$","FormLayout","constructor","form","layout","$container","htmlContainer","get","htmlRootGb","_htmlRootGroupBox","rootGbSize","validateLogicalGrid","availableSize","subtract","insets","margins","height","_headerHeight","log","isTraceEnabled","trace","setSize","preferredLayoutSize","options","prefSize","titleHeight","heightHint","add","$rootGroupBox","children","$header","css"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/FormLayout.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout, graphics, HtmlComponent} from '../index';\nimport $ from 'jquery';\n\nexport default class FormLayout extends AbstractLayout {\n\n  constructor(form) {\n    super();\n    this.form = form;\n  }\n\n  layout($container) {\n    let htmlContainer = HtmlComponent.get($container),\n      htmlRootGb = this._htmlRootGroupBox(),\n      rootGbSize;\n\n    this.form.validateLogicalGrid();\n\n    rootGbSize = htmlContainer.availableSize()\n      .subtract(htmlContainer.insets())\n      .subtract(htmlRootGb.margins());\n\n    rootGbSize.height -= this._headerHeight();\n\n    $.log.isTraceEnabled() && $.log.trace('(FormLayout#layout) rootGbSize=' + rootGbSize);\n    htmlRootGb.setSize(rootGbSize);\n  }\n\n  preferredLayoutSize($container, options) {\n    options = options || {};\n    let htmlContainer = HtmlComponent.get($container),\n      htmlRootGb = this._htmlRootGroupBox(),\n      prefSize;\n\n    this.form.validateLogicalGrid();\n\n    let titleHeight = this._headerHeight();\n    if (options.heightHint) {\n      options.heightHint -= titleHeight;\n    }\n    prefSize = htmlRootGb.prefSize(options)\n      .add(htmlContainer.insets())\n      .add(htmlRootGb.margins());\n    prefSize.height += titleHeight;\n\n    return prefSize;\n  }\n\n  _htmlRootGroupBox() {\n    let $rootGroupBox = this.form.$container.children('.root-group-box');\n    return HtmlComponent.get($rootGroupBox);\n  }\n\n  _headerHeight() {\n    if (this.form.$header && this.form.$header.css('position') !== 'absolute') {\n      return graphics.prefSize(this.form.$header, true).height;\n    }\n    return 0;\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,cAAc,EAAEC,QAAQ,EAAEC,aAAa,QAAO,UAAU;AAChE,OAAOC,CAAC,MAAM,QAAQ;AAEtB,eAAe,MAAMC,UAAU,SAASJ,cAAc,CAAC;EAErDK,WAAW,CAACC,IAAI,EAAE;IAChB,KAAK,EAAE;IACP,IAAI,CAACA,IAAI,GAAGA,IAAI;EAClB;EAEAC,MAAM,CAACC,UAAU,EAAE;IACjB,IAAIC,aAAa,GAAGP,aAAa,CAACQ,GAAG,CAACF,UAAU,CAAC;MAC/CG,UAAU,GAAG,IAAI,CAACC,iBAAiB,EAAE;MACrCC,UAAU;IAEZ,IAAI,CAACP,IAAI,CAACQ,mBAAmB,EAAE;IAE/BD,UAAU,GAAGJ,aAAa,CAACM,aAAa,EAAE,CACvCC,QAAQ,CAACP,aAAa,CAACQ,MAAM,EAAE,CAAC,CAChCD,QAAQ,CAACL,UAAU,CAACO,OAAO,EAAE,CAAC;IAEjCL,UAAU,CAACM,MAAM,IAAI,IAAI,CAACC,aAAa,EAAE;IAEzCjB,CAAC,CAACkB,GAAG,CAACC,cAAc,EAAE,IAAInB,CAAC,CAACkB,GAAG,CAACE,KAAK,CAAC,iCAAiC,GAAGV,UAAU,CAAC;IACrFF,UAAU,CAACa,OAAO,CAACX,UAAU,CAAC;EAChC;EAEAY,mBAAmB,CAACjB,UAAU,EAAEkB,OAAO,EAAE;IACvCA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIjB,aAAa,GAAGP,aAAa,CAACQ,GAAG,CAACF,UAAU,CAAC;MAC/CG,UAAU,GAAG,IAAI,CAACC,iBAAiB,EAAE;MACrCe,QAAQ;IAEV,IAAI,CAACrB,IAAI,CAACQ,mBAAmB,EAAE;IAE/B,IAAIc,WAAW,GAAG,IAAI,CAACR,aAAa,EAAE;IACtC,IAAIM,OAAO,CAACG,UAAU,EAAE;MACtBH,OAAO,CAACG,UAAU,IAAID,WAAW;IACnC;IACAD,QAAQ,GAAGhB,UAAU,CAACgB,QAAQ,CAACD,OAAO,CAAC,CACpCI,GAAG,CAACrB,aAAa,CAACQ,MAAM,EAAE,CAAC,CAC3Ba,GAAG,CAACnB,UAAU,CAACO,OAAO,EAAE,CAAC;IAC5BS,QAAQ,CAACR,MAAM,IAAIS,WAAW;IAE9B,OAAOD,QAAQ;EACjB;EAEAf,iBAAiB,GAAG;IAClB,IAAImB,aAAa,GAAG,IAAI,CAACzB,IAAI,CAACE,UAAU,CAACwB,QAAQ,CAAC,iBAAiB,CAAC;IACpE,OAAO9B,aAAa,CAACQ,GAAG,CAACqB,aAAa,CAAC;EACzC;EAEAX,aAAa,GAAG;IACd,IAAI,IAAI,CAACd,IAAI,CAAC2B,OAAO,IAAI,IAAI,CAAC3B,IAAI,CAAC2B,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC,KAAK,UAAU,EAAE;MACzE,OAAOjC,QAAQ,CAAC0B,QAAQ,CAAC,IAAI,CAACrB,IAAI,CAAC2B,OAAO,EAAE,IAAI,CAAC,CAACd,MAAM;IAC1D;IACA,OAAO,CAAC;EACV;AACF"},"metadata":{},"sourceType":"module"}