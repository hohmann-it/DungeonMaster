{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractTableNavigationKeyStroke, arrays, keys } from '../../index';\nexport default class TableNavigationHomeKeyStroke extends AbstractTableNavigationKeyStroke {\n  constructor(table) {\n    super(table);\n    this.which = [keys.HOME];\n    this.renderingHints.text = 'Home';\n    this.renderingHints.$drawingArea = ($drawingArea, event) => {\n      let viewport = this._viewportInfo();\n      if (viewport.firstRow) {\n        return viewport.firstRow.$row;\n      }\n    };\n  }\n  handle(event) {\n    let table = this.field,\n      rows = table.visibleRows,\n      firstRow = arrays.first(rows),\n      selectedRows = table.selectedRows,\n      newSelectedRows = [],\n      lastActionRow = table.selectionHandler.lastActionRow,\n      lastActionRowIndex = -1;\n    if (event.shiftKey && selectedRows.length > 0) {\n      if (lastActionRow) {\n        lastActionRowIndex = rows.indexOf(lastActionRow);\n      }\n      // last action row index maybe < 0 if row got invisible (e.g. due to filtering), or if the user has not made a selection before\n      if (lastActionRowIndex < 0) {\n        lastActionRow = arrays.first(selectedRows);\n        lastActionRowIndex = rows.indexOf(lastActionRow);\n      }\n      newSelectedRows = rows.slice(0, lastActionRowIndex);\n      newSelectedRows = arrays.union(newSelectedRows, selectedRows);\n    } else {\n      newSelectedRows = firstRow;\n    }\n    table.selectionHandler.lastActionRow = firstRow;\n    table.selectRows(newSelectedRows);\n    table.scrollTo(firstRow);\n    if (!table.isFocused()) {\n      table.focus();\n    }\n  }\n}","map":{"version":3,"names":["AbstractTableNavigationKeyStroke","arrays","keys","TableNavigationHomeKeyStroke","constructor","table","which","HOME","renderingHints","text","$drawingArea","event","viewport","_viewportInfo","firstRow","$row","handle","field","rows","visibleRows","first","selectedRows","newSelectedRows","lastActionRow","selectionHandler","lastActionRowIndex","shiftKey","length","indexOf","slice","union","selectRows","scrollTo","isFocused","focus"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/table/keystrokes/TableNavigationHomeKeyStroke.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractTableNavigationKeyStroke, arrays, keys} from '../../index';\n\nexport default class TableNavigationHomeKeyStroke extends AbstractTableNavigationKeyStroke {\n\n  constructor(table) {\n    super(table);\n    this.which = [keys.HOME];\n    this.renderingHints.text = 'Home';\n    this.renderingHints.$drawingArea = ($drawingArea, event) => {\n      let viewport = this._viewportInfo();\n      if (viewport.firstRow) {\n        return viewport.firstRow.$row;\n      }\n    };\n  }\n\n  handle(event) {\n    let table = this.field,\n      rows = table.visibleRows,\n      firstRow = arrays.first(rows),\n      selectedRows = table.selectedRows,\n      newSelectedRows = [],\n      lastActionRow = table.selectionHandler.lastActionRow,\n      lastActionRowIndex = -1;\n\n    if (event.shiftKey && selectedRows.length > 0) {\n      if (lastActionRow) {\n        lastActionRowIndex = rows.indexOf(lastActionRow);\n      }\n      // last action row index maybe < 0 if row got invisible (e.g. due to filtering), or if the user has not made a selection before\n      if (lastActionRowIndex < 0) {\n        lastActionRow = arrays.first(selectedRows);\n        lastActionRowIndex = rows.indexOf(lastActionRow);\n      }\n      newSelectedRows = rows.slice(0, lastActionRowIndex);\n      newSelectedRows = arrays.union(newSelectedRows, selectedRows);\n    } else {\n      newSelectedRows = firstRow;\n    }\n    table.selectionHandler.lastActionRow = firstRow;\n    table.selectRows(newSelectedRows);\n    table.scrollTo(firstRow);\n    if (!table.isFocused()) {\n      table.focus();\n    }\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,gCAAgC,EAAEC,MAAM,EAAEC,IAAI,QAAO,aAAa;AAE1E,eAAe,MAAMC,4BAA4B,SAASH,gCAAgC,CAAC;EAEzFI,WAAW,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG,CAACJ,IAAI,CAACK,IAAI,CAAC;IACxB,IAAI,CAACC,cAAc,CAACC,IAAI,GAAG,MAAM;IACjC,IAAI,CAACD,cAAc,CAACE,YAAY,GAAG,CAACA,YAAY,EAAEC,KAAK,KAAK;MAC1D,IAAIC,QAAQ,GAAG,IAAI,CAACC,aAAa,EAAE;MACnC,IAAID,QAAQ,CAACE,QAAQ,EAAE;QACrB,OAAOF,QAAQ,CAACE,QAAQ,CAACC,IAAI;MAC/B;IACF,CAAC;EACH;EAEAC,MAAM,CAACL,KAAK,EAAE;IACZ,IAAIN,KAAK,GAAG,IAAI,CAACY,KAAK;MACpBC,IAAI,GAAGb,KAAK,CAACc,WAAW;MACxBL,QAAQ,GAAGb,MAAM,CAACmB,KAAK,CAACF,IAAI,CAAC;MAC7BG,YAAY,GAAGhB,KAAK,CAACgB,YAAY;MACjCC,eAAe,GAAG,EAAE;MACpBC,aAAa,GAAGlB,KAAK,CAACmB,gBAAgB,CAACD,aAAa;MACpDE,kBAAkB,GAAG,CAAC,CAAC;IAEzB,IAAId,KAAK,CAACe,QAAQ,IAAIL,YAAY,CAACM,MAAM,GAAG,CAAC,EAAE;MAC7C,IAAIJ,aAAa,EAAE;QACjBE,kBAAkB,GAAGP,IAAI,CAACU,OAAO,CAACL,aAAa,CAAC;MAClD;MACA;MACA,IAAIE,kBAAkB,GAAG,CAAC,EAAE;QAC1BF,aAAa,GAAGtB,MAAM,CAACmB,KAAK,CAACC,YAAY,CAAC;QAC1CI,kBAAkB,GAAGP,IAAI,CAACU,OAAO,CAACL,aAAa,CAAC;MAClD;MACAD,eAAe,GAAGJ,IAAI,CAACW,KAAK,CAAC,CAAC,EAAEJ,kBAAkB,CAAC;MACnDH,eAAe,GAAGrB,MAAM,CAAC6B,KAAK,CAACR,eAAe,EAAED,YAAY,CAAC;IAC/D,CAAC,MAAM;MACLC,eAAe,GAAGR,QAAQ;IAC5B;IACAT,KAAK,CAACmB,gBAAgB,CAACD,aAAa,GAAGT,QAAQ;IAC/CT,KAAK,CAAC0B,UAAU,CAACT,eAAe,CAAC;IACjCjB,KAAK,CAAC2B,QAAQ,CAAClB,QAAQ,CAAC;IACxB,IAAI,CAACT,KAAK,CAAC4B,SAAS,EAAE,EAAE;MACtB5B,KAAK,CAAC6B,KAAK,EAAE;IACf;EACF;AACF"},"metadata":{},"sourceType":"module"}