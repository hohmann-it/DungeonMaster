{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { FocusRule, keys, KeyStrokeContext, scout, Tooltip } from '../index';\nexport default class WidgetTooltip extends Tooltip {\n  constructor() {\n    super();\n    this.$widgetContainer = null;\n    this.widget = null;\n    this._addWidgetProperties(['widget']);\n\n    // Default interceptor that stops the propagation for all key strokes except ESCAPE and ENTER.\n    // Otherwise, the tooltip would be destroyed for all key strokes that bubble up to the\n    // root (see global document listener in Tooltip.js).\n    this.keyStrokeStopPropagationInterceptor = event => {\n      if (scout.isOneOf(event.which, keys.ESC, keys.ENTER)) {\n        return;\n      }\n      event.stopPropagation();\n    };\n    this.withFocusContext = true;\n    this.initialFocus = () => FocusRule.AUTO;\n    this.focusableContainer = false;\n  }\n  _createKeyStrokeContext() {\n    return new KeyStrokeContext();\n  }\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    if (this.keyStrokeStopPropagationInterceptor) {\n      this.keyStrokeContext.registerStopPropagationInterceptor(this.keyStrokeStopPropagationInterceptor);\n    }\n  }\n  _render() {\n    super._render();\n    this.$container.addClass('widget-tooltip');\n    this.$widgetContainer = this.$container.appendDiv('tooltip-widget-container');\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderWidget();\n  }\n  _remove() {\n    this._removeWidget();\n    super._remove();\n  }\n  setWidget(widget) {\n    this.setProperty('widget', widget);\n  }\n  _renderWidget() {\n    if (this.widget) {\n      this.widget.render(this.$widgetContainer);\n      this.widget.$container.addClass('widget');\n      this.widget.pack();\n    }\n    this.$widgetContainer.setVisible(!!this.widget);\n    if (!this.rendering) {\n      this.position();\n    }\n\n    // Focus the widget\n    // It is important that this happens after layouting and positioning, otherwise we'd focus an element\n    // that is currently not on the screen. Which would cause the whole desktop to\n    // be shifted for a few pixels.\n    if (this.withFocusContext && this.widget) {\n      this.session.focusManager.installFocusContext(this.$widgetContainer, this.initialFocus());\n    }\n  }\n  _removeWidget() {\n    if (this.widget) {\n      this.session.focusManager.uninstallFocusContext(this.$widgetContainer);\n      this.widget.remove();\n    }\n  }\n}","map":{"version":3,"names":["FocusRule","keys","KeyStrokeContext","scout","Tooltip","WidgetTooltip","constructor","$widgetContainer","widget","_addWidgetProperties","keyStrokeStopPropagationInterceptor","event","isOneOf","which","ESC","ENTER","stopPropagation","withFocusContext","initialFocus","AUTO","focusableContainer","_createKeyStrokeContext","_initKeyStrokeContext","keyStrokeContext","registerStopPropagationInterceptor","_render","$container","addClass","appendDiv","_renderProperties","_renderWidget","_remove","_removeWidget","setWidget","setProperty","render","pack","setVisible","rendering","position","session","focusManager","installFocusContext","uninstallFocusContext","remove"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/tooltip/WidgetTooltip.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {FocusRule, keys, KeyStrokeContext, scout, Tooltip} from '../index';\n\nexport default class WidgetTooltip extends Tooltip {\n\n  constructor() {\n    super();\n\n    this.$widgetContainer = null;\n    this.widget = null;\n    this._addWidgetProperties(['widget']);\n\n    // Default interceptor that stops the propagation for all key strokes except ESCAPE and ENTER.\n    // Otherwise, the tooltip would be destroyed for all key strokes that bubble up to the\n    // root (see global document listener in Tooltip.js).\n    this.keyStrokeStopPropagationInterceptor = event => {\n      if (scout.isOneOf(event.which, keys.ESC, keys.ENTER)) {\n        return;\n      }\n      event.stopPropagation();\n    };\n\n    this.withFocusContext = true;\n    this.initialFocus = () => FocusRule.AUTO;\n    this.focusableContainer = false;\n  }\n\n  _createKeyStrokeContext() {\n    return new KeyStrokeContext();\n  }\n\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    if (this.keyStrokeStopPropagationInterceptor) {\n      this.keyStrokeContext.registerStopPropagationInterceptor(this.keyStrokeStopPropagationInterceptor);\n    }\n  }\n\n  _render() {\n    super._render();\n    this.$container.addClass('widget-tooltip');\n    this.$widgetContainer = this.$container.appendDiv('tooltip-widget-container');\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderWidget();\n  }\n\n  _remove() {\n    this._removeWidget();\n    super._remove();\n  }\n\n  setWidget(widget) {\n    this.setProperty('widget', widget);\n  }\n\n  _renderWidget() {\n    if (this.widget) {\n      this.widget.render(this.$widgetContainer);\n      this.widget.$container.addClass('widget');\n      this.widget.pack();\n    }\n    this.$widgetContainer.setVisible(!!this.widget);\n    if (!this.rendering) {\n      this.position();\n    }\n\n    // Focus the widget\n    // It is important that this happens after layouting and positioning, otherwise we'd focus an element\n    // that is currently not on the screen. Which would cause the whole desktop to\n    // be shifted for a few pixels.\n    if (this.withFocusContext && this.widget) {\n      this.session.focusManager.installFocusContext(this.$widgetContainer, this.initialFocus());\n    }\n  }\n\n  _removeWidget() {\n    if (this.widget) {\n      this.session.focusManager.uninstallFocusContext(this.$widgetContainer);\n      this.widget.remove();\n    }\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,SAAS,EAAEC,IAAI,EAAEC,gBAAgB,EAAEC,KAAK,EAAEC,OAAO,QAAO,UAAU;AAE1E,eAAe,MAAMC,aAAa,SAASD,OAAO,CAAC;EAEjDE,WAAW,GAAG;IACZ,KAAK,EAAE;IAEP,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,oBAAoB,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAErC;IACA;IACA;IACA,IAAI,CAACC,mCAAmC,GAAGC,KAAK,IAAI;MAClD,IAAIR,KAAK,CAACS,OAAO,CAACD,KAAK,CAACE,KAAK,EAAEZ,IAAI,CAACa,GAAG,EAAEb,IAAI,CAACc,KAAK,CAAC,EAAE;QACpD;MACF;MACAJ,KAAK,CAACK,eAAe,EAAE;IACzB,CAAC;IAED,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,YAAY,GAAG,MAAMlB,SAAS,CAACmB,IAAI;IACxC,IAAI,CAACC,kBAAkB,GAAG,KAAK;EACjC;EAEAC,uBAAuB,GAAG;IACxB,OAAO,IAAInB,gBAAgB,EAAE;EAC/B;EAEAoB,qBAAqB,GAAG;IACtB,KAAK,CAACA,qBAAqB,EAAE;IAC7B,IAAI,IAAI,CAACZ,mCAAmC,EAAE;MAC5C,IAAI,CAACa,gBAAgB,CAACC,kCAAkC,CAAC,IAAI,CAACd,mCAAmC,CAAC;IACpG;EACF;EAEAe,OAAO,GAAG;IACR,KAAK,CAACA,OAAO,EAAE;IACf,IAAI,CAACC,UAAU,CAACC,QAAQ,CAAC,gBAAgB,CAAC;IAC1C,IAAI,CAACpB,gBAAgB,GAAG,IAAI,CAACmB,UAAU,CAACE,SAAS,CAAC,0BAA0B,CAAC;EAC/E;EAEAC,iBAAiB,GAAG;IAClB,KAAK,CAACA,iBAAiB,EAAE;IACzB,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAC,OAAO,GAAG;IACR,IAAI,CAACC,aAAa,EAAE;IACpB,KAAK,CAACD,OAAO,EAAE;EACjB;EAEAE,SAAS,CAACzB,MAAM,EAAE;IAChB,IAAI,CAAC0B,WAAW,CAAC,QAAQ,EAAE1B,MAAM,CAAC;EACpC;EAEAsB,aAAa,GAAG;IACd,IAAI,IAAI,CAACtB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC2B,MAAM,CAAC,IAAI,CAAC5B,gBAAgB,CAAC;MACzC,IAAI,CAACC,MAAM,CAACkB,UAAU,CAACC,QAAQ,CAAC,QAAQ,CAAC;MACzC,IAAI,CAACnB,MAAM,CAAC4B,IAAI,EAAE;IACpB;IACA,IAAI,CAAC7B,gBAAgB,CAAC8B,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC7B,MAAM,CAAC;IAC/C,IAAI,CAAC,IAAI,CAAC8B,SAAS,EAAE;MACnB,IAAI,CAACC,QAAQ,EAAE;IACjB;;IAEA;IACA;IACA;IACA;IACA,IAAI,IAAI,CAACtB,gBAAgB,IAAI,IAAI,CAACT,MAAM,EAAE;MACxC,IAAI,CAACgC,OAAO,CAACC,YAAY,CAACC,mBAAmB,CAAC,IAAI,CAACnC,gBAAgB,EAAE,IAAI,CAACW,YAAY,EAAE,CAAC;IAC3F;EACF;EAEAc,aAAa,GAAG;IACd,IAAI,IAAI,CAACxB,MAAM,EAAE;MACf,IAAI,CAACgC,OAAO,CAACC,YAAY,CAACE,qBAAqB,CAAC,IAAI,CAACpC,gBAAgB,CAAC;MACtE,IAAI,CAACC,MAAM,CAACoC,MAAM,EAAE;IACtB;EACF;AACF"},"metadata":{},"sourceType":"module"}