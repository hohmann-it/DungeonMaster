{"ast":null,"code":"/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n/**\n * jQuery plugin with scout extensions\n */\nimport $ from 'jquery';\nimport { arrays, Device, Dimension, events, IconDesc, icons, objects, scout, strings } from '../index';\n\n/**\n * By using $ in jsdoc all the functions is this file are recognized as part of $.\n * By additionally defining $ as jQuery all default jQuery functions are recognized as well.\n * \"JQuery\" (with a capital J) refers to the the type definitions \"@types/jquery\".\n * @typedef {JQuery|jQuery} $\n */\n\n// === internal methods ===\n\n/**\n * Returns false when the component display is 'none', otherwise true.\n *\n * Note: this gives other results than $.is(':visible'), since that method will also return false\n * when a component has absolute positioning and no width and height is defined (well, you cannot\n * see a component with a style like this, but technically it is not set to 'not visible').\n *\n * Also note that this function _only_ checks the 'display' property! Other methods to make an element\n * invisible to the user ('visibility: hidden', 'opacity: 0', off-screen position etc.) are _not_\n * considered.\n */\nfunction elemVisible(elem) {\n  // Check if element itself is hidden by its own style attribute\n  if (!elem || isHidden(elem.style)) {\n    return false;\n  }\n  // Must use correct window for element / computedStyle\n  let myWindow = (elem instanceof Document ? elem : elem.ownerDocument).defaultView;\n  // In some cases with popup windows the window object may be already set to null\n  // but we still have a valid reference to a DOM element. In that case we assume\n  // the element is not visible anymore.\n  if (!myWindow) {\n    return false;\n  }\n  // Check if element itself is hidden by external style-sheet\n  if (isHidden(myWindow.getComputedStyle(elem))) {\n    return false;\n  }\n  // Else visible\n  return true;\n\n  // ----- Helper functions -----\n\n  function isHidden(style) {\n    return style.display === 'none';\n  }\n}\nfunction explodeShorthandProperties(properties) {\n  let newProperties = [];\n  properties.forEach(prop => {\n    // shorthand css properties may not be copied directly (at least not in firefox) -> copy the actual properties\n    if (prop === 'margin' || prop === 'padding') {\n      newProperties.push(prop + '-top');\n      newProperties.push(prop + '-right');\n      newProperties.push(prop + '-bottom');\n      newProperties.push(prop + '-left');\n    } else if (prop === 'border') {\n      newProperties.push('border-top-style');\n      newProperties.push('border-right-style');\n      newProperties.push('border-bottom-style');\n      newProperties.push('border-left-style');\n      newProperties.push('border-top-color');\n      newProperties.push('border-right-color');\n      newProperties.push('border-bottom-color');\n      newProperties.push('border-left-color');\n      newProperties.push('border-top-width');\n      newProperties.push('border-right-width');\n      newProperties.push('border-bottom-width');\n      newProperties.push('border-left-width');\n    } else {\n      newProperties.push(prop);\n    }\n  });\n  return newProperties;\n}\n\n/**\n * This function is required because most jQuery functions can be used with or without arguments\n * and do return the jQuery instance when used as a setter (with arguments), ceiling should only\n * be done, when used as getter (without arguments).\n */\nfunction _ceilNumber(val) {\n  return objects.isNumber(val) ? Math.ceil(val) : val;\n}\n\n// === $ extensions ===\n\n/* !\n * jQuery UI Widget 1.11.2\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\nconst __origCleanData = $.cleanData;\n/**\n * This function is copied from jQuery UI. It is used to fire a 'remove' event\n * when we call the .remove() function on a jQuery object.\n */\n$.cleanData = elems => {\n  let events, elem, i;\n  for (i = 0; elem = elems[i]; i++) {\n    // NOSONAR\n    try {\n      // Only trigger remove when necessary to save time\n      events = $._data(elem, 'events');\n      if (events && events.remove) {\n        $(elem).triggerHandler('remove');\n      }\n      // http://bugs.jquery.com/ticket/8235\n    } catch (e) {\n      // NOP\n    }\n  }\n  __origCleanData(elems);\n};\n\n/**\n * Used by some animate functions.\n */\n$.removeThis = function () {\n  $(this).remove();\n};\n\n/**\n * Convenience function that can be used as an jQuery event handler, when this\n * event should be \"swallowed\". Technically, this function calls preventDefault(),\n * stopPropagation() and stopImmediatePropagation() on the event.\n *\n * Note: \"return false\" is equal to preventDefault() and stopPropagation(), but\n * not stopImmediatePropagation().\n */\n$.suppressEvent = event => {\n  if (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n  }\n};\n\n/**\n * If the event target is disabled (according to $.fn.isEnabled()), the event is suppressed\n * and the method returns true. Otherwise, false is returned.\n */\n$.suppressEventIfDisabled = (event, $target) => {\n  $target = $target || $(event.target);\n  if (!$target.isEnabled()) {\n    $.suppressEvent(event);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Implements the 'debounce' pattern. The given function fx is executed after a certain delay\n * (in milliseconds), but if the same function is called a second time within the waiting time,\n * depending on the 'reschedule' option, the timer is reset or the second call is ignored.\n * The default value for the 'delay' option is 250 ms.\n *\n * The resulting function has a function member 'cancel' that can be used to clear any scheduled\n * calls to the original function. If no such call was scheduled, cancel() returns false,\n * otherwise true.\n *\n * OPTION         DEFAULT VALUE   DESCRIPTION\n * ------------------------------------------------------------------------------------\n * delay          250             Waiting time in milliseconds before the function is executed.\n *\n * reschedule     true            Defines whether subsequent call to the debounced function\n *                                within the waiting time cause the timer to be reset or not.\n *                                If the reschedule option is 'false', subsequent calls within\n *                                the waiting time will just be ignored.\n *\n * @param fx\n *          the function to wrap\n * @param [options]\n *          an optional options object (see table above). Short-hand version: If a number is passed instead\n *          of an object, the value is automatically converted to the option 'delay'.\n */\n$.debounce = (fx, options) => {\n  if (typeof options === 'number') {\n    options = {\n      delay: options\n    };\n  }\n  options = $.extend({\n    delay: 250,\n    reschedule: true\n  }, options);\n  let timeoutId = null;\n  let fn = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    let that = this;\n    if (timeoutId && !options.reschedule) {\n      // Function is already schedule but 'reschedule' option is set to false --> discard this request\n      return;\n    }\n    if (timeoutId) {\n      // Function is already scheduled --> cancel current scheduled call and re-schedule the call\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      timeoutId = null;\n      fx.apply(that, args);\n    }, options.delay);\n  };\n  fn.cancel = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      return true;\n    }\n    return false;\n  };\n  return fn;\n};\n\n/**\n * Executes the given function. Further calls to the same function are delayed by the given delay\n * (default 250ms). This is similar to $.debounce() but ensures that function is called at least\n * every 'delay' milliseconds. Can be useful to prevent too many function calls, e.g. from UI events.\n */\n$.throttle = (fx, delay) => {\n  delay = delay !== undefined ? delay : 250;\n  let timeoutId = null;\n  let lastExecution;\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    let that = this;\n    let now = new Date().getTime();\n    let callFx = () => {\n      lastExecution = now;\n      fx.apply(that, args);\n    };\n    if (lastExecution && lastExecution + delay > now) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        callFx();\n      }, delay);\n    } else {\n      callFx();\n    }\n  };\n};\n\n/**\n * Returns a function which negates the return value of the given function when called.\n */\n$.negate = fx => function () {\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n  return !fx.apply(this, args);\n};\n\n/**\n * color calculation\n */\n$.colorOpacity = (hex, opacity) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, '');\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  opacity = opacity || 0;\n\n  // convert to decimal and change luminosity\n  let rgb = '#';\n  for (let i = 0; i < 3; i++) {\n    let c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, 255 - (255 - c) * opacity), 255)).toString(16);\n    rgb += ('00' + c).substr(c.length);\n  }\n  return rgb;\n};\n\n/**\n * CSP-safe method to dynamically load and execute a script from server.\n *\n * A new <script> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new script tag is passed to the promise's\n * callback functions.\n *\n *   $.injectScript('http://server/path/script.js')\n *     .done(function($scriptTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the script to.\n *\n * removeTag         false               Whether to remove the script tag again from the DOM\n *                                       after the script has been loaded.\n */\n$.injectScript = (url, options) => {\n  options = options || {};\n  let deferred = $.Deferred();\n  let myDocument = options.document || window.document;\n  let linkTag = myDocument.createElement('script');\n  $(linkTag).attr('src', url).attr('async', true).on('load error', event => {\n    if (options.removeTag) {\n      myDocument.head.removeChild(linkTag);\n    }\n    if (event.type === 'error') {\n      deferred.reject($(linkTag));\n    } else {\n      deferred.resolve($(linkTag));\n    }\n  });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n  return deferred.promise();\n};\n\n/**\n * CSP-safe method to dynamically load a style sheet from server.\n *\n * A new <link> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new link tag is passed to the promise's\n * callback functions.\n *\n *   $.injectStyleSheet('http://server/path/style.css')\n *     .done(function($linkTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style sheet to.\n */\n$.injectStyleSheet = (url, options) => {\n  options = options || {};\n  let deferred = $.Deferred();\n  let myDocument = options.document || window.document;\n  let linkTag = myDocument.createElement('link');\n  $(linkTag).attr('rel', 'stylesheet').attr('type', 'text/css').attr('href', url).on('load error', event => {\n    if (event.type === 'error') {\n      deferred.reject($(linkTag));\n    } else {\n      deferred.resolve($(linkTag));\n    }\n  });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n  return deferred.promise();\n};\n\n/**\n * Dynamically adds styles to the document.\n *\n * A new <style> tag is added to the document's head element. The methods returns\n * a jQuery object referring to the new style tag.\n *\n *   $styleTag = $.injectStyle('p { text-color: orange; }');\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style to.\n */\n$.injectStyle = (data, options) => {\n  options = options || {};\n  let myDocument = options.document || window.document;\n  let styleTag = myDocument.createElement('style');\n  let $styleTag = $(styleTag);\n  $styleTag.attr('type', 'text/css').html(data);\n  myDocument.head.appendChild(styleTag);\n  return $styleTag;\n};\n$.pxToNumber = pixel => {\n  if (!pixel) {\n    // parseFloat would return NaN if pixel is '' or undefined\n    return 0;\n  }\n  // parseFloat ignores 'px' and just extracts the number\n  return parseFloat(pixel);\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]);</code>\n *\n * @param {object[]} [args] of this function are passed to the resolve function of the deferred\n * @returns {$.Deferred} a deferred for an already resolved jQuery.Deferred object.\n */\n$.resolvedDeferred = function () {\n  let deferred = $.Deferred();\n  deferred.resolve(...arguments);\n  return deferred;\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]).promise();</code>\n *\n * @param {...*} [args] of this function are passed to the resolve function of the deferred\n * @returns {Promise} a promise for an already resolved jQuery.Deferred object.\n */\n$.resolvedPromise = function () {\n  let deferred = $.Deferred();\n  deferred.resolve(...arguments);\n  return deferred.promise();\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().reject([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the reject function of the deferred\n * @returns {Promise} a promise for an already rejected jQuery.Deferred object.\n */\n$.rejectedPromise = function () {\n  let deferred = $.Deferred();\n  deferred.reject(...arguments);\n  return deferred.promise();\n};\n\n/**\n * Creates a new promise which resolves when all promises resolve and fails when the first promise fails.\n *\n * @param {boolean} [asArray] (optional) when set to true, the resolve function will transform the\n *    flat arguments list containing the results into an array. The arguments of the reject function won't be touched. Default is false.\n */\n$.promiseAll = (promises, asArray) => {\n  asArray = scout.nvl(asArray, false);\n  promises = arrays.ensure(promises);\n  let deferred = $.Deferred();\n  $.when(...promises).done(function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    if (asArray) {\n      deferred.resolve(args);\n    } else {\n      deferred.resolve(...args);\n    }\n  }).fail(function () {\n    deferred.reject(...arguments);\n  });\n  return deferred.promise();\n};\n\n/**\n * Shorthand for an AJAX request for a JSON file with UTF8 encoding.\n * Errors are caught and converted to a rejected promise with the following\n * arguments: jqXHR, textStatus, errorThrown, requestOptions.\n *\n * @returns a promise from JQuery function $.ajax\n */\n$.ajaxJson = url => $.ajax({\n  url: url,\n  dataType: 'json',\n  contentType: 'application/json; charset=UTF-8'\n}).catch(function () {\n  for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    args[_key5] = arguments[_key5];\n  }\n  // Reject the promise with usual arguments (jqXHR, textStatus, errorThrown), but add the request\n  // options as additional argument (e.g. to make the URL available to the error handler)\n  args.push(this);\n  return $.rejectedPromise(...args);\n});\n\n/**\n * Ensures the given parameter is a jQuery object.<p>\n * If it is a jQuery object, it will be returned as it is.\n * If it isn't, it will be passed to $() in order to create one.\n * <p>\n * Just using $() on an existing jQuery object would clone it which would work but is unnecessary.\n * @returns $\n */\n$.ensure = $elem => {\n  if ($elem instanceof $) {\n    return $elem;\n  }\n  return $($elem);\n};\n\n/**\n * Helper function to determine if an object is of type \"jqXHR\" (http://api.jquery.com/jQuery.ajax/#jqXHR)\n */\n$.isJqXHR = obj => typeof obj === 'object' && obj.hasOwnProperty('readyState') && obj.hasOwnProperty('status') && obj.hasOwnProperty('statusText');\n\n// === $.prototype extensions ===\n\n$.fn.nvl = function ($element) {\n  if (this.length || !($element instanceof $)) {\n    return this;\n  }\n  return $element;\n};\n\n/**\n * @param element string. Example = &lt;input&gt;\n * @param cssClass (optional) class attribute\n * @param text (optional) adds a child text-node with given text (no HTML content)\n */\n$.fn.makeElement = function (element, cssClass, text) {\n  let myDocument = this.document(true);\n  if (myDocument === undefined || element === undefined) {\n    return new Error('missing arguments: document, element');\n  }\n  let $element = $(element, myDocument);\n  if (cssClass) {\n    $element.addClass(cssClass);\n  }\n  if (text) {\n    $element.text(text);\n  }\n  return $element;\n};\n\n/**\n * Creates a DIV element in the current document.\n *\n * @param cssClass (optional) string added to the 'class' attribute\n * @param text (optional) string used as inner text\n */\n$.fn.makeDiv = function (cssClass, text) {\n  return this.makeElement('<div>', cssClass, text);\n};\n$.fn.makeSpan = function (cssClass, text) {\n  return this.makeElement('<span>', cssClass, text);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {Document} document reference (ownerDocument) of the HTML element.\n */\n$.fn.document = function (domElement) {\n  let myDocument = this.length ? this[0] instanceof Document ? this[0] : this[0].ownerDocument : null;\n  return domElement ? myDocument : $(myDocument);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {Window|$} window reference (defaultView) of the HTML element\n */\n$.fn.window = function (domElement) {\n  let myDocument = this.document(true),\n    myWindow = myDocument ? myDocument.defaultView : null;\n  return domElement ? myWindow : $(myWindow);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the active element of the current document\n */\n$.fn.activeElement = function (domElement) {\n  let myDocument = this.document(true),\n    activeElement = myDocument ? myDocument.activeElement : null;\n  return domElement ? activeElement : $(activeElement);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the BODY element of the HTML document in which the current HTML element is placed.\n */\n$.fn.body = function (domElement) {\n  let $body = $('body', this.document(true));\n  return domElement ? $body[0] : $body;\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the closest DOM element that has the 'scout' class.\n */\n$.fn.entryPoint = function (domElement) {\n  let $element = this.closest('.scout');\n  return domElement ? $element[0] : $element;\n};\n\n/**\n * @returns {Dimension} size of the window (width and height)\n */\n$.fn.windowSize = function () {\n  let $window = this.window();\n  return new Dimension($window.width(), $window.height());\n};\n\n/**\n * Returns the element at the given point considering only child elements and elements matching the selector, if specified.\n */\n$.fn.elementFromPoint = function (x, y, selector) {\n  let $container = $(this),\n    doc = $container.document(true),\n    elements = [],\n    i = 0,\n    $element;\n  if (!doc) {\n    // If doc is null the $container itself is the document\n    doc = $container[0];\n  }\n  if (!doc) {\n    // If doc is still null (e.g. because the current jQuery collection does not contain any elements) return an empty collection\n    return $();\n  }\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    $element = $(doc.elementFromPoint(x, y));\n    if ($element.length === 0 || $element[0] === doc.documentElement) {\n      break;\n    }\n    if ($container.isOrHas($element) && (!selector || $element.is(selector))) {\n      break;\n    }\n    elements.push($element);\n    // make the element invisible to get the underlying element (uses visibility: hidden to make sure element size and position won't be changed)\n    $element.addClass('invisible');\n    i++;\n    if (i > 1000) {\n      $.log.warn('Infinite loop aborted', $element);\n      $element = $();\n      break;\n    }\n  }\n  if ($element[0] === doc.documentElement && $container[0] !== doc) {\n    // return an empty element if the only element found is the document element and the document element is not the container\n    $element = $();\n  }\n  elements.forEach($element => {\n    // show element again\n    $element.removeClass('invisible');\n  });\n  return $element;\n};\n\n// prepend - and return new div for chaining\n$.fn.prependDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).prependTo(this);\n};\n\n// append - and return new div for chaining\n$.fn.appendDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).appendTo(this);\n};\n$.fn.prependElement = function (element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).prependTo(this);\n};\n$.fn.appendElement = function (element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).appendTo(this);\n};\n\n// insert after - and return new div for chaining\n$.fn.afterDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).insertAfter(this);\n};\n\n// insert before - and return new div for chaining\n$.fn.beforeDiv = function (cssClass, text) {\n  return this.makeDiv(cssClass, text).insertBefore(this);\n};\n$.fn.appendSpan = function (cssClass, text) {\n  return this.makeSpan(cssClass, text).appendTo(this);\n};\n$.fn.appendBr = function (cssClass) {\n  return this.makeElement('<br>', cssClass).appendTo(this);\n};\n$.fn.appendTextNode = function (text) {\n  return $(this.document(true).createTextNode(text)).appendTo(this);\n};\n\n/**\n * @param {IconDesc|string} iconId\n */\n$.fn.appendIcon = function (iconId, cssClass) {\n  if (!iconId) {\n    return this.appendSpan(cssClass).addClass('icon');\n  }\n  let icon;\n  if (iconId instanceof IconDesc) {\n    icon = iconId;\n  } else {\n    icon = icons.parseIconId(iconId);\n  }\n  if (icon.isFontIcon()) {\n    return this.makeSpan(cssClass, icon.iconCharacter).addClass('icon').addClass(icon.appendCssClass('font-icon')).appendTo(this);\n  }\n  return this.appendImg(icon.iconUrl, cssClass).addClass('icon image-icon');\n};\n$.fn.appendImg = function (imageSrc, cssClass) {\n  let $icon = this.appendElement('<img>', cssClass);\n  if (imageSrc) {\n    $icon.attr('src', imageSrc);\n  }\n  return $icon;\n};\n$.fn.makeSVG = function (type, cssClass, text, id) {\n  let myDocument = this.document(true);\n  if (myDocument === undefined || type === undefined) {\n    return new Error('missing arguments: document, type');\n  }\n  let $svg = $(myDocument.createElementNS('http://www.w3.org/2000/svg', type));\n  if (cssClass) {\n    $svg.attr('class', cssClass);\n  }\n  if (text) {\n    $svg.text(text);\n  }\n  if (id !== undefined) {\n    $svg.attr('id', id);\n  }\n  return $svg;\n};\n\n// append SVG\n$.fn.appendSVG = function (type, cssClass, text, id) {\n  return this.makeSVG(type, cssClass, text, id).appendTo(this);\n};\n$.fn.attrXLINK = function (attributeName, value) {\n  if (this.length === 0) {\n    // shortcut for empty collections\n    return this;\n  }\n  if (this.length === 1) {\n    // shortcut for single element collections\n    this[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n    return this;\n  }\n  return this.each(function () {\n    this.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n  });\n};\n\n/**\n * This function adds a device specific CSS class to the current element.\n * The current implementation adds a class 'ios' if it is an ios device.\n */\n$.fn.addDeviceClass = function () {\n  let device = Device.get();\n  if (device.isIos()) {\n    this.addClass('ios');\n  }\n  return this;\n};\n\n// select one and deselect siblings\n$.fn.selectOne = function () {\n  this.siblings().removeClass('selected');\n  this.addClass('selected');\n  return this;\n};\n$.fn.select = function (selected) {\n  return this.toggleClass('selected', !!selected);\n};\n$.fn.isSelected = function () {\n  return this.hasClass('selected');\n};\n$.fn.setEnabled = function (enabled) {\n  enabled = !!enabled;\n  this.toggleClass('disabled', !enabled);\n  // Toggle disabled attribute for elements that support it (see http://www.w3.org/TR/html5/disabled-elements.html)\n  if (this.is('button, input, select, textarea, optgroup, option, fieldset')) {\n    this.toggleAttr('disabled', !enabled);\n  }\n  this.trigger(enabled ? 'enable' : 'disable');\n  return this;\n};\n$.fn.isEnabled = function () {\n  return !this.hasClass('disabled');\n};\n$.fn.setVisible = function (visible) {\n  let isVisible = !this.hasClass('hidden');\n  if (isVisible === visible) {\n    return this;\n  }\n  if (!visible) {\n    this.addClass('hidden');\n    this.trigger('hide');\n  } else {\n    this.removeClass('hidden');\n    this.trigger('show');\n  }\n  return this;\n};\n$.fn.isDisplayNone = function () {\n  return this.css('display') === 'none';\n};\n\n/**\n * @param {boolean} tabbable true, to make the component tabbable. False, to make it neither tabbable nor focusable.\n * @returns {$}\n */\n$.fn.setTabbable = function (tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : null);\n};\n\n/**\n * @param {boolean} tabbable true, to make the component tabbable. False, to make it not tabbable but focusable, so the user can focus it with the mouse but not with the keyboard.\n * @returns {$}\n */\n$.fn.setTabbableOrFocusable = function (tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : -1);\n};\n$.fn.isTabbable = function () {\n  return this.attr('tabIndex') >= 0;\n};\n\n/**\n * @param {string} iconId\n * @param {function} [addToDomFunc] optional function which is used to add the new icon element to the DOM\n *     When not set, this.prepend($icon) is called.\n * @returns {$}\n * @see Icon as an alternative\n */\n$.fn.icon = function (iconId, addToDomFunc) {\n  let icon,\n    $icon = this.data('$icon');\n  if (iconId) {\n    icon = icons.parseIconId(iconId);\n    if (icon.isFontIcon()) {\n      getOrCreateIconElement.call(this, $icon, '<span>', addToDomFunc).addClass('icon').addClass(icon.appendCssClass('font-icon')).text(icon.iconCharacter);\n    } else {\n      getOrCreateIconElement.call(this, $icon, '<img>', addToDomFunc).attr('src', icon.iconUrl).addClass('icon image-icon');\n    }\n  } else {\n    removeIconElement.call(this, $icon);\n  }\n  return this;\n\n  // ----- Helper functions -----\n\n  function getOrCreateIconElement($icon, newElement, addToDomFunc) {\n    // If element type does not match existing element, remove the existing element (e.g. when changing from font-icon to picture icon)\n    if ($icon && !$icon.is(newElement.replace(/[<>]/g, ''))) {\n      removeIconElement.call(this, $icon);\n      $icon = null;\n    }\n    // Create new element if necessary\n    if (!$icon) {\n      $icon = $(newElement);\n      this.data('$icon', $icon);\n      if (!addToDomFunc) {\n        this.prepend($icon);\n      } else {\n        addToDomFunc.call(this, $icon);\n      }\n    }\n    return $icon;\n  }\n  function removeIconElement($icon) {\n    if ($icon) {\n      $icon.remove();\n    }\n    this.removeData('$icon');\n  }\n};\n$.fn.placeholder = function (placeholder) {\n  return this.toggleAttr('placeholder', !!placeholder, placeholder);\n};\n$.fn.isVisible = function () {\n  if (this.hasClass('hidden')) {\n    return false;\n  }\n  return elemVisible(this[0]);\n};\n$.fn.isEveryParentVisible = function () {\n  let everyParentVisible = true;\n  this.parents().each(function () {\n    if (!$(this).isVisible()) {\n      everyParentVisible = false;\n      return false;\n    }\n  });\n  return everyParentVisible;\n};\n\n/**\n * @return {boolean} true if the element is attached (= is in the dom tree), false if not\n */\n$.fn.isAttached = function () {\n  return $.contains(this.document(true).documentElement, this[0]);\n};\n\n/**\n * @returns {$} the current element if it is scrollable, otherwise the first parent which is scrollable\n */\n$.fn.scrollParent = function () {\n  let $elem = this;\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      return $elem;\n    }\n    $elem = $elem.parent();\n  }\n  return $();\n};\n\n/**\n * Returns every parent which is scrollable\n */\n$.fn.scrollParents = function () {\n  let $scrollParents = $(),\n    $elem = this;\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      $scrollParents.push($elem);\n    }\n    $elem = $elem.parent();\n  }\n  return $scrollParents;\n};\n\n/**\n * Similar to closest() but with a predicate function and the ability to stop at a given element.\n * @param {function} predicate the search predicate\n * @param {$} [$stop] If provided, the search is done until this element is reached.\n * @returns {$}\n */\n$.fn.findUp = function (predicate, $stop) {\n  let $elem = $(this);\n  while ($elem.length > 0) {\n    if (predicate($elem)) {\n      return $elem;\n    }\n    if ($stop && $elem[0] === $stop[0]) {\n      return $();\n    }\n    $elem = $elem.parent();\n  }\n  return $();\n};\n\n// most used animate\n$.fn.animateAVCSD = function (attr, value, complete, step, duration) {\n  let properties = {};\n  let options = {};\n  properties[attr] = value;\n  if (complete) {\n    options.complete = complete;\n  }\n  if (step) {\n    options.step = step;\n  }\n  if (duration) {\n    options.duration = duration;\n  }\n  options.queue = false;\n  this.animate(properties, options);\n  return this;\n};\n\n// SVG animate, array contains attr, endValue + startValue\n$.fn.animateSVG = function (attr, endValue, duration, complete, withoutTabIndex) {\n  return this.each(function () {\n    let startValue = parseFloat($(this).attr(attr));\n    if (withoutTabIndex) {\n      let oldComplete = complete;\n      complete = function () {\n        if (oldComplete) {\n          oldComplete.call(this);\n        }\n        $(this).removeAttr('tabindex');\n      };\n    }\n    $(this).animate({\n      tabIndex: 0\n    }, {\n      step: function (now, fx) {\n        this.setAttribute(attr, startValue + (endValue - startValue) * fx.pos);\n      },\n      duration: duration,\n      complete: complete,\n      queue: false\n    });\n  });\n};\n$.fn.addClassForAnimation = function (className, options) {\n  let defaultOptions = {\n    classesToRemove: className\n  };\n  options = $.extend({}, defaultOptions, options);\n  this.addClass(className);\n  this.oneAnimationEnd(event => {\n    // remove class, otherwise animation will be executed each time the element changes it's visibility (attach/rerender),\n    // and even each time when the css classes change\n    this.removeClass(options.classesToRemove);\n  });\n  return this;\n};\n\n/**\n * Adds a handler that is executed when a CSS animation ends on the current element. It will be executed\n * only once when the 'animationend' event is triggered on the current element. Bubbling events from child\n * elements are ignored.\n *\n * @param {function} handler - A function to execute when the 'animationend' event is triggered\n * @return {$}\n */\n$.fn.oneAnimationEnd = function (handler) {\n  if (!handler) {\n    return this;\n  }\n  let oneHandler = event => {\n    if (event.target !== this[0]) {\n      // Ignore events that bubble up from child elements\n      return;\n    }\n    // Unregister listener to implement \"one\" semantics\n    this.off('animationend webkitAnimationEnd', oneHandler);\n    // Notify actual event handler\n    handler(event);\n  };\n  return this.on('animationend webkitAnimationEnd', oneHandler);\n};\n$.fn.hasAnimationClass = function () {\n  // matches any CSS class that starts with 'animate-'\n  return /(^|\\s)animate-/.test(this.attr('class'));\n};\n\n/**\n * Animates from old to new width\n */\n$.fn.cssWidthAnimated = function (oldWidth, newWidth, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old width first\n  this.cssWidth(oldWidth);\n\n  // Then animate to new width\n  this.animate({\n    width: newWidth\n  }, opts);\n  return this;\n};\n$.fn.cssHeightAnimated = function (oldHeight, newHeight, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old height first\n  this.cssHeight(oldHeight);\n\n  // Then animate to new height\n  this.animate({\n    height: newHeight\n  }, opts);\n  return this;\n};\n$.fn.cssLeftAnimated = function (from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssLeft(from);\n\n  // Then animate to new width\n  this.animate({\n    left: to\n  }, opts);\n  return this;\n};\n$.fn.cssTopAnimated = function (from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssTop(from);\n\n  // Then animate to new pos\n  this.animate({\n    top: to\n  }, opts);\n  return this;\n};\n$.fn.cssAnimated = function (fromVals, toVals, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.css(fromVals);\n\n  // Then animate to new pos\n  this.animate(toVals, opts);\n  return this;\n};\n\n// over engineered animate\n$.fn.widthToContent = function (opts) {\n  let oldW = this.outerWidth(),\n    newW = this.css('width', 'auto').outerWidth();\n  this.cssWidthAnimated(oldW, newW, opts);\n  return this;\n};\n\n/**\n * Offset to a specific ancestor and not to the document as offset() would do.\n * Not the same as position() which returns the position relative to the offset parent.\n */\n$.fn.offsetTo = function ($to) {\n  let toOffset = $to.offset(),\n    offset = this.offset();\n  return {\n    top: offset.top - toOffset.top,\n    left: offset.left - toOffset.left\n  };\n};\n$.fn.cssPxValue = function (prop, value) {\n  if (value === undefined) {\n    return $.pxToNumber(this.css(prop));\n  }\n  if (value === null) {\n    value = ''; // \"null\" should also remove the CSS property\n  }\n\n  if (typeof value === 'string') {\n    return this.css(prop, value);\n  }\n  return this.css(prop, value + 'px');\n};\n$.fn.cssLeft = function (position) {\n  return this.cssPxValue('left', position);\n};\n$.fn.cssTop = function (position) {\n  return this.cssPxValue('top', position);\n};\n\n/**\n * Sets the CSS properties 'left' and 'top' based on the x and y properties of the given point instance.\n *\n * @param {Point} point\n */\n$.fn.cssPosition = function (point) {\n  return this.cssLeft(point.x).cssTop(point.y);\n};\n$.fn.cssBottom = function (position) {\n  return this.cssPxValue('bottom', position);\n};\n$.fn.cssRight = function (position) {\n  return this.cssPxValue('right', position);\n};\n$.fn.cssWidth = function (width) {\n  return this.cssPxValue('width', width);\n};\n$.fn.cssMinWidth = function (minWidth) {\n  if (minWidth === undefined) {\n    let value = this.css('min-width');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-width', minWidth);\n};\n\n/**\n * @returns {number} the max-width as number. If max-width is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxWidth = function (maxWidth) {\n  if (maxWidth === undefined) {\n    let value = this.css('max-width');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-width', maxWidth);\n};\n$.fn.cssHeight = function (height) {\n  return this.cssPxValue('height', height);\n};\n$.fn.cssMinHeight = function (minHeight) {\n  if (minHeight === undefined) {\n    let value = this.css('min-height');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-height', minHeight);\n};\n\n/**\n * @returns {number} the max-height as number. If max-height is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxHeight = function (maxHeight) {\n  if (maxHeight === undefined) {\n    let value = this.css('max-height');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-height', maxHeight);\n};\n$.fn.cssLineHeight = function (height) {\n  return this.cssPxValue('line-height', height);\n};\n$.fn.cssMarginLeft = function (value) {\n  return this.cssPxValue('margin-left', value);\n};\n$.fn.cssMarginBottom = function (value) {\n  return this.cssPxValue('margin-bottom', value);\n};\n$.fn.cssMarginRight = function (value) {\n  return this.cssPxValue('margin-right', value);\n};\n$.fn.cssMarginTop = function (value) {\n  return this.cssPxValue('margin-top', value);\n};\n$.fn.cssMarginX = function (value) {\n  if (value === undefined) {\n    return this.cssMarginLeft() + this.cssMarginRight();\n  }\n  this.cssMarginLeft(value);\n  this.cssMarginRight(value);\n  return this;\n};\n$.fn.cssMarginY = function (value) {\n  if (value === undefined) {\n    return this.cssMarginTop() + this.cssMarginBottom();\n  }\n  this.cssMarginTop(value);\n  this.cssMarginBottom(value);\n  return this;\n};\n$.fn.cssPaddingTop = function (value) {\n  return this.cssPxValue('padding-top', value);\n};\n$.fn.cssPaddingRight = function (value) {\n  return this.cssPxValue('padding-right', value);\n};\n$.fn.cssPaddingBottom = function (value) {\n  return this.cssPxValue('padding-bottom', value);\n};\n$.fn.cssPaddingLeft = function (value) {\n  return this.cssPxValue('padding-left', value);\n};\n$.fn.cssPaddingX = function (value) {\n  if (value === undefined) {\n    return this.cssPaddingLeft() + this.cssPaddingRight();\n  }\n  this.cssPaddingLeft(value);\n  this.cssPaddingRight(value);\n  return this;\n};\n$.fn.cssPaddingY = function (value) {\n  if (value === undefined) {\n    return this.cssPaddingTop() + this.cssPaddingBottom();\n  }\n  this.cssPaddingTop(value);\n  this.cssPaddingBottom(value);\n  return this;\n};\n$.fn.cssBorderBottomWidth = function (value) {\n  return this.cssPxValue('border-bottom-width', value);\n};\n$.fn.cssBorderLeftWidth = function (value) {\n  return this.cssPxValue('border-left-width', value);\n};\n$.fn.cssBorderRightWidth = function (value) {\n  return this.cssPxValue('border-right-width', value);\n};\n$.fn.cssBorderTopWidth = function (value) {\n  return this.cssPxValue('border-top-width', value);\n};\n$.fn.cssBorderWidthY = function (value) {\n  if (value === undefined) {\n    return this.cssBorderTopWidth() + this.cssBorderBottomWidth();\n  }\n  this.cssBorderTopWidth(value);\n  return this.cssBorderBottomWidth(value);\n};\n$.fn.cssBorderWidthX = function (value) {\n  if (value === undefined) {\n    return this.cssBorderLeftWidth() + this.cssBorderRightWidth();\n  }\n  this.cssBorderLeftWidth(value);\n  return this.cssBorderRightWidth(value);\n};\n\n/**\n * Bottom of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerBottom = function () {\n  return this.position().top + this.outerHeight(true) - this.cssMarginBottom() - this.cssBorderBottomWidth();\n};\n\n/**\n * Right of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerRight = function () {\n  return this.position().left + this.outerWidth(true) - this.cssMarginRight() - this.cssBorderRightWidth();\n};\n$.fn.copyCss = function ($origin, props) {\n  let properties = props.split(' ');\n  let $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(prop => {\n    $this.css(prop, $origin.css(prop));\n  });\n  return $this;\n};\n$.fn.copyCssIfGreater = function ($origin, props) {\n  let properties = props.split(' ');\n  let $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(prop => {\n    let originValue = $.pxToNumber($origin.css(prop));\n    let thisValue = $.pxToNumber($this.css(prop));\n    if (originValue > thisValue) {\n      $this.css(prop, originValue + 'px');\n    }\n  });\n  return $this;\n};\n$.fn.copyCssClasses = function ($other, classString) {\n  let classes = classString.split(' ');\n  let $this = this;\n  classes.forEach(cssClass => {\n    if ($other.hasClass(cssClass)) {\n      $this.addClass(cssClass);\n    }\n  });\n  return $this;\n};\n$.fn.disableSpellcheck = function () {\n  return this.attr('spellcheck', false);\n};\n\n/**\n * Returns whether the current element is the given element or has a child which is the given element.\n */\n$.fn.isOrHas = function (elem) {\n  if (elem instanceof $) {\n    elem = elem[0];\n  }\n  return this[0] === elem || this.has(elem).length > 0;\n};\n\n/**\n * Makes the current element resizable, which means DIVs for resize-handling are added to the DOM\n * in the E, SE and S of the element. This is primarily useful for (modal) dialogs.\n */\n$.fn.resizable = function (model) {\n  let $this = $(this);\n  let resizable = $this.data('resizable');\n  if (resizable) {\n    // Already resizable\n    return this;\n  }\n  resizable = scout.create('Resizable', $.extend(model, {\n    $container: $this\n  }));\n  $this.data('resizable', resizable);\n  return this;\n};\n\n/**\n * Removes the resize handles and event handlers in order to make the element un resizable again.\n */\n$.fn.unresizable = function () {\n  let $this = $(this);\n  let resizable = $this.data('resizable');\n  if (resizable) {\n    resizable.destroy();\n    $this.removeData('resizable');\n  }\n  return this;\n};\n\n/**\n * Makes any element movable with the mouse. If the argument '$handle' is missing, the entire\n * element can be used as a handle.\n *\n * A callback function can be passed as second argument (optional). The function is called for\n * every change of the draggable's position with an object as argument:\n * { top: (top pixels), left: (left pixels) }\n */\n$.fn.draggable = function ($handle, callback) {\n  let $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.on('mousedown.draggable', event => {\n    $('iframe').addClass('dragging-in-progress');\n    let orig_offset = $draggable.offset();\n    let orig_event = event;\n    let handleWidth = $handle.width();\n    let windowWidth = $handle.window().width();\n    let windowHeight = $handle.window().height();\n    $handle.parents().on('mousemove.dragging', event => {\n      let top = orig_offset.top + (event.pageY - orig_event.pageY);\n      let left = orig_offset.left + (event.pageX - orig_event.pageX);\n      // do not drop outside of viewport (and leave a margin of 100 pixels)\n      left = Math.max(100 - handleWidth, left);\n      left = Math.min(windowWidth - 100, left);\n      top = Math.max(0, top); // must not be dragged outside of top, otherwise dragging back is impossible\n      top = Math.min(windowHeight - 100, top);\n      let newOffset = {\n        top: top,\n        left: left\n      };\n      $draggable.offset(newOffset);\n      callback && callback(newOffset);\n    }).on('mouseup.dragging', e => {\n      $handle.parents().off('.dragging');\n      $('iframe').removeClass('dragging-in-progress');\n    });\n    event.preventDefault();\n  });\n};\n\n/**\n *\n * Removes the mouse down handler which was added by draggable() in order to make it un draggable again.\n */\n$.fn.undraggable = function ($handle) {\n  let $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.off('mousedown.draggable');\n};\n\n/**\n * Calls jQuery.fadeOut() and then removes the element from the DOM.\n * Default fade-out duration is 150 ms.\n */\n$.fn.fadeOutAndRemove = function (duration, callback) {\n  if (callback === undefined && typeof duration === 'function') {\n    callback = duration;\n    duration = undefined;\n  }\n  duration = scout.nvl(duration, 150);\n  return this.stop(true).fadeOut(duration, function () {\n    $(this).remove();\n    if (callback) {\n      callback.call(this);\n    }\n  });\n};\n$.fn.removeAnimated = function (cssClass, callback) {\n  if (callback === undefined && typeof cssClass === 'function') {\n    callback = cssClass;\n    cssClass = undefined;\n  }\n  if (this.isDisplayNone()) {\n    // Remove without animation\n    this.remove();\n    callback && callback.call(this);\n  } else if (!Device.get().supportsCssAnimation()) {\n    // Cannot remove animated, remove with jQuery.fadeOut()\n    this.fadeOutAndRemove(callback);\n  } else {\n    // Add CSS class and wait for 'animationend' event\n    this.addClass(cssClass || 'animate-remove');\n    this.oneAnimationEnd(function () {\n      $(this).remove();\n      callback && callback.call(this);\n    });\n  }\n};\nconst __origHide = $.fn.hide;\n$.fn.hide = function () {\n  this.trigger('hide');\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  return __origHide.apply(this, args);\n};\nconst __origWidth = $.fn.width;\n// noinspection JSValidateTypes\n$.fn.width = function () {\n  for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n    args[_key7] = arguments[_key7];\n  }\n  return _ceilNumber(__origWidth.apply(this, args));\n};\nconst __origOuterWidth = $.fn.outerWidth;\n// noinspection JSValidateTypes\n$.fn.outerWidth = function () {\n  for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n    args[_key8] = arguments[_key8];\n  }\n  return _ceilNumber(__origOuterWidth.apply(this, args));\n};\nconst __origHeight = $.fn.height;\n// noinspection JSValidateTypes\n$.fn.height = function () {\n  for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n    args[_key9] = arguments[_key9];\n  }\n  return _ceilNumber(__origHeight.apply(this, args));\n};\nlet __origOuterHeight = $.fn.outerHeight;\n// noinspection JSValidateTypes\n$.fn.outerHeight = function () {\n  for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n    args[_key10] = arguments[_key10];\n  }\n  return _ceilNumber(__origOuterHeight.apply(this, args));\n};\n\n/**\n * Sets the given 'text' as text to the jQuery element, using the text() function (i.e. HTML is encoded automatically).\n * If the text does not contain any non-space characters, the text '&nbsp;' is set instead (using the html() function).\n * If an 'emptyCssClass' is provided, this CSS class is removed in the former and added in the later case.\n */\n$.fn.textOrNbsp = function (text, emptyCssClass) {\n  return this.contentOrNbsp(false, text, emptyCssClass);\n};\n\n/**\n * Same as \"textOrNbsp\", but with html (caller is responsible for encoding).\n */\n$.fn.htmlOrNbsp = function (html, emptyCssClass) {\n  return this.contentOrNbsp(true, html, emptyCssClass);\n};\n\n/**\n * Renders the given content as plain-text or HTML depending on the given htmlEnabled flag.\n *\n * @param {boolean} htmlEnabled\n * @param {string} content\n * @param {string} emptyCssClass\n * @returns {$}\n */\n$.fn.contentOrNbsp = function (htmlEnabled, content, emptyCssClass) {\n  let func = htmlEnabled ? this.html : this.text;\n  if (strings.hasText(content)) {\n    func.call(this, content);\n    if (emptyCssClass) {\n      this.removeClass(emptyCssClass);\n    }\n  } else {\n    this.html('&nbsp;');\n    if (emptyCssClass) {\n      this.addClass(emptyCssClass);\n    }\n  }\n  return this;\n};\n\n/**\n * Like toggleClass(), this toggles a HTML attribute on a set of jquery elements.\n *\n * @param attr\n *          Name of the attribute to toggle.\n * @param state\n *          Specifies if the attribute should be added or removed (based on whether the argument is truthy or falsy).\n *          If this argument is not defined, the attribute is added when it exists, and vice-versa. If this behavior\n *          is not desired, explicitly cast the argument to a boolean using \"!!\".\n * @param value\n *          Value to use when adding the attribute.\n *          If this argument is not specified, 'attr' is used as value.\n */\n$.fn.toggleAttr = function (attr, state, value) {\n  if (!attr) {\n    return this;\n  }\n  if (value === undefined) {\n    value = attr;\n  }\n  return this.each(function () {\n    let $element = $(this);\n    if (state === undefined) {\n      // set state according to the current value\n      state = $element.attr(attr) === undefined;\n    }\n    if (state) {\n      // set attr\n      $element.attr(attr, value);\n    } else {\n      // remove attr\n      $element.removeAttr(attr);\n    }\n  });\n};\n$.fn.backupSelection = function () {\n  let field = this[0];\n  if (field && field === this.activeElement(true)) {\n    return {\n      selectionStart: field.selectionStart,\n      selectionEnd: field.selectionEnd,\n      selectionDirection: field.selectionDirection\n    };\n  }\n  return null;\n};\n$.fn.restoreSelection = function (selection) {\n  let field = this[0];\n  if (field && field === this.activeElement(true) && selection) {\n    field.setSelectionRange(selection.selectionStart, selection.selectionEnd, selection.selectionDirection);\n  }\n  return this;\n};\n\n/**\n * If the given value is \"truthy\", it is set as attribute on the target. Otherwise, the attribute is removed.\n */\n$.fn.attrOrRemove = function (attributeName, value) {\n  if (value) {\n    this.attr(attributeName, value);\n  } else {\n    this.removeAttr(attributeName);\n  }\n  return this;\n};\n$.fn.appendAppLink = function (appLinkBean, func) {\n  return this.appendSpan().appLink(appLinkBean, func);\n};\n\n/**\n * @param appLinkBean\n *          Either\n *           - an AppLinkBean with both (1) a ref attribute which will be mapped to the\n *             data-ref attribute of the element and (2) a text attribute which will be\n *             set as the text of the element.\n *           - or just a ref, which will be mapped to the data-ref attribute of the\n *             element.\n * @param func\n *          Optional. Either\n *           - a function to be called when the app link has been clicked\n *           - or an object with a method named _onAppLinkAction (e.g. an instance of\n *             BeanField)\n *          If func is not set, the _onAppLinkAction of the inner most widget relative to\n *          this element (if any) will be called when the app link has been clicked.\n */\n$.fn.appLink = function (appLinkBean, func) {\n  if (!func) {\n    func = function (event) {\n      let widget = scout.widget(this);\n      if (widget && widget._onAppLinkAction) {\n        widget._onAppLinkAction(event);\n      }\n    }.bind(this);\n  } else if (typeof func === 'object' && func._onAppLinkAction) {\n    func = func._onAppLinkAction.bind(func);\n  }\n  this.addClass('app-link').attr('tabindex', '0').unfocusable().on('click', func);\n  if (typeof appLinkBean === 'string') {\n    this.attr('data-ref', appLinkBean);\n  } else {\n    this.text(appLinkBean.name).attr('data-ref', appLinkBean.ref);\n  }\n  return this;\n};\n\n/**\n * Adds the class 'unfocusable' to current result set. The class is not used for styling purposes\n * but has a meaning to the FocusManager.\n */\n$.fn.unfocusable = function () {\n  return this.addClass('unfocusable');\n};\n\n/**\n * Select all text within an element, e.g. within a content editable div element.\n */\n$.fn.selectAllText = function () {\n  let range,\n    myDocument = this.document(true),\n    myWindow = this.window(true),\n    element = this[0];\n  if (!myDocument || !myDocument.body || !myWindow || !element) {\n    return this;\n  }\n  if (myWindow.getSelection) {\n    range = myDocument.createRange();\n    range.selectNodeContents(element);\n    myWindow.getSelection().removeAllRanges();\n    myWindow.getSelection().addRange(range);\n  }\n  return this;\n};\n$.fn._getClientAndScrollWidthRounded = function () {\n  let element = this[0];\n  if (Device.get().isEdge()) {\n    // Edge seem to round up the scrollWidth. Therefore the clientWidth must be rounded up as well to have a valid comparison.\n    return {\n      clientWidth: Math.ceil(element.getBoundingClientRect().width) - this.cssBorderWidthX(),\n      // getBoundingClientRect includes the border -> remove it again to have the clientWidth\n      scrollWidth: element.scrollWidth\n    };\n  }\n  return {\n    clientWidth: element.clientWidth,\n    scrollWidth: element.scrollWidth\n  };\n};\n$.fn._getClientAndScrollWidthReliable = function () {\n  let widths = this._getClientAndScrollWidthRounded();\n  if (!Device.get().isScrollWidthIncludingPadding()) {\n    // browser supports accurate client- and scroll widths.\n    return widths;\n  }\n  if (widths.scrollWidth > widths.clientWidth) {\n    // content is large enough so that the scroll-width is already larger than the client-width. Values are correct.\n    return widths;\n  }\n  let paddingRight = this.cssPaddingRight(),\n    oldStyle = this.attr('style');\n  if (paddingRight > 0) {\n    // Some browsers render text within the right-padding (even with overflow=hidden). This has an effect on the value of scrollWidth which may be wrong in these cases (scrollWidth == clientWidth but ellipsis is shown).\n    // Solution: temporary remove the padding and reduce the width by the padding-size to have the same space for the text but without padding.\n    this.css({\n      width: widths.clientWidth - paddingRight,\n      paddingRight: '0px'\n    });\n    widths = this._getClientAndScrollWidthRounded(); // read value again.\n    this.attrOrRemove('style', oldStyle);\n    if (widths.scrollWidth > widths.clientWidth) {\n      return widths;\n    }\n  }\n\n  // In some cases the browser returns the same values for clientWidth and scrollWidth,\n  // but will cut off the text nevertheless. At least in FF this seems to be a bug related\n  // to sub-pixel rendering. The text is \"slightly\" (0.2 pixels) larger than the clientWidth,\n  // but scrollWidth returns the same value.\n  // As a workaround, we do a second measurement of the uncut width before returning false.\n  let clientWidth = this[0].getBoundingClientRect().width;\n  this.css('width', 'auto');\n  this.css('max-width', 'none');\n  let scrollWidth = this[0].getBoundingClientRect().width;\n  this.attrOrRemove('style', oldStyle);\n  return {\n    clientWidth: clientWidth,\n    scrollWidth: scrollWidth\n  };\n};\n\n/**\n * Checks if content is truncated.\n *\n * @return {boolean}\n */\n$.fn.isContentTruncated = function () {\n  let widths = this._getClientAndScrollWidthReliable();\n  if (widths.scrollWidth > widths.clientWidth) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * This function is used to distinct between single and double clicks.\n * Instead of executing a handler immediately when the first click occurs,\n * we wait for a given timeout (or by default 300 ms) to check if it is followed by a second click.\n * This will delay the execution of a single click a bit, so you should use this function wisely.\n */\n$.fn.onSingleOrDoubleClick = function (singleClickFunc, doubleClickFunc, timeout) {\n  return this.each(function () {\n    let that = this;\n    let numClicks = 0;\n    let timeout = scout.nvl(timeout, 300);\n    $(this).on('click', event => {\n      numClicks++;\n      if (numClicks === 1) {\n        setTimeout(() => {\n          if (numClicks === 1) {\n            singleClickFunc.call(that, event);\n          } else {\n            doubleClickFunc.call(that, event);\n          }\n          numClicks = 0;\n        }, timeout);\n      }\n    });\n  });\n};\n$.fn.onPassive = function (eventType, handler) {\n  let options = events.passiveOptions();\n  this[0].addEventListener(eventType, handler, options);\n  return this;\n};\n$.fn.offPassive = function (eventType, handler) {\n  let options = events.passiveOptions();\n  this[0].removeEventListener(eventType, handler, options);\n  return this;\n};\n\n// ------------------------------------------------------------------\n\n$.fn.appendTable = function (cssClass) {\n  return this.appendElement('<table>', cssClass);\n};\n$.fn.appendColgroup = function (cssClass) {\n  return this.appendElement('<colgroup>', cssClass);\n};\n$.fn.appendCol = function (cssClass) {\n  return this.appendElement('<col>', cssClass);\n};\n$.fn.appendTr = function (cssClass) {\n  return this.appendElement('<tr>', cssClass);\n};\n$.fn.appendTd = function (cssClass, text) {\n  return this.appendElement('<td>', cssClass, text);\n};\n$.fn.appendTh = function (cssClass, text) {\n  return this.appendElement('<th>', cssClass, text);\n};\n$.fn.appendUl = function (cssClass) {\n  return this.appendElement('<ul>', cssClass);\n};\n$.fn.appendLi = function (cssClass, text) {\n  return this.appendElement('<li>', cssClass, text);\n};\n\n// === $.easing extensions ===\n\n$.extend($.easing, {\n  easeOutQuart: x => 1 - Math.pow(1 - x, 4)\n});\n\n/**\n * jquery.binarytransport.js\n *\n * @description. jQuery ajax transport for making binary data type requests.\n * @version 1.0\n * @author Henry Algus <henryalgus@gmail.com>\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Henry Algus\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// use this transport for \"binary\" data type\n$.ajaxTransport('+binary', (options, originalOptions, jqXHR) => {\n  // check for conditions and support for blob / arraybuffer response type\n  if (window.FormData && (options.dataType && options.dataType === 'binary' || options.data && (window.ArrayBuffer && options.data instanceof ArrayBuffer || window.Blob && options.data instanceof Blob))) {\n    return {\n      // create new XMLHttpRequest\n      send: (headers, callback) => {\n        // setup all variables\n        let xhr = new XMLHttpRequest(),\n          url = options.url,\n          type = options.type,\n          async = options.async || true,\n          // blob or arraybuffer. Default is blob\n          dataType = options.responseType || 'blob',\n          data = options.data || null,\n          username = options.username || null,\n          password = options.password || null;\n        xhr.addEventListener('load', () => {\n          let data = {};\n          data[options.dataType] = xhr.response;\n          // make callback and send data\n          callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\n        });\n        xhr.open(type, url, async, username, password);\n\n        // setup custom headers\n        for (let i in headers) {\n          // NOSONAR\n          xhr.setRequestHeader(i, headers[i]);\n        }\n\n        // apply custom fields (if provided)\n        // noinspection JSUnresolvedVariable\n        if (options.xhrFields) {\n          for (let j in options.xhrFields) {\n            xhr[j] = options.xhrFields[j];\n          }\n        }\n        xhr.responseType = dataType;\n        xhr.send(data);\n      },\n      abort: () => {}\n    };\n  }\n});\n\n// jquery's noGlobal is true with webpack so jquery does not expose $ by itself\nif (window.$ !== $) {\n  window.$ = $;\n}","map":{"version":3,"names":["$","arrays","Device","Dimension","events","IconDesc","icons","objects","scout","strings","elemVisible","elem","isHidden","style","myWindow","Document","ownerDocument","defaultView","getComputedStyle","display","explodeShorthandProperties","properties","newProperties","forEach","prop","push","_ceilNumber","val","isNumber","Math","ceil","__origCleanData","cleanData","elems","i","_data","remove","triggerHandler","e","removeThis","suppressEvent","event","preventDefault","stopPropagation","stopImmediatePropagation","suppressEventIfDisabled","$target","target","isEnabled","debounce","fx","options","delay","extend","reschedule","timeoutId","fn","args","that","clearTimeout","setTimeout","apply","cancel","throttle","undefined","lastExecution","now","Date","getTime","callFx","negate","colorOpacity","hex","opacity","String","replace","length","rgb","c","parseInt","substr","round","min","max","toString","injectScript","url","deferred","Deferred","myDocument","document","window","linkTag","createElement","attr","on","removeTag","head","removeChild","type","reject","resolve","appendChild","promise","injectStyleSheet","injectStyle","data","styleTag","$styleTag","html","pxToNumber","pixel","parseFloat","resolvedDeferred","resolvedPromise","rejectedPromise","promiseAll","promises","asArray","nvl","ensure","when","done","fail","ajaxJson","ajax","dataType","contentType","catch","$elem","isJqXHR","obj","hasOwnProperty","$element","makeElement","element","cssClass","text","Error","addClass","makeDiv","makeSpan","domElement","activeElement","body","$body","entryPoint","closest","windowSize","$window","width","height","elementFromPoint","x","y","selector","$container","doc","elements","documentElement","isOrHas","is","log","warn","removeClass","prependDiv","prependTo","appendDiv","appendTo","prependElement","appendElement","afterDiv","insertAfter","beforeDiv","insertBefore","appendSpan","appendBr","appendTextNode","createTextNode","appendIcon","iconId","icon","parseIconId","isFontIcon","iconCharacter","appendCssClass","appendImg","iconUrl","imageSrc","$icon","makeSVG","id","$svg","createElementNS","appendSVG","attrXLINK","attributeName","value","setAttributeNS","each","addDeviceClass","device","get","isIos","selectOne","siblings","select","selected","toggleClass","isSelected","hasClass","setEnabled","enabled","toggleAttr","trigger","setVisible","visible","isVisible","isDisplayNone","css","setTabbable","tabbable","setTabbableOrFocusable","isTabbable","addToDomFunc","getOrCreateIconElement","call","removeIconElement","newElement","prepend","removeData","placeholder","isEveryParentVisible","everyParentVisible","parents","isAttached","contains","scrollParent","parent","scrollParents","$scrollParents","findUp","predicate","$stop","animateAVCSD","complete","step","duration","queue","animate","animateSVG","endValue","withoutTabIndex","startValue","oldComplete","removeAttr","tabIndex","setAttribute","pos","addClassForAnimation","className","defaultOptions","classesToRemove","oneAnimationEnd","handler","oneHandler","off","hasAnimationClass","test","cssWidthAnimated","oldWidth","newWidth","opts","cssWidth","cssHeightAnimated","oldHeight","newHeight","cssHeight","cssLeftAnimated","from","to","cssLeft","left","cssTopAnimated","cssTop","top","cssAnimated","fromVals","toVals","widthToContent","oldW","outerWidth","newW","offsetTo","$to","toOffset","offset","cssPxValue","position","cssPosition","point","cssBottom","cssRight","cssMinWidth","minWidth","indexOf","cssMaxWidth","maxWidth","Number","MAX_VALUE","cssMinHeight","minHeight","cssMaxHeight","maxHeight","cssLineHeight","cssMarginLeft","cssMarginBottom","cssMarginRight","cssMarginTop","cssMarginX","cssMarginY","cssPaddingTop","cssPaddingRight","cssPaddingBottom","cssPaddingLeft","cssPaddingX","cssPaddingY","cssBorderBottomWidth","cssBorderLeftWidth","cssBorderRightWidth","cssBorderTopWidth","cssBorderWidthY","cssBorderWidthX","innerBottom","outerHeight","innerRight","copyCss","$origin","props","split","$this","copyCssIfGreater","originValue","thisValue","copyCssClasses","$other","classString","classes","disableSpellcheck","has","resizable","model","create","unresizable","destroy","draggable","$handle","callback","$draggable","orig_offset","orig_event","handleWidth","windowWidth","windowHeight","pageY","pageX","newOffset","undraggable","fadeOutAndRemove","stop","fadeOut","removeAnimated","supportsCssAnimation","__origHide","hide","__origWidth","__origOuterWidth","__origHeight","__origOuterHeight","textOrNbsp","emptyCssClass","contentOrNbsp","htmlOrNbsp","htmlEnabled","content","func","hasText","state","backupSelection","field","selectionStart","selectionEnd","selectionDirection","restoreSelection","selection","setSelectionRange","attrOrRemove","appendAppLink","appLinkBean","appLink","widget","_onAppLinkAction","bind","unfocusable","name","ref","selectAllText","range","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","_getClientAndScrollWidthRounded","isEdge","clientWidth","getBoundingClientRect","scrollWidth","_getClientAndScrollWidthReliable","widths","isScrollWidthIncludingPadding","paddingRight","oldStyle","isContentTruncated","onSingleOrDoubleClick","singleClickFunc","doubleClickFunc","timeout","numClicks","onPassive","eventType","passiveOptions","addEventListener","offPassive","removeEventListener","appendTable","appendColgroup","appendCol","appendTr","appendTd","appendTh","appendUl","appendLi","easing","easeOutQuart","pow","ajaxTransport","originalOptions","jqXHR","FormData","ArrayBuffer","Blob","send","headers","xhr","XMLHttpRequest","async","responseType","username","password","response","status","statusText","getAllResponseHeaders","open","setRequestHeader","xhrFields","j","abort"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/jquery/jquery-scout.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n/**\n * jQuery plugin with scout extensions\n */\nimport $ from 'jquery';\nimport {arrays, Device, Dimension, events, IconDesc, icons, objects, scout, strings} from '../index';\n\n/**\n * By using $ in jsdoc all the functions is this file are recognized as part of $.\n * By additionally defining $ as jQuery all default jQuery functions are recognized as well.\n * \"JQuery\" (with a capital J) refers to the the type definitions \"@types/jquery\".\n * @typedef {JQuery|jQuery} $\n */\n\n// === internal methods ===\n\n/**\n * Returns false when the component display is 'none', otherwise true.\n *\n * Note: this gives other results than $.is(':visible'), since that method will also return false\n * when a component has absolute positioning and no width and height is defined (well, you cannot\n * see a component with a style like this, but technically it is not set to 'not visible').\n *\n * Also note that this function _only_ checks the 'display' property! Other methods to make an element\n * invisible to the user ('visibility: hidden', 'opacity: 0', off-screen position etc.) are _not_\n * considered.\n */\nfunction elemVisible(elem) {\n  // Check if element itself is hidden by its own style attribute\n  if (!elem || isHidden(elem.style)) {\n    return false;\n  }\n  // Must use correct window for element / computedStyle\n  let myWindow = (elem instanceof Document ? elem : elem.ownerDocument).defaultView;\n  // In some cases with popup windows the window object may be already set to null\n  // but we still have a valid reference to a DOM element. In that case we assume\n  // the element is not visible anymore.\n  if (!myWindow) {\n    return false;\n  }\n  // Check if element itself is hidden by external style-sheet\n  if (isHidden(myWindow.getComputedStyle(elem))) {\n    return false;\n  }\n  // Else visible\n  return true;\n\n  // ----- Helper functions -----\n\n  function isHidden(style) {\n    return style.display === 'none';\n  }\n}\n\nfunction explodeShorthandProperties(properties) {\n  let newProperties = [];\n  properties.forEach(prop => {\n    // shorthand css properties may not be copied directly (at least not in firefox) -> copy the actual properties\n    if (prop === 'margin' || prop === 'padding') {\n      newProperties.push(prop + '-top');\n      newProperties.push(prop + '-right');\n      newProperties.push(prop + '-bottom');\n      newProperties.push(prop + '-left');\n    } else if (prop === 'border') {\n      newProperties.push('border-top-style');\n      newProperties.push('border-right-style');\n      newProperties.push('border-bottom-style');\n      newProperties.push('border-left-style');\n\n      newProperties.push('border-top-color');\n      newProperties.push('border-right-color');\n      newProperties.push('border-bottom-color');\n      newProperties.push('border-left-color');\n\n      newProperties.push('border-top-width');\n      newProperties.push('border-right-width');\n      newProperties.push('border-bottom-width');\n      newProperties.push('border-left-width');\n    } else {\n      newProperties.push(prop);\n    }\n  });\n  return newProperties;\n}\n\n/**\n * This function is required because most jQuery functions can be used with or without arguments\n * and do return the jQuery instance when used as a setter (with arguments), ceiling should only\n * be done, when used as getter (without arguments).\n */\nfunction _ceilNumber(val) {\n  return objects.isNumber(val) ? Math.ceil(val) : val;\n}\n\n// === $ extensions ===\n\n/* !\n * jQuery UI Widget 1.11.2\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\nconst __origCleanData = $.cleanData;\n/**\n * This function is copied from jQuery UI. It is used to fire a 'remove' event\n * when we call the .remove() function on a jQuery object.\n */\n$.cleanData = elems => {\n  let events, elem, i;\n  for (i = 0; (elem = elems[i]); i++) { // NOSONAR\n    try {\n      // Only trigger remove when necessary to save time\n      events = $._data(elem, 'events');\n      if (events && events.remove) {\n        $(elem).triggerHandler('remove');\n      }\n      // http://bugs.jquery.com/ticket/8235\n    } catch (e) {\n      // NOP\n    }\n  }\n  __origCleanData(elems);\n};\n\n/**\n * Used by some animate functions.\n */\n$.removeThis = function() {\n  $(this).remove();\n};\n\n/**\n * Convenience function that can be used as an jQuery event handler, when this\n * event should be \"swallowed\". Technically, this function calls preventDefault(),\n * stopPropagation() and stopImmediatePropagation() on the event.\n *\n * Note: \"return false\" is equal to preventDefault() and stopPropagation(), but\n * not stopImmediatePropagation().\n */\n$.suppressEvent = event => {\n  if (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n  }\n};\n\n/**\n * If the event target is disabled (according to $.fn.isEnabled()), the event is suppressed\n * and the method returns true. Otherwise, false is returned.\n */\n$.suppressEventIfDisabled = (event, $target) => {\n  $target = $target || $(event.target);\n  if (!$target.isEnabled()) {\n    $.suppressEvent(event);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Implements the 'debounce' pattern. The given function fx is executed after a certain delay\n * (in milliseconds), but if the same function is called a second time within the waiting time,\n * depending on the 'reschedule' option, the timer is reset or the second call is ignored.\n * The default value for the 'delay' option is 250 ms.\n *\n * The resulting function has a function member 'cancel' that can be used to clear any scheduled\n * calls to the original function. If no such call was scheduled, cancel() returns false,\n * otherwise true.\n *\n * OPTION         DEFAULT VALUE   DESCRIPTION\n * ------------------------------------------------------------------------------------\n * delay          250             Waiting time in milliseconds before the function is executed.\n *\n * reschedule     true            Defines whether subsequent call to the debounced function\n *                                within the waiting time cause the timer to be reset or not.\n *                                If the reschedule option is 'false', subsequent calls within\n *                                the waiting time will just be ignored.\n *\n * @param fx\n *          the function to wrap\n * @param [options]\n *          an optional options object (see table above). Short-hand version: If a number is passed instead\n *          of an object, the value is automatically converted to the option 'delay'.\n */\n$.debounce = (fx, options) => {\n  if (typeof options === 'number') {\n    options = {\n      delay: options\n    };\n  }\n  options = $.extend({\n    delay: 250,\n    reschedule: true\n  }, options);\n\n  let timeoutId = null;\n  let fn = function(...args) {\n    let that = this;\n\n    if (timeoutId && !options.reschedule) {\n      // Function is already schedule but 'reschedule' option is set to false --> discard this request\n      return;\n    }\n    if (timeoutId) {\n      // Function is already scheduled --> cancel current scheduled call and re-schedule the call\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      timeoutId = null;\n      fx.apply(that, args);\n    }, options.delay);\n  };\n  fn.cancel = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      return true;\n    }\n    return false;\n  };\n  return fn;\n};\n\n/**\n * Executes the given function. Further calls to the same function are delayed by the given delay\n * (default 250ms). This is similar to $.debounce() but ensures that function is called at least\n * every 'delay' milliseconds. Can be useful to prevent too many function calls, e.g. from UI events.\n */\n$.throttle = (fx, delay) => {\n  delay = (delay !== undefined) ? delay : 250;\n  let timeoutId = null;\n  let lastExecution;\n  return function(...args) {\n    let that = this;\n    let now = new Date().getTime();\n    let callFx = () => {\n      lastExecution = now;\n      fx.apply(that, args);\n    };\n    if (lastExecution && lastExecution + delay > now) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        callFx();\n      }, delay);\n    } else {\n      callFx();\n    }\n  };\n};\n\n/**\n * Returns a function which negates the return value of the given function when called.\n */\n$.negate = fx => function(...args) {\n  return !fx.apply(this, args);\n};\n\n/**\n * color calculation\n */\n$.colorOpacity = (hex, opacity) => {\n  // validate hex string\n  hex = String(hex).replace(/[^0-9a-f]/gi, '');\n  if (hex.length < 6) {\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n  opacity = opacity || 0;\n\n  // convert to decimal and change luminosity\n  let rgb = '#';\n  for (let i = 0; i < 3; i++) {\n    let c = parseInt(hex.substr(i * 2, 2), 16);\n    c = Math.round(Math.min(Math.max(0, 255 - (255 - c) * opacity), 255)).toString(16);\n    rgb += ('00' + c).substr(c.length);\n  }\n\n  return rgb;\n};\n\n/**\n * CSP-safe method to dynamically load and execute a script from server.\n *\n * A new <script> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new script tag is passed to the promise's\n * callback functions.\n *\n *   $.injectScript('http://server/path/script.js')\n *     .done(function($scriptTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the script to.\n *\n * removeTag         false               Whether to remove the script tag again from the DOM\n *                                       after the script has been loaded.\n */\n$.injectScript = (url, options) => {\n  options = options || {};\n  let deferred = $.Deferred();\n\n  let myDocument = options.document || window.document;\n  let linkTag = myDocument.createElement('script');\n  $(linkTag)\n    .attr('src', url)\n    .attr('async', true)\n    .on('load error', event => {\n      if (options.removeTag) {\n        myDocument.head.removeChild(linkTag);\n      }\n      if (event.type === 'error') {\n        deferred.reject($(linkTag));\n      } else {\n        deferred.resolve($(linkTag));\n      }\n    });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n\n  return deferred.promise();\n};\n\n/**\n * CSP-safe method to dynamically load a style sheet from server.\n *\n * A new <link> tag is added to the document's head element. The methods returns\n * a promise which can be used to execute code after the loading has been completed.\n * A jQuery object referring to the new link tag is passed to the promise's\n * callback functions.\n *\n *   $.injectStyleSheet('http://server/path/style.css')\n *     .done(function($linkTag) { ... });\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style sheet to.\n */\n$.injectStyleSheet = (url, options) => {\n  options = options || {};\n  let deferred = $.Deferred();\n\n  let myDocument = options.document || window.document;\n  let linkTag = myDocument.createElement('link');\n  $(linkTag)\n    .attr('rel', 'stylesheet')\n    .attr('type', 'text/css')\n    .attr('href', url)\n    .on('load error', event => {\n      if (event.type === 'error') {\n        deferred.reject($(linkTag));\n      } else {\n        deferred.resolve($(linkTag));\n      }\n    });\n  // Use raw JS function to append the <script> tag, because jQuery handles\n  // script tags specially (see \"domManip\" function) and uses eval() which\n  // is not CSP-safe.\n  myDocument.head.appendChild(linkTag);\n\n  return deferred.promise();\n};\n\n/**\n * Dynamically adds styles to the document.\n *\n * A new <style> tag is added to the document's head element. The methods returns\n * a jQuery object referring to the new style tag.\n *\n *   $styleTag = $.injectStyle('p { text-color: orange; }');\n *\n * Options (optional):\n *\n * NAME              DEFAULT             DESCRIPTION\n * --------------------------------------------------------------------------------------------\n * document          window.document     Which document to inject the style to.\n */\n$.injectStyle = (data, options) => {\n  options = options || {};\n\n  let myDocument = options.document || window.document;\n  let styleTag = myDocument.createElement('style');\n  let $styleTag = $(styleTag);\n  $styleTag\n    .attr('type', 'text/css')\n    .html(data);\n  myDocument.head.appendChild(styleTag);\n\n  return $styleTag;\n};\n\n$.pxToNumber = pixel => {\n  if (!pixel) {\n    // parseFloat would return NaN if pixel is '' or undefined\n    return 0;\n  }\n  // parseFloat ignores 'px' and just extracts the number\n  return parseFloat(pixel);\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]);</code>\n *\n * @param {object[]} [args] of this function are passed to the resolve function of the deferred\n * @returns {$.Deferred} a deferred for an already resolved jQuery.Deferred object.\n */\n$.resolvedDeferred = (...args) => {\n  let deferred = $.Deferred();\n  deferred.resolve(...args);\n  return deferred;\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().resolve([arguments]).promise();</code>\n *\n * @param {...*} [args] of this function are passed to the resolve function of the deferred\n * @returns {Promise} a promise for an already resolved jQuery.Deferred object.\n */\n$.resolvedPromise = (...args) => {\n  let deferred = $.Deferred();\n  deferred.resolve(...args);\n  return deferred.promise();\n};\n\n/**\n * Use this function as shorthand of this:\n * <code>$.Deferred().reject([arguments]).promise();</code>\n *\n * @param {object[]} [arguments] of this function are passed to the reject function of the deferred\n * @returns {Promise} a promise for an already rejected jQuery.Deferred object.\n */\n$.rejectedPromise = (...args) => {\n  let deferred = $.Deferred();\n  deferred.reject(...args);\n  return deferred.promise();\n};\n\n/**\n * Creates a new promise which resolves when all promises resolve and fails when the first promise fails.\n *\n * @param {boolean} [asArray] (optional) when set to true, the resolve function will transform the\n *    flat arguments list containing the results into an array. The arguments of the reject function won't be touched. Default is false.\n */\n$.promiseAll = (promises, asArray) => {\n  asArray = scout.nvl(asArray, false);\n  promises = arrays.ensure(promises);\n  let deferred = $.Deferred();\n  $.when(...promises).done((...args) => {\n    if (asArray) {\n      deferred.resolve(args);\n    } else {\n      deferred.resolve(...args);\n    }\n  }).fail((...args) => {\n    deferred.reject(...args);\n  });\n  return deferred.promise();\n};\n\n/**\n * Shorthand for an AJAX request for a JSON file with UTF8 encoding.\n * Errors are caught and converted to a rejected promise with the following\n * arguments: jqXHR, textStatus, errorThrown, requestOptions.\n *\n * @returns a promise from JQuery function $.ajax\n */\n$.ajaxJson = url => $.ajax({\n  url: url,\n  dataType: 'json',\n  contentType: 'application/json; charset=UTF-8'\n}).catch(function(...args) {\n  // Reject the promise with usual arguments (jqXHR, textStatus, errorThrown), but add the request\n  // options as additional argument (e.g. to make the URL available to the error handler)\n  args.push(this);\n  return $.rejectedPromise(...args);\n});\n\n/**\n * Ensures the given parameter is a jQuery object.<p>\n * If it is a jQuery object, it will be returned as it is.\n * If it isn't, it will be passed to $() in order to create one.\n * <p>\n * Just using $() on an existing jQuery object would clone it which would work but is unnecessary.\n * @returns $\n */\n$.ensure = $elem => {\n  if ($elem instanceof $) {\n    return $elem;\n  }\n  return $($elem);\n};\n\n/**\n * Helper function to determine if an object is of type \"jqXHR\" (http://api.jquery.com/jQuery.ajax/#jqXHR)\n */\n$.isJqXHR = obj => (typeof obj === 'object' && obj.hasOwnProperty('readyState') && obj.hasOwnProperty('status') && obj.hasOwnProperty('statusText'));\n\n// === $.prototype extensions ===\n\n$.fn.nvl = function($element) {\n  if (this.length || !($element instanceof $)) {\n    return this;\n  }\n  return $element;\n};\n\n/**\n * @param element string. Example = &lt;input&gt;\n * @param cssClass (optional) class attribute\n * @param text (optional) adds a child text-node with given text (no HTML content)\n */\n$.fn.makeElement = function(element, cssClass, text) {\n  let myDocument = this.document(true);\n  if (myDocument === undefined || element === undefined) {\n    return new Error('missing arguments: document, element');\n  }\n  let $element = $(element, myDocument);\n  if (cssClass) {\n    $element.addClass(cssClass);\n  }\n  if (text) {\n    $element.text(text);\n  }\n  return $element;\n};\n\n/**\n * Creates a DIV element in the current document.\n *\n * @param cssClass (optional) string added to the 'class' attribute\n * @param text (optional) string used as inner text\n */\n$.fn.makeDiv = function(cssClass, text) {\n  return this.makeElement('<div>', cssClass, text);\n};\n\n$.fn.makeSpan = function(cssClass, text) {\n  return this.makeElement('<span>', cssClass, text);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {Document} document reference (ownerDocument) of the HTML element.\n */\n$.fn.document = function(domElement) {\n  let myDocument = this.length ? (this[0] instanceof Document ? this[0] : this[0].ownerDocument) : null;\n  return domElement ? myDocument : $(myDocument);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {Window|$} window reference (defaultView) of the HTML element\n */\n$.fn.window = function(domElement) {\n  let myDocument = this.document(true),\n    myWindow = myDocument ? myDocument.defaultView : null;\n  return domElement ? myWindow : $(myWindow);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the active element of the current document\n */\n$.fn.activeElement = function(domElement) {\n  let myDocument = this.document(true),\n    activeElement = myDocument ? myDocument.activeElement : null;\n  return domElement ? activeElement : $(activeElement);\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the BODY element of the HTML document in which the current HTML element is placed.\n */\n$.fn.body = function(domElement) {\n  let $body = $('body', this.document(true));\n  return domElement ? $body[0] : $body;\n};\n\n/**\n * @param {boolean} [domElement] (optional) if true the result is returned as DOM element, otherwise it is returned as jQuery object. The default is false.\n * @returns {$|HTMLElement} the closest DOM element that has the 'scout' class.\n */\n$.fn.entryPoint = function(domElement) {\n  let $element = this.closest('.scout');\n  return domElement ? $element[0] : $element;\n};\n\n/**\n * @returns {Dimension} size of the window (width and height)\n */\n$.fn.windowSize = function() {\n  let $window = this.window();\n  return new Dimension($window.width(), $window.height());\n};\n\n/**\n * Returns the element at the given point considering only child elements and elements matching the selector, if specified.\n */\n$.fn.elementFromPoint = function(x, y, selector) {\n  let $container = $(this),\n    doc = $container.document(true),\n    elements = [],\n    i = 0,\n    $element;\n\n  if (!doc) {\n    // If doc is null the $container itself is the document\n    doc = $container[0];\n  }\n  if (!doc) {\n    // If doc is still null (e.g. because the current jQuery collection does not contain any elements) return an empty collection\n    return $();\n  }\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    $element = $(doc.elementFromPoint(x, y));\n    if ($element.length === 0 || $element[0] === doc.documentElement) {\n      break;\n    }\n    if ($container.isOrHas($element) && (!selector || $element.is(selector))) {\n      break;\n    }\n    elements.push($element);\n    // make the element invisible to get the underlying element (uses visibility: hidden to make sure element size and position won't be changed)\n    $element.addClass('invisible');\n    i++;\n    if (i > 1000) {\n      $.log.warn('Infinite loop aborted', $element);\n      $element = $();\n      break;\n    }\n  }\n\n  if ($element[0] === doc.documentElement && $container[0] !== doc) {\n    // return an empty element if the only element found is the document element and the document element is not the container\n    $element = $();\n  }\n\n  elements.forEach($element => {\n    // show element again\n    $element.removeClass('invisible');\n  });\n  return $element;\n};\n\n// prepend - and return new div for chaining\n$.fn.prependDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).prependTo(this);\n};\n\n// append - and return new div for chaining\n$.fn.appendDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).appendTo(this);\n};\n\n$.fn.prependElement = function(element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).prependTo(this);\n};\n\n$.fn.appendElement = function(element, cssClass, text) {\n  return this.makeElement(element, cssClass, text).appendTo(this);\n};\n\n// insert after - and return new div for chaining\n$.fn.afterDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).insertAfter(this);\n};\n\n// insert before - and return new div for chaining\n$.fn.beforeDiv = function(cssClass, text) {\n  return this.makeDiv(cssClass, text).insertBefore(this);\n};\n\n$.fn.appendSpan = function(cssClass, text) {\n  return this.makeSpan(cssClass, text).appendTo(this);\n};\n\n$.fn.appendBr = function(cssClass) {\n  return this.makeElement('<br>', cssClass).appendTo(this);\n};\n\n$.fn.appendTextNode = function(text) {\n  return $(this.document(true).createTextNode(text)).appendTo(this);\n};\n\n/**\n * @param {IconDesc|string} iconId\n */\n$.fn.appendIcon = function(iconId, cssClass) {\n  if (!iconId) {\n    return this.appendSpan(cssClass)\n      .addClass('icon');\n  }\n  let icon;\n  if (iconId instanceof IconDesc) {\n    icon = iconId;\n  } else {\n    icon = icons.parseIconId(iconId);\n  }\n  if (icon.isFontIcon()) {\n    return this.makeSpan(cssClass, icon.iconCharacter)\n      .addClass('icon')\n      .addClass(icon.appendCssClass('font-icon'))\n      .appendTo(this);\n  }\n  return this.appendImg(icon.iconUrl, cssClass)\n    .addClass('icon image-icon');\n};\n\n$.fn.appendImg = function(imageSrc, cssClass) {\n  let $icon = this.appendElement('<img>', cssClass);\n  if (imageSrc) {\n    $icon.attr('src', imageSrc);\n  }\n  return $icon;\n};\n\n$.fn.makeSVG = function(type, cssClass, text, id) {\n  let myDocument = this.document(true);\n  if (myDocument === undefined || type === undefined) {\n    return new Error('missing arguments: document, type');\n  }\n  let $svg = $(myDocument.createElementNS('http://www.w3.org/2000/svg', type));\n  if (cssClass) {\n    $svg.attr('class', cssClass);\n  }\n  if (text) {\n    $svg.text(text);\n  }\n  if (id !== undefined) {\n    $svg.attr('id', id);\n  }\n  return $svg;\n};\n\n// append SVG\n$.fn.appendSVG = function(type, cssClass, text, id) {\n  return this.makeSVG(type, cssClass, text, id).appendTo(this);\n};\n\n$.fn.attrXLINK = function(attributeName, value) {\n  if (this.length === 0) { // shortcut for empty collections\n    return this;\n  }\n  if (this.length === 1) { // shortcut for single element collections\n    this[0].setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n    return this;\n  }\n  return this.each(function() {\n    this.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:' + attributeName, value);\n  });\n};\n\n/**\n * This function adds a device specific CSS class to the current element.\n * The current implementation adds a class 'ios' if it is an ios device.\n */\n$.fn.addDeviceClass = function() {\n  let device = Device.get();\n  if (device.isIos()) {\n    this.addClass('ios');\n  }\n  return this;\n};\n\n// select one and deselect siblings\n$.fn.selectOne = function() {\n  this.siblings().removeClass('selected');\n  this.addClass('selected');\n  return this;\n};\n\n$.fn.select = function(selected) {\n  return this.toggleClass('selected', !!selected);\n};\n\n$.fn.isSelected = function() {\n  return this.hasClass('selected');\n};\n\n$.fn.setEnabled = function(enabled) {\n  enabled = !!enabled;\n  this.toggleClass('disabled', !enabled);\n  // Toggle disabled attribute for elements that support it (see http://www.w3.org/TR/html5/disabled-elements.html)\n  if (this.is('button, input, select, textarea, optgroup, option, fieldset')) {\n    this.toggleAttr('disabled', !enabled);\n  }\n  this.trigger(enabled ? 'enable' : 'disable');\n  return this;\n};\n\n$.fn.isEnabled = function() {\n  return !this.hasClass('disabled');\n};\n\n$.fn.setVisible = function(visible) {\n  let isVisible = !this.hasClass('hidden');\n  if (isVisible === visible) {\n    return this;\n  }\n  if (!visible) {\n    this.addClass('hidden');\n    this.trigger('hide');\n  } else {\n    this.removeClass('hidden');\n    this.trigger('show');\n  }\n  return this;\n};\n\n$.fn.isDisplayNone = function() {\n  return this.css('display') === 'none';\n};\n\n/**\n * @param {boolean} tabbable true, to make the component tabbable. False, to make it neither tabbable nor focusable.\n * @returns {$}\n */\n$.fn.setTabbable = function(tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : null);\n};\n\n/**\n * @param {boolean} tabbable true, to make the component tabbable. False, to make it not tabbable but focusable, so the user can focus it with the mouse but not with the keyboard.\n * @returns {$}\n */\n$.fn.setTabbableOrFocusable = function(tabbable) {\n  return this.attr('tabIndex', tabbable ? 0 : -1);\n};\n\n$.fn.isTabbable = function() {\n  return this.attr('tabIndex') >= 0;\n};\n\n/**\n * @param {string} iconId\n * @param {function} [addToDomFunc] optional function which is used to add the new icon element to the DOM\n *     When not set, this.prepend($icon) is called.\n * @returns {$}\n * @see Icon as an alternative\n */\n$.fn.icon = function(iconId, addToDomFunc) {\n  let icon, $icon = this.data('$icon');\n  if (iconId) {\n    icon = icons.parseIconId(iconId);\n    if (icon.isFontIcon()) {\n      getOrCreateIconElement.call(this, $icon, '<span>', addToDomFunc)\n        .addClass('icon')\n        .addClass(icon.appendCssClass('font-icon'))\n        .text(icon.iconCharacter);\n    } else {\n      getOrCreateIconElement.call(this, $icon, '<img>', addToDomFunc)\n        .attr('src', icon.iconUrl)\n        .addClass('icon image-icon');\n    }\n  } else {\n    removeIconElement.call(this, $icon);\n  }\n  return this;\n\n  // ----- Helper functions -----\n\n  function getOrCreateIconElement($icon, newElement, addToDomFunc) {\n    // If element type does not match existing element, remove the existing element (e.g. when changing from font-icon to picture icon)\n    if ($icon && !$icon.is(newElement.replace(/[<>]/g, ''))) {\n      removeIconElement.call(this, $icon);\n      $icon = null;\n    }\n    // Create new element if necessary\n    if (!$icon) {\n      $icon = $(newElement);\n      this.data('$icon', $icon);\n      if (!addToDomFunc) {\n        this.prepend($icon);\n      } else {\n        addToDomFunc.call(this, $icon);\n      }\n    }\n    return $icon;\n  }\n\n  function removeIconElement($icon) {\n    if ($icon) {\n      $icon.remove();\n    }\n    this.removeData('$icon');\n  }\n};\n\n$.fn.placeholder = function(placeholder) {\n  return this.toggleAttr('placeholder', !!placeholder, placeholder);\n};\n\n$.fn.isVisible = function() {\n  if (this.hasClass('hidden')) {\n    return false;\n  }\n  return elemVisible(this[0]);\n};\n\n$.fn.isEveryParentVisible = function() {\n  let everyParentVisible = true;\n  this.parents().each(function() {\n    if (!$(this).isVisible()) {\n      everyParentVisible = false;\n      return false;\n    }\n  });\n  return everyParentVisible;\n};\n\n/**\n * @return {boolean} true if the element is attached (= is in the dom tree), false if not\n */\n$.fn.isAttached = function() {\n  return $.contains(this.document(true).documentElement, this[0]);\n};\n\n/**\n * @returns {$} the current element if it is scrollable, otherwise the first parent which is scrollable\n */\n$.fn.scrollParent = function() {\n  let $elem = this;\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      return $elem;\n    }\n    $elem = $elem.parent();\n  }\n  return $();\n};\n\n/**\n * Returns every parent which is scrollable\n */\n$.fn.scrollParents = function() {\n  let $scrollParents = $(),\n    $elem = this;\n\n  while ($elem.length > 0) {\n    if ($elem.data('scrollable')) {\n      $scrollParents.push($elem);\n    }\n    $elem = $elem.parent();\n  }\n  return $scrollParents;\n};\n\n/**\n * Similar to closest() but with a predicate function and the ability to stop at a given element.\n * @param {function} predicate the search predicate\n * @param {$} [$stop] If provided, the search is done until this element is reached.\n * @returns {$}\n */\n$.fn.findUp = function(predicate, $stop) {\n  let $elem = $(this);\n  while ($elem.length > 0) {\n    if (predicate($elem)) {\n      return $elem;\n    }\n    if ($stop && $elem[0] === $stop[0]) {\n      return $();\n    }\n    $elem = $elem.parent();\n  }\n  return $();\n};\n\n// most used animate\n$.fn.animateAVCSD = function(attr, value, complete, step, duration) {\n  let properties = {};\n  let options = {};\n\n  properties[attr] = value;\n  if (complete) {\n    options.complete = complete;\n  }\n  if (step) {\n    options.step = step;\n  }\n  if (duration) {\n    options.duration = duration;\n  }\n  options.queue = false;\n\n  this.animate(properties, options);\n  return this;\n};\n\n// SVG animate, array contains attr, endValue + startValue\n$.fn.animateSVG = function(attr, endValue, duration, complete, withoutTabIndex) {\n  return this.each(function() {\n    let startValue = parseFloat($(this).attr(attr));\n    if (withoutTabIndex) {\n      let oldComplete = complete;\n      complete = function() {\n        if (oldComplete) {\n          oldComplete.call(this);\n        }\n        $(this).removeAttr('tabindex');\n      };\n    }\n    $(this).animate({\n      tabIndex: 0\n    }, {\n      step: function(now, fx) {\n        this.setAttribute(attr, startValue + (endValue - startValue) * fx.pos);\n      },\n      duration: duration,\n      complete: complete,\n      queue: false\n    });\n  });\n};\n\n$.fn.addClassForAnimation = function(className, options) {\n  let defaultOptions = {\n    classesToRemove: className\n  };\n  options = $.extend({}, defaultOptions, options);\n  this.addClass(className);\n  this.oneAnimationEnd(event => {\n    // remove class, otherwise animation will be executed each time the element changes it's visibility (attach/rerender),\n    // and even each time when the css classes change\n    this.removeClass(options.classesToRemove);\n  });\n  return this;\n};\n\n/**\n * Adds a handler that is executed when a CSS animation ends on the current element. It will be executed\n * only once when the 'animationend' event is triggered on the current element. Bubbling events from child\n * elements are ignored.\n *\n * @param {function} handler - A function to execute when the 'animationend' event is triggered\n * @return {$}\n */\n$.fn.oneAnimationEnd = function(handler) {\n  if (!handler) {\n    return this;\n  }\n  let oneHandler = event => {\n    if (event.target !== this[0]) {\n      // Ignore events that bubble up from child elements\n      return;\n    }\n    // Unregister listener to implement \"one\" semantics\n    this.off('animationend webkitAnimationEnd', oneHandler);\n    // Notify actual event handler\n    handler(event);\n  };\n  return this.on('animationend webkitAnimationEnd', oneHandler);\n};\n\n$.fn.hasAnimationClass = function() {\n  // matches any CSS class that starts with 'animate-'\n  return /(^|\\s)animate-/.test(this.attr('class'));\n};\n\n/**\n * Animates from old to new width\n */\n$.fn.cssWidthAnimated = function(oldWidth, newWidth, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old width first\n  this.cssWidth(oldWidth);\n\n  // Then animate to new width\n  this.animate({\n    width: newWidth\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssHeightAnimated = function(oldHeight, newHeight, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to old height first\n  this.cssHeight(oldHeight);\n\n  // Then animate to new height\n  this.animate({\n    height: newHeight\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssLeftAnimated = function(from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssLeft(from);\n\n  // Then animate to new width\n  this.animate({\n    left: to\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssTopAnimated = function(from, to, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.cssTop(from);\n\n  // Then animate to new pos\n  this.animate({\n    top: to\n  }, opts);\n\n  return this;\n};\n\n$.fn.cssAnimated = function(fromVals, toVals, opts) {\n  opts = opts || {};\n  opts.duration = scout.nvl(opts.duration, 300);\n\n  // Reset to from first\n  this.css(fromVals);\n\n  // Then animate to new pos\n  this.animate(toVals, opts);\n  return this;\n};\n\n// over engineered animate\n$.fn.widthToContent = function(opts) {\n  let oldW = this.outerWidth(),\n    newW = this.css('width', 'auto').outerWidth();\n\n  this.cssWidthAnimated(oldW, newW, opts);\n  return this;\n};\n\n/**\n * Offset to a specific ancestor and not to the document as offset() would do.\n * Not the same as position() which returns the position relative to the offset parent.\n */\n$.fn.offsetTo = function($to) {\n  let toOffset = $to.offset(),\n    offset = this.offset();\n\n  return {\n    top: offset.top - toOffset.top,\n    left: offset.left - toOffset.left\n  };\n};\n\n$.fn.cssPxValue = function(prop, value) {\n  if (value === undefined) {\n    return $.pxToNumber(this.css(prop));\n  }\n  if (value === null) {\n    value = ''; // \"null\" should also remove the CSS property\n  }\n  if (typeof value === 'string') {\n    return this.css(prop, value);\n  }\n  return this.css(prop, value + 'px');\n};\n\n$.fn.cssLeft = function(position) {\n  return this.cssPxValue('left', position);\n};\n\n$.fn.cssTop = function(position) {\n  return this.cssPxValue('top', position);\n};\n\n/**\n * Sets the CSS properties 'left' and 'top' based on the x and y properties of the given point instance.\n *\n * @param {Point} point\n */\n$.fn.cssPosition = function(point) {\n  return this.cssLeft(point.x).cssTop(point.y);\n};\n\n$.fn.cssBottom = function(position) {\n  return this.cssPxValue('bottom', position);\n};\n\n$.fn.cssRight = function(position) {\n  return this.cssPxValue('right', position);\n};\n\n$.fn.cssWidth = function(width) {\n  return this.cssPxValue('width', width);\n};\n\n$.fn.cssMinWidth = function(minWidth) {\n  if (minWidth === undefined) {\n    let value = this.css('min-width');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-width', minWidth);\n};\n\n/**\n * @returns {number} the max-width as number. If max-width is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxWidth = function(maxWidth) {\n  if (maxWidth === undefined) {\n    let value = this.css('max-width');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-width', maxWidth);\n};\n\n$.fn.cssHeight = function(height) {\n  return this.cssPxValue('height', height);\n};\n\n$.fn.cssMinHeight = function(minHeight) {\n  if (minHeight === undefined) {\n    let value = this.css('min-height');\n    if (value === 'auto' || value.indexOf('%') !== -1) {\n      return 0;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('min-height', minHeight);\n};\n\n/**\n * @returns {number} the max-height as number. If max-height is not set (resp. defaults to 'none') Number.MAX_VALUE is returned.\n */\n$.fn.cssMaxHeight = function(maxHeight) {\n  if (maxHeight === undefined) {\n    let value = this.css('max-height');\n    if (value === 'none' || value.indexOf('%') !== -1) {\n      return Number.MAX_VALUE;\n    }\n    return $.pxToNumber(value);\n  }\n  return this.cssPxValue('max-height', maxHeight);\n};\n\n$.fn.cssLineHeight = function(height) {\n  return this.cssPxValue('line-height', height);\n};\n\n$.fn.cssMarginLeft = function(value) {\n  return this.cssPxValue('margin-left', value);\n};\n\n$.fn.cssMarginBottom = function(value) {\n  return this.cssPxValue('margin-bottom', value);\n};\n\n$.fn.cssMarginRight = function(value) {\n  return this.cssPxValue('margin-right', value);\n};\n\n$.fn.cssMarginTop = function(value) {\n  return this.cssPxValue('margin-top', value);\n};\n\n$.fn.cssMarginX = function(value) {\n  if (value === undefined) {\n    return this.cssMarginLeft() + this.cssMarginRight();\n  }\n  this.cssMarginLeft(value);\n  this.cssMarginRight(value);\n  return this;\n};\n\n$.fn.cssMarginY = function(value) {\n  if (value === undefined) {\n    return this.cssMarginTop() + this.cssMarginBottom();\n  }\n  this.cssMarginTop(value);\n  this.cssMarginBottom(value);\n  return this;\n};\n\n$.fn.cssPaddingTop = function(value) {\n  return this.cssPxValue('padding-top', value);\n};\n\n$.fn.cssPaddingRight = function(value) {\n  return this.cssPxValue('padding-right', value);\n};\n\n$.fn.cssPaddingBottom = function(value) {\n  return this.cssPxValue('padding-bottom', value);\n};\n\n$.fn.cssPaddingLeft = function(value) {\n  return this.cssPxValue('padding-left', value);\n};\n\n$.fn.cssPaddingX = function(value) {\n  if (value === undefined) {\n    return this.cssPaddingLeft() + this.cssPaddingRight();\n  }\n  this.cssPaddingLeft(value);\n  this.cssPaddingRight(value);\n  return this;\n};\n\n$.fn.cssPaddingY = function(value) {\n  if (value === undefined) {\n    return this.cssPaddingTop() + this.cssPaddingBottom();\n  }\n  this.cssPaddingTop(value);\n  this.cssPaddingBottom(value);\n  return this;\n};\n\n$.fn.cssBorderBottomWidth = function(value) {\n  return this.cssPxValue('border-bottom-width', value);\n};\n\n$.fn.cssBorderLeftWidth = function(value) {\n  return this.cssPxValue('border-left-width', value);\n};\n\n$.fn.cssBorderRightWidth = function(value) {\n  return this.cssPxValue('border-right-width', value);\n};\n\n$.fn.cssBorderTopWidth = function(value) {\n  return this.cssPxValue('border-top-width', value);\n};\n\n$.fn.cssBorderWidthY = function(value) {\n  if (value === undefined) {\n    return this.cssBorderTopWidth() + this.cssBorderBottomWidth();\n  }\n  this.cssBorderTopWidth(value);\n  return this.cssBorderBottomWidth(value);\n};\n\n$.fn.cssBorderWidthX = function(value) {\n  if (value === undefined) {\n    return this.cssBorderLeftWidth() + this.cssBorderRightWidth();\n  }\n  this.cssBorderLeftWidth(value);\n  return this.cssBorderRightWidth(value);\n};\n\n/**\n * Bottom of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerBottom = function() {\n  return this.position().top + this.outerHeight(true) - this.cssMarginBottom() - this.cssBorderBottomWidth();\n};\n\n/**\n * Right of a html element without margin and border relative to offset parent. Expects border-box model.\n */\n$.fn.innerRight = function() {\n  return this.position().left + this.outerWidth(true) - this.cssMarginRight() - this.cssBorderRightWidth();\n};\n\n$.fn.copyCss = function($origin, props) {\n  let properties = props.split(' ');\n  let $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(prop => {\n    $this.css(prop, $origin.css(prop));\n  });\n  return $this;\n};\n\n$.fn.copyCssIfGreater = function($origin, props) {\n  let properties = props.split(' ');\n  let $this = this;\n  properties = explodeShorthandProperties(properties);\n  properties.forEach(prop => {\n    let originValue = $.pxToNumber($origin.css(prop));\n    let thisValue = $.pxToNumber($this.css(prop));\n    if (originValue > thisValue) {\n      $this.css(prop, originValue + 'px');\n    }\n  });\n  return $this;\n};\n\n$.fn.copyCssClasses = function($other, classString) {\n  let classes = classString.split(' ');\n  let $this = this;\n  classes.forEach(cssClass => {\n    if ($other.hasClass(cssClass)) {\n      $this.addClass(cssClass);\n    }\n  });\n  return $this;\n};\n\n$.fn.disableSpellcheck = function() {\n  return this.attr('spellcheck', false);\n};\n\n/**\n * Returns whether the current element is the given element or has a child which is the given element.\n */\n$.fn.isOrHas = function(elem) {\n  if (elem instanceof $) {\n    elem = elem[0];\n  }\n  return this[0] === elem || this.has(elem).length > 0;\n};\n\n/**\n * Makes the current element resizable, which means DIVs for resize-handling are added to the DOM\n * in the E, SE and S of the element. This is primarily useful for (modal) dialogs.\n */\n$.fn.resizable = function(model) {\n  let $this = $(this);\n  let resizable = $this.data('resizable');\n  if (resizable) {\n    // Already resizable\n    return this;\n  }\n  resizable = scout.create('Resizable', $.extend(model, {$container: $this}));\n  $this.data('resizable', resizable);\n  return this;\n};\n\n/**\n * Removes the resize handles and event handlers in order to make the element un resizable again.\n */\n$.fn.unresizable = function() {\n  let $this = $(this);\n  let resizable = $this.data('resizable');\n  if (resizable) {\n    resizable.destroy();\n    $this.removeData('resizable');\n  }\n  return this;\n};\n\n/**\n * Makes any element movable with the mouse. If the argument '$handle' is missing, the entire\n * element can be used as a handle.\n *\n * A callback function can be passed as second argument (optional). The function is called for\n * every change of the draggable's position with an object as argument:\n * { top: (top pixels), left: (left pixels) }\n */\n$.fn.draggable = function($handle, callback) {\n  let $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.on('mousedown.draggable', event => {\n    $('iframe').addClass('dragging-in-progress');\n    let orig_offset = $draggable.offset();\n    let orig_event = event;\n    let handleWidth = $handle.width();\n    let windowWidth = $handle.window().width();\n    let windowHeight = $handle.window().height();\n    $handle.parents()\n      .on('mousemove.dragging', event => {\n        let top = orig_offset.top + (event.pageY - orig_event.pageY);\n        let left = orig_offset.left + (event.pageX - orig_event.pageX);\n        // do not drop outside of viewport (and leave a margin of 100 pixels)\n        left = Math.max(100 - handleWidth, left);\n        left = Math.min(windowWidth - 100, left);\n        top = Math.max(0, top); // must not be dragged outside of top, otherwise dragging back is impossible\n        top = Math.min(windowHeight - 100, top);\n        let newOffset = {\n          top: top,\n          left: left\n        };\n        $draggable.offset(newOffset);\n        callback && callback(newOffset);\n      })\n      .on('mouseup.dragging', e => {\n        $handle.parents().off('.dragging');\n        $('iframe').removeClass('dragging-in-progress');\n      });\n    event.preventDefault();\n  });\n};\n\n/**\n *\n * Removes the mouse down handler which was added by draggable() in order to make it un draggable again.\n */\n$.fn.undraggable = function($handle) {\n  let $draggable = this;\n  $handle = $handle || $draggable;\n  return $handle.off('mousedown.draggable');\n};\n\n/**\n * Calls jQuery.fadeOut() and then removes the element from the DOM.\n * Default fade-out duration is 150 ms.\n */\n$.fn.fadeOutAndRemove = function(duration, callback) {\n  if (callback === undefined && typeof duration === 'function') {\n    callback = duration;\n    duration = undefined;\n  }\n  duration = scout.nvl(duration, 150);\n  return this.stop(true).fadeOut(duration, function() {\n    $(this).remove();\n    if (callback) {\n      callback.call(this);\n    }\n  });\n};\n\n$.fn.removeAnimated = function(cssClass, callback) {\n  if (callback === undefined && typeof cssClass === 'function') {\n    callback = cssClass;\n    cssClass = undefined;\n  }\n  if (this.isDisplayNone()) {\n    // Remove without animation\n    this.remove();\n    callback && callback.call(this);\n  } else if (!Device.get().supportsCssAnimation()) {\n    // Cannot remove animated, remove with jQuery.fadeOut()\n    this.fadeOutAndRemove(callback);\n  } else {\n    // Add CSS class and wait for 'animationend' event\n    this.addClass(cssClass || 'animate-remove');\n    this.oneAnimationEnd(function() {\n      $(this).remove();\n      callback && callback.call(this);\n    });\n  }\n};\n\nconst __origHide = $.fn.hide;\n$.fn.hide = function(...args) {\n  this.trigger('hide');\n  return __origHide.apply(this, args);\n};\n\nconst __origWidth = $.fn.width;\n// noinspection JSValidateTypes\n$.fn.width = function(...args) {\n  return _ceilNumber(__origWidth.apply(this, args));\n};\n\nconst __origOuterWidth = $.fn.outerWidth;\n// noinspection JSValidateTypes\n$.fn.outerWidth = function(...args) {\n  return _ceilNumber(__origOuterWidth.apply(this, args));\n};\n\nconst __origHeight = $.fn.height;\n// noinspection JSValidateTypes\n$.fn.height = function(...args) {\n  return _ceilNumber(__origHeight.apply(this, args));\n};\n\nlet __origOuterHeight = $.fn.outerHeight;\n// noinspection JSValidateTypes\n$.fn.outerHeight = function(...args) {\n  return _ceilNumber(__origOuterHeight.apply(this, args));\n};\n\n/**\n * Sets the given 'text' as text to the jQuery element, using the text() function (i.e. HTML is encoded automatically).\n * If the text does not contain any non-space characters, the text '&nbsp;' is set instead (using the html() function).\n * If an 'emptyCssClass' is provided, this CSS class is removed in the former and added in the later case.\n */\n$.fn.textOrNbsp = function(text, emptyCssClass) {\n  return this.contentOrNbsp(false, text, emptyCssClass);\n};\n\n/**\n * Same as \"textOrNbsp\", but with html (caller is responsible for encoding).\n */\n$.fn.htmlOrNbsp = function(html, emptyCssClass) {\n  return this.contentOrNbsp(true, html, emptyCssClass);\n};\n\n/**\n * Renders the given content as plain-text or HTML depending on the given htmlEnabled flag.\n *\n * @param {boolean} htmlEnabled\n * @param {string} content\n * @param {string} emptyCssClass\n * @returns {$}\n */\n$.fn.contentOrNbsp = function(htmlEnabled, content, emptyCssClass) {\n  let func = htmlEnabled ? this.html : this.text;\n  if (strings.hasText(content)) {\n    func.call(this, content);\n    if (emptyCssClass) {\n      this.removeClass(emptyCssClass);\n    }\n  } else {\n    this.html('&nbsp;');\n    if (emptyCssClass) {\n      this.addClass(emptyCssClass);\n    }\n  }\n  return this;\n};\n\n/**\n * Like toggleClass(), this toggles a HTML attribute on a set of jquery elements.\n *\n * @param attr\n *          Name of the attribute to toggle.\n * @param state\n *          Specifies if the attribute should be added or removed (based on whether the argument is truthy or falsy).\n *          If this argument is not defined, the attribute is added when it exists, and vice-versa. If this behavior\n *          is not desired, explicitly cast the argument to a boolean using \"!!\".\n * @param value\n *          Value to use when adding the attribute.\n *          If this argument is not specified, 'attr' is used as value.\n */\n$.fn.toggleAttr = function(attr, state, value) {\n  if (!attr) {\n    return this;\n  }\n  if (value === undefined) {\n    value = attr;\n  }\n  return this.each(function() {\n    let $element = $(this);\n    if (state === undefined) {\n      // set state according to the current value\n      state = ($element.attr(attr) === undefined);\n    }\n    if (state) {\n      // set attr\n      $element.attr(attr, value);\n    } else {\n      // remove attr\n      $element.removeAttr(attr);\n    }\n  });\n};\n\n$.fn.backupSelection = function() {\n  let field = this[0];\n  if (field && field === this.activeElement(true)) {\n    return {\n      selectionStart: field.selectionStart,\n      selectionEnd: field.selectionEnd,\n      selectionDirection: field.selectionDirection\n    };\n  }\n  return null;\n};\n\n$.fn.restoreSelection = function(selection) {\n  let field = this[0];\n  if (field && field === this.activeElement(true) && selection) {\n    field.setSelectionRange(selection.selectionStart, selection.selectionEnd, selection.selectionDirection);\n  }\n  return this;\n};\n\n/**\n * If the given value is \"truthy\", it is set as attribute on the target. Otherwise, the attribute is removed.\n */\n$.fn.attrOrRemove = function(attributeName, value) {\n  if (value) {\n    this.attr(attributeName, value);\n  } else {\n    this.removeAttr(attributeName);\n  }\n  return this;\n};\n\n$.fn.appendAppLink = function(appLinkBean, func) {\n  return this.appendSpan().appLink(appLinkBean, func);\n};\n\n/**\n * @param appLinkBean\n *          Either\n *           - an AppLinkBean with both (1) a ref attribute which will be mapped to the\n *             data-ref attribute of the element and (2) a text attribute which will be\n *             set as the text of the element.\n *           - or just a ref, which will be mapped to the data-ref attribute of the\n *             element.\n * @param func\n *          Optional. Either\n *           - a function to be called when the app link has been clicked\n *           - or an object with a method named _onAppLinkAction (e.g. an instance of\n *             BeanField)\n *          If func is not set, the _onAppLinkAction of the inner most widget relative to\n *          this element (if any) will be called when the app link has been clicked.\n */\n$.fn.appLink = function(appLinkBean, func) {\n  if (!func) {\n    func = function(event) {\n      let widget = scout.widget(this);\n      if (widget && widget._onAppLinkAction) {\n        widget._onAppLinkAction(event);\n      }\n    }.bind(this);\n  } else if (typeof func === 'object' && func._onAppLinkAction) {\n    func = func._onAppLinkAction.bind(func);\n  }\n\n  this.addClass('app-link')\n    .attr('tabindex', '0')\n    .unfocusable()\n    .on('click', func);\n\n  if (typeof appLinkBean === 'string') {\n    this.attr('data-ref', appLinkBean);\n  } else {\n    this\n      .text(appLinkBean.name)\n      .attr('data-ref', appLinkBean.ref);\n  }\n  return this;\n};\n\n/**\n * Adds the class 'unfocusable' to current result set. The class is not used for styling purposes\n * but has a meaning to the FocusManager.\n */\n$.fn.unfocusable = function() {\n  return this.addClass('unfocusable');\n};\n\n/**\n * Select all text within an element, e.g. within a content editable div element.\n */\n$.fn.selectAllText = function() {\n  let range,\n    myDocument = this.document(true),\n    myWindow = this.window(true),\n    element = this[0];\n\n  if (!myDocument || !myDocument.body || !myWindow || !element) {\n    return this;\n  }\n\n  if (myWindow.getSelection) {\n    range = myDocument.createRange();\n    range.selectNodeContents(element);\n    myWindow.getSelection().removeAllRanges();\n    myWindow.getSelection().addRange(range);\n  }\n\n  return this;\n};\n\n$.fn._getClientAndScrollWidthRounded = function() {\n  let element = this[0];\n  if (Device.get().isEdge()) {\n    // Edge seem to round up the scrollWidth. Therefore the clientWidth must be rounded up as well to have a valid comparison.\n    return {\n      clientWidth: Math.ceil(element.getBoundingClientRect().width) - this.cssBorderWidthX(), // getBoundingClientRect includes the border -> remove it again to have the clientWidth\n      scrollWidth: element.scrollWidth\n    };\n  }\n\n  return {\n    clientWidth: element.clientWidth,\n    scrollWidth: element.scrollWidth\n  };\n};\n\n$.fn._getClientAndScrollWidthReliable = function() {\n  let widths = this._getClientAndScrollWidthRounded();\n  if (!Device.get().isScrollWidthIncludingPadding()) {\n    // browser supports accurate client- and scroll widths.\n    return widths;\n  }\n  if (widths.scrollWidth > widths.clientWidth) {\n    // content is large enough so that the scroll-width is already larger than the client-width. Values are correct.\n    return widths;\n  }\n\n  let paddingRight = this.cssPaddingRight(),\n    oldStyle = this.attr('style');\n  if (paddingRight > 0) {\n    // Some browsers render text within the right-padding (even with overflow=hidden). This has an effect on the value of scrollWidth which may be wrong in these cases (scrollWidth == clientWidth but ellipsis is shown).\n    // Solution: temporary remove the padding and reduce the width by the padding-size to have the same space for the text but without padding.\n    this.css({\n      width: widths.clientWidth - paddingRight,\n      paddingRight: '0px'\n    });\n    widths = this._getClientAndScrollWidthRounded(); // read value again.\n    this.attrOrRemove('style', oldStyle);\n    if (widths.scrollWidth > widths.clientWidth) {\n      return widths;\n    }\n  }\n\n  // In some cases the browser returns the same values for clientWidth and scrollWidth,\n  // but will cut off the text nevertheless. At least in FF this seems to be a bug related\n  // to sub-pixel rendering. The text is \"slightly\" (0.2 pixels) larger than the clientWidth,\n  // but scrollWidth returns the same value.\n  // As a workaround, we do a second measurement of the uncut width before returning false.\n  let clientWidth = this[0].getBoundingClientRect().width;\n  this.css('width', 'auto');\n  this.css('max-width', 'none');\n  let scrollWidth = this[0].getBoundingClientRect().width;\n  this.attrOrRemove('style', oldStyle);\n  return {\n    clientWidth: clientWidth,\n    scrollWidth: scrollWidth\n  };\n};\n\n/**\n * Checks if content is truncated.\n *\n * @return {boolean}\n */\n$.fn.isContentTruncated = function() {\n  let widths = this._getClientAndScrollWidthReliable();\n  if (widths.scrollWidth > widths.clientWidth) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * This function is used to distinct between single and double clicks.\n * Instead of executing a handler immediately when the first click occurs,\n * we wait for a given timeout (or by default 300 ms) to check if it is followed by a second click.\n * This will delay the execution of a single click a bit, so you should use this function wisely.\n */\n$.fn.onSingleOrDoubleClick = function(singleClickFunc, doubleClickFunc, timeout) {\n  return this.each(function() {\n    let that = this;\n    let numClicks = 0;\n    let timeout = scout.nvl(timeout, 300);\n    $(this).on('click', event => {\n      numClicks++;\n      if (numClicks === 1) {\n        setTimeout(() => {\n          if (numClicks === 1) {\n            singleClickFunc.call(that, event);\n          } else {\n            doubleClickFunc.call(that, event);\n          }\n          numClicks = 0;\n        }, timeout);\n      }\n    });\n  });\n};\n\n$.fn.onPassive = function(eventType, handler) {\n  let options = events.passiveOptions();\n  this[0].addEventListener(eventType, handler, options);\n  return this;\n};\n\n$.fn.offPassive = function(eventType, handler) {\n  let options = events.passiveOptions();\n  this[0].removeEventListener(eventType, handler, options);\n  return this;\n};\n\n// ------------------------------------------------------------------\n\n$.fn.appendTable = function(cssClass) {\n  return this.appendElement('<table>', cssClass);\n};\n\n$.fn.appendColgroup = function(cssClass) {\n  return this.appendElement('<colgroup>', cssClass);\n};\n\n$.fn.appendCol = function(cssClass) {\n  return this.appendElement('<col>', cssClass);\n};\n\n$.fn.appendTr = function(cssClass) {\n  return this.appendElement('<tr>', cssClass);\n};\n\n$.fn.appendTd = function(cssClass, text) {\n  return this.appendElement('<td>', cssClass, text);\n};\n\n$.fn.appendTh = function(cssClass, text) {\n  return this.appendElement('<th>', cssClass, text);\n};\n\n$.fn.appendUl = function(cssClass) {\n  return this.appendElement('<ul>', cssClass);\n};\n\n$.fn.appendLi = function(cssClass, text) {\n  return this.appendElement('<li>', cssClass, text);\n};\n\n// === $.easing extensions ===\n\n$.extend($.easing, {\n  easeOutQuart: x => 1 - Math.pow(1 - x, 4)\n});\n\n/**\n * jquery.binarytransport.js\n *\n * @description. jQuery ajax transport for making binary data type requests.\n * @version 1.0\n * @author Henry Algus <henryalgus@gmail.com>\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Henry Algus\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n * the Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n// use this transport for \"binary\" data type\n$.ajaxTransport('+binary', (options, originalOptions, jqXHR) => {\n  // check for conditions and support for blob / arraybuffer response type\n  if (window.FormData && ((options.dataType && (options.dataType === 'binary')) ||\n    (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) ||\n      (window.Blob && options.data instanceof Blob))))) {\n    return {\n      // create new XMLHttpRequest\n      send: (headers, callback) => {\n        // setup all variables\n        let xhr = new XMLHttpRequest(),\n          url = options.url,\n          type = options.type,\n          async = options.async || true,\n          // blob or arraybuffer. Default is blob\n          dataType = options.responseType || 'blob',\n          data = options.data || null,\n          username = options.username || null,\n          password = options.password || null;\n\n        xhr.addEventListener('load', () => {\n          let data = {};\n          data[options.dataType] = xhr.response;\n          // make callback and send data\n          callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\n        });\n\n        xhr.open(type, url, async, username, password);\n\n        // setup custom headers\n        for (let i in headers) { // NOSONAR\n          xhr.setRequestHeader(i, headers[i]);\n        }\n\n        // apply custom fields (if provided)\n        // noinspection JSUnresolvedVariable\n        if (options.xhrFields) {\n          for (let j in options.xhrFields) {\n            xhr[j] = options.xhrFields[j];\n          }\n        }\n\n        xhr.responseType = dataType;\n        xhr.send(data);\n      },\n      abort: () => {\n      }\n    };\n  }\n});\n\n// jquery's noGlobal is true with webpack so jquery does not expose $ by itself\nif (window.$ !== $) {\n  window.$ = $;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}