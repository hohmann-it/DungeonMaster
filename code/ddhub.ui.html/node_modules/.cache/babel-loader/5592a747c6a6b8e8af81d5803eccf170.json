{"ast":null,"code":"/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * https://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { FormAdapter } from '../../index';\n\n/**\n * @typedef JsFormModel\n * @property {object} parent\n * @property {object} owner\n * @property {object} displayParent\n * @property {string} displayHint\n * @property {object} inputData\n * @property {string} jsFormObjectType\n * @property {object} jsFormModel\n */\n\nexport default class JsFormAdapter extends FormAdapter {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @param {JsFormModel} model\n   */\n  _initModel(model, parent) {\n    model = super._initModel(model, parent);\n    if (!model.jsFormObjectType || !model.jsFormObjectType.length) {\n      throw new Error('jsFormObjectType not set');\n    }\n    let jsFormModel = {\n      parent: model.parent,\n      owner: model.owner,\n      objectType: model.jsFormObjectType,\n      displayParent: model.displayParent,\n      displayHint: model.displayHint,\n      data: model.inputData\n    };\n    if (model.jsFormModel) {\n      jsFormModel = $.extend(true, {}, model.jsFormModel, jsFormModel);\n    }\n    return jsFormModel;\n  }\n  _createWidget(model) {\n    let widget = super._createWidget(model);\n    widget.showOnOpen = false;\n    widget.open();\n    return widget;\n  }\n  _onWidgetEvent(event) {\n    if (event.type === 'save') {\n      this._onWidgetSave(event);\n    } else {\n      super._onWidgetEvent(event);\n    }\n  }\n  _onWidgetSave(event) {\n    this._send('save', {\n      outputData: this.widget.data\n    });\n  }\n  _onWidgetClose(event) {\n    // marks the end of the js lifecycle\n    // prevent remove/destroy of the widget as it will be done by the UI server\n    event.preventDefault();\n    // fromClosing will trigger a 'formHide' event on the desktop which then removes the widget\n    this._send('formClosing');\n  }\n  _onWidgetAbort(event) {\n    // completely handled by the js lifecycle -> no need to notify the UI server\n  }\n}","map":{"version":3,"names":["FormAdapter","JsFormAdapter","constructor","_initModel","model","parent","jsFormObjectType","length","Error","jsFormModel","owner","objectType","displayParent","displayHint","data","inputData","$","extend","_createWidget","widget","showOnOpen","open","_onWidgetEvent","event","type","_onWidgetSave","_send","outputData","_onWidgetClose","preventDefault","_onWidgetAbort"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/js/JsFormAdapter.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * https://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {FormAdapter} from '../../index';\n\n/**\n * @typedef JsFormModel\n * @property {object} parent\n * @property {object} owner\n * @property {object} displayParent\n * @property {string} displayHint\n * @property {object} inputData\n * @property {string} jsFormObjectType\n * @property {object} jsFormModel\n */\n\nexport default class JsFormAdapter extends FormAdapter {\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * @param {JsFormModel} model\n   */\n  _initModel(model, parent) {\n    model = super._initModel(model, parent);\n\n    if (!model.jsFormObjectType || !model.jsFormObjectType.length) {\n      throw new Error('jsFormObjectType not set');\n    }\n\n    let jsFormModel = {\n      parent: model.parent,\n      owner: model.owner,\n      objectType: model.jsFormObjectType,\n      displayParent: model.displayParent,\n      displayHint: model.displayHint,\n      data: model.inputData\n    };\n\n    if (model.jsFormModel) {\n      jsFormModel = $.extend(true, {}, model.jsFormModel, jsFormModel);\n    }\n\n    return jsFormModel;\n  }\n\n  _createWidget(model) {\n    let widget = super._createWidget(model);\n\n    widget.showOnOpen = false;\n    widget.open();\n\n    return widget;\n  }\n\n  _onWidgetEvent(event) {\n    if (event.type === 'save') {\n      this._onWidgetSave(event);\n    } else {\n      super._onWidgetEvent(event);\n    }\n  }\n\n  _onWidgetSave(event) {\n    this._send('save', {\n      outputData: this.widget.data\n    });\n  }\n\n  _onWidgetClose(event) {\n    // marks the end of the js lifecycle\n    // prevent remove/destroy of the widget as it will be done by the UI server\n    event.preventDefault();\n    // fromClosing will trigger a 'formHide' event on the desktop which then removes the widget\n    this._send('formClosing');\n  }\n\n  _onWidgetAbort(event) {\n    // completely handled by the js lifecycle -> no need to notify the UI server\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,WAAW,QAAO,aAAa;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,MAAMC,aAAa,SAASD,WAAW,CAAC;EAErDE,WAAW,GAAG;IACZ,KAAK,EAAE;EACT;;EAEA;AACF;AACA;EACEC,UAAU,CAACC,KAAK,EAAEC,MAAM,EAAE;IACxBD,KAAK,GAAG,KAAK,CAACD,UAAU,CAACC,KAAK,EAAEC,MAAM,CAAC;IAEvC,IAAI,CAACD,KAAK,CAACE,gBAAgB,IAAI,CAACF,KAAK,CAACE,gBAAgB,CAACC,MAAM,EAAE;MAC7D,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;IAC7C;IAEA,IAAIC,WAAW,GAAG;MAChBJ,MAAM,EAAED,KAAK,CAACC,MAAM;MACpBK,KAAK,EAAEN,KAAK,CAACM,KAAK;MAClBC,UAAU,EAAEP,KAAK,CAACE,gBAAgB;MAClCM,aAAa,EAAER,KAAK,CAACQ,aAAa;MAClCC,WAAW,EAAET,KAAK,CAACS,WAAW;MAC9BC,IAAI,EAAEV,KAAK,CAACW;IACd,CAAC;IAED,IAAIX,KAAK,CAACK,WAAW,EAAE;MACrBA,WAAW,GAAGO,CAAC,CAACC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAEb,KAAK,CAACK,WAAW,EAAEA,WAAW,CAAC;IAClE;IAEA,OAAOA,WAAW;EACpB;EAEAS,aAAa,CAACd,KAAK,EAAE;IACnB,IAAIe,MAAM,GAAG,KAAK,CAACD,aAAa,CAACd,KAAK,CAAC;IAEvCe,MAAM,CAACC,UAAU,GAAG,KAAK;IACzBD,MAAM,CAACE,IAAI,EAAE;IAEb,OAAOF,MAAM;EACf;EAEAG,cAAc,CAACC,KAAK,EAAE;IACpB,IAAIA,KAAK,CAACC,IAAI,KAAK,MAAM,EAAE;MACzB,IAAI,CAACC,aAAa,CAACF,KAAK,CAAC;IAC3B,CAAC,MAAM;MACL,KAAK,CAACD,cAAc,CAACC,KAAK,CAAC;IAC7B;EACF;EAEAE,aAAa,CAACF,KAAK,EAAE;IACnB,IAAI,CAACG,KAAK,CAAC,MAAM,EAAE;MACjBC,UAAU,EAAE,IAAI,CAACR,MAAM,CAACL;IAC1B,CAAC,CAAC;EACJ;EAEAc,cAAc,CAACL,KAAK,EAAE;IACpB;IACA;IACAA,KAAK,CAACM,cAAc,EAAE;IACtB;IACA,IAAI,CAACH,KAAK,CAAC,aAAa,CAAC;EAC3B;EAEAI,cAAc,CAACP,KAAK,EAAE;IACpB;EAAA;AAEJ"},"metadata":{},"sourceType":"module"}