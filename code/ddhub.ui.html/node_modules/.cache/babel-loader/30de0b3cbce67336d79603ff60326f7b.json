{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout } from '../index';\nexport default class CalendarLayout extends AbstractLayout {\n  constructor(calendar) {\n    super();\n    this.calendar = calendar;\n    this.stacked = false;\n    this.compacted = false;\n    this.compactWidth = 550;\n  }\n  layout($container) {\n    let height = 0,\n      headerHeight = 0,\n      $yearContainer = this.calendar._yearPanel.$container,\n      $grids = this.calendar.$grids,\n      $header = this.calendar.$header;\n    height += $container.cssMarginTop() + $container.cssMarginBottom();\n    $container.css('height', 'calc(100% - ' + height + 'px)');\n    this.undoCompact();\n    this.undoStack();\n    if ($header[0].scrollWidth > $container.width()) {\n      this.stack();\n    }\n    if ($container.width() < this.compactWidth || $header[0].scrollWidth > $container.width()) {\n      // Title may take a lot of space, make it always compact for small devices so it won't toggle when changing display mode or view range\n      this.compact();\n    }\n    headerHeight = $header.outerHeight(true);\n    $yearContainer.css('height', 'calc(100% - ' + (headerHeight + $yearContainer.cssMarginY()) + 'px)');\n    $grids.css('height', 'calc(100% - ' + (headerHeight + $grids.cssMarginY()) + 'px)');\n    this.calendar.layoutSize();\n    this.calendar.layoutYearPanel();\n  }\n  compact() {\n    if (this.compacted) {\n      return;\n    }\n    let $headerRow2 = this.calendar.$headerRow2;\n    this.calendar.$title.appendTo(this.calendar.$headerRow2);\n    $headerRow2.show();\n    this.compacted = true;\n  }\n  undoCompact() {\n    if (!this.compacted) {\n      return;\n    }\n    let $headerRow2 = this.calendar.$headerRow2;\n    this.calendar.$title.insertBefore(this.calendar.$commands);\n    $headerRow2.hide();\n    this.compacted = false;\n  }\n  stack() {\n    if (this.stacked) {\n      return;\n    }\n    this.calendar.$commands.children('.calendar-mode').hide();\n    this.calendar.modesMenu.setVisible(true);\n    this.stacked = true;\n  }\n  undoStack() {\n    if (!this.stacked) {\n      return;\n    }\n    this.calendar.$commands.children('.calendar-mode').show();\n    this.calendar.modesMenu.setVisible(false);\n    this.stacked = false;\n  }\n}","map":{"version":3,"names":["AbstractLayout","CalendarLayout","constructor","calendar","stacked","compacted","compactWidth","layout","$container","height","headerHeight","$yearContainer","_yearPanel","$grids","$header","cssMarginTop","cssMarginBottom","css","undoCompact","undoStack","scrollWidth","width","stack","compact","outerHeight","cssMarginY","layoutSize","layoutYearPanel","$headerRow2","$title","appendTo","show","insertBefore","$commands","hide","children","modesMenu","setVisible"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/calendar/CalendarLayout.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout} from '../index';\n\nexport default class CalendarLayout extends AbstractLayout {\n\n  constructor(calendar) {\n    super();\n    this.calendar = calendar;\n    this.stacked = false;\n    this.compacted = false;\n    this.compactWidth = 550;\n  }\n\n  layout($container) {\n    let height = 0,\n      headerHeight = 0,\n      $yearContainer = this.calendar._yearPanel.$container,\n      $grids = this.calendar.$grids,\n      $header = this.calendar.$header;\n\n    height += $container.cssMarginTop() + $container.cssMarginBottom();\n    $container.css('height', 'calc(100% - ' + height + 'px)');\n\n    this.undoCompact();\n    this.undoStack();\n    if ($header[0].scrollWidth > $container.width()) {\n      this.stack();\n    }\n    if ($container.width() < this.compactWidth || $header[0].scrollWidth > $container.width()) {\n      // Title may take a lot of space, make it always compact for small devices so it won't toggle when changing display mode or view range\n      this.compact();\n    }\n\n    headerHeight = $header.outerHeight(true);\n    $yearContainer.css('height', 'calc(100% - ' + (headerHeight + $yearContainer.cssMarginY()) + 'px)');\n    $grids.css('height', 'calc(100% - ' + (headerHeight + $grids.cssMarginY()) + 'px)');\n\n    this.calendar.layoutSize();\n    this.calendar.layoutYearPanel();\n  }\n\n  compact() {\n    if (this.compacted) {\n      return;\n    }\n    let $headerRow2 = this.calendar.$headerRow2;\n    this.calendar.$title.appendTo(this.calendar.$headerRow2);\n    $headerRow2.show();\n    this.compacted = true;\n  }\n\n  undoCompact() {\n    if (!this.compacted) {\n      return;\n    }\n    let $headerRow2 = this.calendar.$headerRow2;\n    this.calendar.$title.insertBefore(this.calendar.$commands);\n    $headerRow2.hide();\n    this.compacted = false;\n  }\n\n  stack() {\n    if (this.stacked) {\n      return;\n    }\n    this.calendar.$commands.children('.calendar-mode').hide();\n    this.calendar.modesMenu.setVisible(true);\n    this.stacked = true;\n  }\n\n  undoStack() {\n    if (!this.stacked) {\n      return;\n    }\n    this.calendar.$commands.children('.calendar-mode').show();\n    this.calendar.modesMenu.setVisible(false);\n    this.stacked = false;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}