{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { keys, KeyStrokeContext, keyStrokeModifier } from '../index';\nimport $ from 'jquery';\n\n/**\n * Keystroke context used for input fields.\n */\nexport default class InputFieldKeyStrokeContext extends KeyStrokeContext {\n  constructor(multiline) {\n    super();\n    this.invokeAcceptInputOnActiveValueField = true;\n    let navigationKeys = [keys.RIGHT, keys.LEFT, keys.HOME, keys.END];\n    this.registerStopPropagationKeys(keyStrokeModifier.CTRL, [keys.A, keys.C, keys.Y, keys.V, keys.Z, keys.BACKSPACE].concat(navigationKeys));\n    this.registerStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, navigationKeys);\n    this.registerStopPropagationKeys(keyStrokeModifier.SHIFT, navigationKeys);\n    this.registerStopPropagationKeys(keyStrokeModifier.NONE, [keys.SEMICOLON, keys.DASH, keys.COMMA, keys.POINT, keys.FORWARD_SLASH, keys.OPEN_BRACKET, keys.BACK_SLASH, keys.CLOSE_BRACKET, keys.SINGLE_QUOTE, keys.MULTIPLY, keys.ADD, keys.SUBTRACT, keys.DECIMAL_POINT, keys.DIVIDE, keys.NUMPAD_0, keys.NUMPAD_1, keys.NUMPAD_2, keys.NUMPAD_3, keys.NUMPAD_4, keys.NUMPAD_5, keys.NUMPAD_6, keys.NUMPAD_7, keys.NUMPAD_8, keys.NUMPAD_9, keys.MULTIPLY, keys.BACKSPACE, keys.DELETE, keys.SPACE].concat(navigationKeys));\n    this.setMultiline(multiline);\n  }\n  setMultiline(multiline) {\n    let multilineNavigationKeys = [keys.UP, keys.DOWN];\n    if (multiline) {\n      this.registerStopPropagationKeys(keyStrokeModifier.CTRL, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.NONE, multilineNavigationKeys);\n    } else {\n      this.unregisterStopPropagationKeys(keyStrokeModifier.CTRL, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.NONE, multilineNavigationKeys);\n    }\n  }\n  _applyPropagationFlags(event) {\n    super._applyPropagationFlags(event);\n    if (event.isPropagationStopped()) {\n      return;\n    }\n    if (this._isInputField(event.target) && (this._isLetterKeyStroke(event) || this._isNumberKeyStroke(event))) {\n      event.stopPropagation();\n    }\n  }\n  _isInputField(element) {\n    if (element && element.isContentEditable) {\n      return true;\n    }\n    let $element = $(element);\n    return $element.is('input:text') || $element.is('input:file') || $element.is('textarea');\n  }\n  _isNumberKeyStroke(event) {\n    return !event.ctrlKey && event.which >= keys[0] && event.which <= keys[9];\n  }\n  _isLetterKeyStroke(event) {\n    return !event.ctrlKey && event.which >= keys.A && event.which <= keys.Z;\n  }\n}","map":{"version":3,"names":["keys","KeyStrokeContext","keyStrokeModifier","$","InputFieldKeyStrokeContext","constructor","multiline","invokeAcceptInputOnActiveValueField","navigationKeys","RIGHT","LEFT","HOME","END","registerStopPropagationKeys","CTRL","A","C","Y","V","Z","BACKSPACE","concat","SHIFT","NONE","SEMICOLON","DASH","COMMA","POINT","FORWARD_SLASH","OPEN_BRACKET","BACK_SLASH","CLOSE_BRACKET","SINGLE_QUOTE","MULTIPLY","ADD","SUBTRACT","DECIMAL_POINT","DIVIDE","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","DELETE","SPACE","setMultiline","multilineNavigationKeys","UP","DOWN","unregisterStopPropagationKeys","_applyPropagationFlags","event","isPropagationStopped","_isInputField","target","_isLetterKeyStroke","_isNumberKeyStroke","stopPropagation","element","isContentEditable","$element","is","ctrlKey","which"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/keystroke/InputFieldKeyStrokeContext.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {keys, KeyStrokeContext, keyStrokeModifier} from '../index';\nimport $ from 'jquery';\n\n/**\n * Keystroke context used for input fields.\n */\nexport default class InputFieldKeyStrokeContext extends KeyStrokeContext {\n\n  constructor(multiline) {\n    super();\n\n    this.invokeAcceptInputOnActiveValueField = true;\n\n    let navigationKeys = [\n      keys.RIGHT,\n      keys.LEFT,\n      keys.HOME,\n      keys.END\n    ];\n    this.registerStopPropagationKeys(keyStrokeModifier.CTRL, [\n      keys.A,\n      keys.C,\n      keys.Y,\n      keys.V,\n      keys.Z,\n      keys.BACKSPACE\n    ].concat(navigationKeys));\n    this.registerStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, navigationKeys);\n    this.registerStopPropagationKeys(keyStrokeModifier.SHIFT, navigationKeys);\n    this.registerStopPropagationKeys(keyStrokeModifier.NONE, [\n      keys.SEMICOLON,\n      keys.DASH,\n      keys.COMMA,\n      keys.POINT,\n      keys.FORWARD_SLASH,\n      keys.OPEN_BRACKET,\n      keys.BACK_SLASH,\n      keys.CLOSE_BRACKET,\n      keys.SINGLE_QUOTE,\n      keys.MULTIPLY,\n      keys.ADD,\n      keys.SUBTRACT,\n      keys.DECIMAL_POINT,\n      keys.DIVIDE,\n      keys.NUMPAD_0,\n      keys.NUMPAD_1,\n      keys.NUMPAD_2,\n      keys.NUMPAD_3,\n      keys.NUMPAD_4,\n      keys.NUMPAD_5,\n      keys.NUMPAD_6,\n      keys.NUMPAD_7,\n      keys.NUMPAD_8,\n      keys.NUMPAD_9,\n      keys.MULTIPLY,\n      keys.BACKSPACE,\n      keys.DELETE,\n      keys.SPACE\n    ].concat(navigationKeys));\n    this.setMultiline(multiline);\n  }\n\n  setMultiline(multiline) {\n    let multilineNavigationKeys = [\n      keys.UP,\n      keys.DOWN\n    ];\n    if (multiline) {\n      this.registerStopPropagationKeys(keyStrokeModifier.CTRL, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.registerStopPropagationKeys(keyStrokeModifier.NONE, multilineNavigationKeys);\n    } else {\n      this.unregisterStopPropagationKeys(keyStrokeModifier.CTRL, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.CTRL | keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.SHIFT, multilineNavigationKeys);\n      this.unregisterStopPropagationKeys(keyStrokeModifier.NONE, multilineNavigationKeys);\n    }\n  }\n\n  _applyPropagationFlags(event) {\n    super._applyPropagationFlags(event);\n\n    if (event.isPropagationStopped()) {\n      return;\n    }\n\n    if (this._isInputField(event.target) && (this._isLetterKeyStroke(event) || this._isNumberKeyStroke(event))) {\n      event.stopPropagation();\n    }\n  }\n\n  _isInputField(element) {\n    if (element && element.isContentEditable) {\n      return true;\n    }\n    let $element = $(element);\n    return $element.is('input:text') || $element.is('input:file') || $element.is('textarea');\n  }\n\n  _isNumberKeyStroke(event) {\n    return !event.ctrlKey && event.which >= keys[0] && event.which <= keys[9];\n  }\n\n  _isLetterKeyStroke(event) {\n    return !event.ctrlKey && event.which >= keys.A && event.which <= keys.Z;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}