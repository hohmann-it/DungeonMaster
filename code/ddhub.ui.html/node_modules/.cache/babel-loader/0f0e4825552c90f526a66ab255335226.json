{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, Popup, TagBar, TagBarOverflowPopupLayout, TagFieldDeleteKeyStroke, TagFieldNavigationKeyStroke } from '../index';\nexport default class TagBarOverflowPopup extends Popup {\n  constructor() {\n    super();\n    this.windowPaddingX = 0;\n    this.windowPaddingY = 0;\n    this._tagBarPropertyChangeListener = null;\n\n    // We need not only to return which element receives the initial focus\n    // but we must also prepare this element so it can receive the focus\n    this.initialFocus = function () {\n      return TagBar.firstTagElement(this.$body).setTabbable(true).addClass('focused')[0];\n    };\n  }\n  _init(options) {\n    super._init(options);\n    this._tagBarPropertyChangeListener = this._onTagBarPropertyChange.bind(this);\n    this.parent.on('propertyChange', this._tagBarPropertyChangeListener);\n  }\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    this.keyStrokeContext.registerKeyStrokes([new TagFieldNavigationKeyStroke(this._createFieldAdapter()), new TagFieldDeleteKeyStroke(this._createFieldAdapter())]);\n  }\n  _destroy() {\n    this.parent.off('propertyChange', this._tagBarPropertyChangeListener);\n    super._destroy();\n  }\n  _render() {\n    super._render();\n    this.$container.addClass('tag-overflow-popup');\n    this.$body = this.$container.appendDiv('popup-body');\n  }\n  _createLayout() {\n    return new TagBarOverflowPopupLayout(this);\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderTags();\n  }\n  _renderTags() {\n    let tagBar = this.parent;\n    let visibleTags = tagBar.visibleTags();\n    let allTags = arrays.ensure(tagBar.tags);\n    let overflowTags = allTags.filter(tagText => visibleTags.indexOf(tagText) === -1);\n    tagBar.renderTags(this.$body, overflowTags);\n    if (!this.rendering) {\n      this.invalidateLayoutTree();\n    }\n  }\n  _focusFirstTagElement() {\n    TagBar.focusFirstTagElement(this.$body);\n  }\n  _onTagRemoveClick(event) {\n    this.parent._onTagRemoveClick(event);\n  }\n  _onTagBarPropertyChange(event) {\n    if (event.propertyName === 'tags') {\n      let allTags = arrays.ensure(this.parent.tags);\n      let visibleTags = this.parent.visibleTags();\n      let numTags = allTags.length;\n      // close popup when no more tags left or all tags are visible (=no overflow icon)\n      if (numTags === 0 || numTags === visibleTags.length) {\n        this.close();\n      } else {\n        this._renderTags();\n        this._focusFirstTagElement();\n      }\n    }\n  }\n  _createFieldAdapter() {\n    return TagBarOverflowPopup.createFieldAdapter(this);\n  }\n  static createFieldAdapter(field) {\n    return {\n      $container: () => field.$body,\n      enabled: () => true,\n      focus: () => {},\n      one: (p1, p2) => {\n        field.one(p1, p2);\n      },\n      off: (p1, p2) => {\n        field.off(p1, p2);\n      },\n      removeTag: tag => {\n        field.parent.parent.removeTag(tag);\n      }\n    };\n  }\n}","map":{"version":3,"names":["arrays","Popup","TagBar","TagBarOverflowPopupLayout","TagFieldDeleteKeyStroke","TagFieldNavigationKeyStroke","TagBarOverflowPopup","constructor","windowPaddingX","windowPaddingY","_tagBarPropertyChangeListener","initialFocus","firstTagElement","$body","setTabbable","addClass","_init","options","_onTagBarPropertyChange","bind","parent","on","_initKeyStrokeContext","keyStrokeContext","registerKeyStrokes","_createFieldAdapter","_destroy","off","_render","$container","appendDiv","_createLayout","_renderProperties","_renderTags","tagBar","visibleTags","allTags","ensure","tags","overflowTags","filter","tagText","indexOf","renderTags","rendering","invalidateLayoutTree","_focusFirstTagElement","focusFirstTagElement","_onTagRemoveClick","event","propertyName","numTags","length","close","createFieldAdapter","field","enabled","focus","one","p1","p2","removeTag","tag"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/tagbar/TagBarOverflowPopup.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, Popup, TagBar, TagBarOverflowPopupLayout, TagFieldDeleteKeyStroke, TagFieldNavigationKeyStroke} from '../index';\n\nexport default class TagBarOverflowPopup extends Popup {\n\n  constructor() {\n    super();\n\n    this.windowPaddingX = 0;\n    this.windowPaddingY = 0;\n    this._tagBarPropertyChangeListener = null;\n\n    // We need not only to return which element receives the initial focus\n    // but we must also prepare this element so it can receive the focus\n    this.initialFocus = function() {\n      return TagBar.firstTagElement(this.$body)\n        .setTabbable(true)\n        .addClass('focused')[0];\n    };\n  }\n\n  _init(options) {\n    super._init(options);\n    this._tagBarPropertyChangeListener = this._onTagBarPropertyChange.bind(this);\n    this.parent.on('propertyChange', this._tagBarPropertyChangeListener);\n  }\n\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    this.keyStrokeContext.registerKeyStrokes([\n      new TagFieldNavigationKeyStroke(this._createFieldAdapter()),\n      new TagFieldDeleteKeyStroke(this._createFieldAdapter())\n    ]);\n  }\n\n  _destroy() {\n    this.parent.off('propertyChange', this._tagBarPropertyChangeListener);\n    super._destroy();\n  }\n\n  _render() {\n    super._render();\n\n    this.$container.addClass('tag-overflow-popup');\n    this.$body = this.$container.appendDiv('popup-body');\n  }\n\n  _createLayout() {\n    return new TagBarOverflowPopupLayout(this);\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderTags();\n  }\n\n  _renderTags() {\n    let tagBar = this.parent;\n    let visibleTags = tagBar.visibleTags();\n    let allTags = arrays.ensure(tagBar.tags);\n    let overflowTags = allTags.filter(tagText => visibleTags.indexOf(tagText) === -1);\n    tagBar.renderTags(this.$body, overflowTags);\n\n    if (!this.rendering) {\n      this.invalidateLayoutTree();\n    }\n  }\n\n  _focusFirstTagElement() {\n    TagBar.focusFirstTagElement(this.$body);\n  }\n\n  _onTagRemoveClick(event) {\n    this.parent._onTagRemoveClick(event);\n  }\n\n  _onTagBarPropertyChange(event) {\n    if (event.propertyName === 'tags') {\n      let allTags = arrays.ensure(this.parent.tags);\n      let visibleTags = this.parent.visibleTags();\n      let numTags = allTags.length;\n      // close popup when no more tags left or all tags are visible (=no overflow icon)\n      if (numTags === 0 || numTags === visibleTags.length) {\n        this.close();\n      } else {\n        this._renderTags();\n        this._focusFirstTagElement();\n      }\n    }\n  }\n\n  _createFieldAdapter() {\n    return TagBarOverflowPopup.createFieldAdapter(this);\n  }\n\n  static createFieldAdapter(field) {\n    return {\n      $container: () => field.$body,\n\n      enabled: () => true,\n\n      focus: () => {\n      },\n\n      one: (p1, p2) => {\n        field.one(p1, p2);\n      },\n\n      off: (p1, p2) => {\n        field.off(p1, p2);\n      },\n\n      removeTag: tag => {\n        field.parent.parent.removeTag(tag);\n      }\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}