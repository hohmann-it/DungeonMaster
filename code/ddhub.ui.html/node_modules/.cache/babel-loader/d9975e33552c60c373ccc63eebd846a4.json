{"ast":null,"code":"function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n/*\n * Copyright (c) 2010-2019 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { dates, Popup, Range, scout, strings, Widget } from '../index';\nimport $ from 'jquery';\nexport default class CalendarComponent extends Widget {\n  constructor() {\n    super();\n\n    /**\n     * Selected is a GUI only property (the model doesn't have it)\n     */\n    this.selected = false;\n    this.fullDay = false;\n    this.item = null;\n    this._$parts = [];\n  }\n\n  /**\n   * If day of a month is smaller than 100px, the components get the class compact\n   */\n\n  _init(model) {\n    super._init(model);\n    this._syncCoveredDaysRange(this.coveredDaysRange);\n  }\n  _syncCoveredDaysRange(coveredDaysRange) {\n    if (coveredDaysRange) {\n      this.coveredDaysRange = new Range(dates.parseJsonDate(coveredDaysRange.from), dates.parseJsonDate(coveredDaysRange.to));\n    }\n  }\n  _remove() {\n    // remove $parts because they're not children of this.$container\n    this._$parts.forEach($part => {\n      $part.remove();\n    });\n    this._$parts = [];\n    super._remove();\n  }\n  _startLoopDay() {\n    // start date is either beginning of the component or beginning of viewRange\n    if (dates.compare(this.coveredDaysRange.from, this.parent.viewRange.from) > 0) {\n      return this.coveredDaysRange.from;\n    }\n    return this.parent.viewRange.from;\n  }\n  _render() {\n    let partDay, $day, $part;\n    if (!this.coveredDaysRange) {\n      // coveredDaysRange is not set on current CalendarComponent. Cannot show calendar component without from and to values.\n      return;\n    }\n    let loopDay = this._startLoopDay();\n    let appointmentToDate = dates.parseJsonDate(this.toDate);\n    let appointmentFromDate = dates.parseJsonDate(this.fromDate);\n    let coveredDaysRangeTo = this.coveredDaysRange.to;\n    if (!this.fullDay) {\n      let truncToDate = dates.trunc(appointmentToDate);\n      if (!dates.isSameDay(appointmentFromDate, appointmentToDate) && dates.compare(appointmentToDate, truncToDate) === 0) {\n        appointmentToDate = dates.shiftTime(appointmentToDate, 0, 0, 0, -1);\n        coveredDaysRangeTo = dates.shift(coveredDaysRangeTo, 0, 0, -1);\n      }\n    }\n    appointmentToDate = dates.toJsonDate(appointmentToDate);\n    let lastComponentDay = dates.shift(coveredDaysRangeTo, 0, 0, 1);\n    if (dates.compare(loopDay, lastComponentDay) > 0) {\n      // start day for the while loop is greater then the exit condition\n      return;\n    }\n    while (!dates.isSameDay(loopDay, lastComponentDay)) {\n      partDay = loopDay;\n      loopDay = dates.shift(loopDay, 0, 0, 1); // increase day for loop\n\n      // check if day is in visible view range\n      if (dates.compare(partDay, this.parent.viewRange.to) > 0) {\n        // break condition, partDay is now out of range.\n        break;\n      }\n      if (this.fullDay && !this.parent._isMonth()) {\n        $day = this._findDayInGrid(partDay, this.parent.$topGrid);\n      } else {\n        $day = this._findDayInGrid(partDay, this.parent.$grid);\n      }\n      if (!$day) {\n        // next day, partDay not found in grid\n        continue;\n      }\n      $part = $day.appendDiv('calendar-component');\n      $part.addClass(this.item.cssClass).data('component', this).data('partDay', partDay).mouseup(this._onMouseUp.bind(this)).on('contextmenu', this._onContextMenu.bind(this));\n      $part.appendDiv('calendar-component-leftcolorborder');\n      $part.appendDiv('content', this.item.subject);\n      this._$parts.push($part);\n      if (this.parent._isMonth()) {\n        let width = $day.data('new-width') || $day.width(); // prefer width from layoutSize\n        $part.addClass('component-month').toggleClass('compact', width < CalendarComponent.MONTH_COMPACT_THRESHOLD);\n      } else {\n        if (this.fullDay) {\n          // Full day tasks are rendered in the topGrid\n          let alreadyExistingTasks = $('.component-task', $day).length;\n          // Offset of initial task: 30px for the day-of-month number\n          // Offset of following tasks: 26px * preceding number of tasks. 26px: Task 23px high, 1px border. Spaced by 2px\n          this._arrangeTask(30 + 26 * alreadyExistingTasks);\n          $part.addClass('component-task');\n        } else {\n          let fromDate = dates.parseJsonDate(this.fromDate),\n            toDate = dates.parseJsonDate(appointmentToDate),\n            partFrom = this._getHours(this.fromDate),\n            partTo = this._getHours(appointmentToDate);\n\n          // position and height depending on start and end date\n          $part.addClass('component-day');\n          if (dates.isSameDay(dates.trunc(this.coveredDaysRange.from), dates.trunc(coveredDaysRangeTo))) {\n            this._partPosition($part, partFrom, partTo);\n          } else if (dates.isSameDay(partDay, fromDate)) {\n            this._partPosition($part, partFrom, 25) // 25: indicate that it takes longer than that day\n            .addClass('component-open-bottom');\n          } else if (dates.isSameDay(partDay, toDate)) {\n            // Start at zero: No need to indicate that it starts earlier since indicator needs no extra space\n            this._partPosition($part, 0, partTo).addClass('component-open-top');\n          } else {\n            this._partPosition($part, 0, 25) // 25: indicate that it takes longer than that day\n            .addClass('component-open-top').addClass('component-open-bottom');\n          }\n        }\n      }\n    }\n  }\n  _getHours(date) {\n    let d = dates.parseJsonDate(date);\n    return d.getHours() + d.getMinutes() / 60;\n  }\n  getLengthInHoursDecimal() {\n    let toTimestamp = dates.parseJsonDate(this.toDate, true);\n    let fromTimestamp = dates.parseJsonDate(this.fromDate, true);\n    return (toTimestamp - fromTimestamp) / (1000 * 60 * 60);\n  }\n  _findDayInGrid(date, $grid) {\n    return $grid.find('.calendar-day').filter(function (i, elem) {\n      return dates.isSameDay($(this).data('date'), date);\n    }).eq(0);\n  }\n  _isTask() {\n    return !this.parent._isMonth() && this.fullDay;\n  }\n  _arrangeTask(taskOffset) {\n    this._$parts.forEach($part => {\n      $part.css('top', taskOffset + 'px');\n    });\n  }\n  _isDayPart() {\n    return !this.parent._isMonth() && !this.fullDay;\n  }\n  _getHourRange(day) {\n    let hourRange = new Range(this._getHours(this.fromDate), this._getHours(this.toDate));\n    let dateRange = new Range(dates.parseJsonDate(this.fromDate), dates.parseJsonDate(this.toDate));\n    if (dates.isSameDay(day, dateRange.from) && dates.isSameDay(day, dateRange.to)) {\n      return new Range(hourRange.from, hourRange.to);\n    } else if (dates.isSameDay(day, dateRange.from)) {\n      return new Range(hourRange.from, 24);\n    } else if (dates.isSameDay(day, dateRange.to)) {\n      return new Range(0, hourRange.to);\n    }\n    return new Range(0, 24);\n  }\n  getPartDayPosition(day) {\n    return this._getDisplayDayPosition(this._getHourRange(day));\n  }\n  _getDisplayDayPosition(range) {\n    // Doesn't support minutes yet...\n    let preferredRange = new Range(this.parent._dayPosition(range.from, 0), this.parent._dayPosition(range.to, 0));\n    // Fixed number of divisions...\n    let minRangeSize = Math.round(100 * 100 / 24 / this.parent.numberOfHourDivisions) / 100; // Round to two digits\n    if (preferredRange.size() < minRangeSize) {\n      return new Range(preferredRange.from, preferredRange.from + minRangeSize);\n    }\n    return preferredRange;\n  }\n  _partPosition($part, y1, y2) {\n    // Compensate open bottom (height: square of 16px, rotated 45°, approx. 23px = sqrt(16^2 + 16^2)\n    let compensateBottom = y2 === 25 ? 23 : 0;\n    y2 = Math.min(24, y2);\n    let range = new Range(y1, y2);\n    let r = this._getDisplayDayPosition(range);\n\n    // Convert to %, rounded to two decimal places\n    compensateBottom = Math.round(100 * (100 / 1920 * compensateBottom)) / 100;\n    return $part.css('top', r.from + '%').css('height', r.to - r.from - compensateBottom + '%');\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderSelected();\n  }\n  _renderSelected() {\n    this._$parts.forEach(function ($part) {\n      $part.toggleClass('comp-selected', this.selected);\n    }, this);\n  }\n  setSelected(selected) {\n    this.setProperty('selected', selected);\n  }\n  updateSelectedComponent($part, updateScrollPosition) {\n    this.parent._selectedComponentChanged(this, $part.data('partDay'), updateScrollPosition);\n  }\n  _onMouseUp(event) {\n    // don't show popup if dragging is in process\n    if (this.parent._moveData && this.parent._moveData.moving) {\n      return;\n    }\n    let $part = $(event.delegateTarget);\n    this.updateSelectedComponent($part, false);\n    if (event.button === 0) {\n      let popup = scout.create('WidgetPopup', {\n        parent: this.parent,\n        $anchor: $part,\n        closeOnAnchorMouseDown: true,\n        closeOnMouseDownOutside: true,\n        closeOnOtherPopupOpen: true,\n        horizontalAlignment: Popup.Alignment.LEFT,\n        verticalAlignment: Popup.Alignment.CENTER,\n        trimWidth: false,\n        trimHeight: false,\n        horizontalSwitch: true,\n        verticalSwitch: true,\n        withArrow: true,\n        cssClass: 'tooltip',\n        scrollType: 'remove',\n        location: {\n          y: event.originalEvent.clientY\n        },\n        widget: {\n          objectType: 'Label',\n          htmlEnabled: true,\n          cssClass: 'tooltip-content',\n          value: this._description()\n        }\n      });\n      popup.open();\n    }\n  }\n  _onContextMenu(event) {\n    this.parent._showContextMenu(event, 'Calendar.CalendarComponent');\n  }\n  _format(date, pattern) {\n    return dates.format(date, this.session.locale, pattern);\n  }\n  _description() {\n    let descParts = [],\n      range = null,\n      text = '',\n      fromDate = dates.parseJsonDate(this.fromDate),\n      toDate = dates.parseJsonDate(this.toDate);\n\n    // subject\n    if (strings.hasText(this.item.subject)) {\n      descParts.push({\n        text: strings.encode(this.item.subject),\n        cssClass: 'calendar-component-title'\n      });\n    }\n\n    // time-range\n    if (this.fullDay) {\n      // NOP\n    } else if (dates.isSameDay(fromDate, toDate)) {\n      range = this.session.text('ui.FromXToY', this._format(fromDate, 'HH:mm'), this._format(toDate, 'HH:mm'));\n    } else {\n      range = this.session.text('ui.FromXToY', this._format(fromDate, 'EEEE HH:mm '), this._format(toDate, 'EEEE HH:mm'));\n    }\n    if (strings.hasText(range)) {\n      descParts.push({\n        text: range,\n        cssClass: 'calendar-component-intro'\n      });\n    }\n\n    // description\n    if (strings.hasText(this.item.description)) {\n      descParts.push({\n        text: strings.nl2br(this.item.description)\n      });\n    }\n\n    // build text\n    descParts.forEach(part => {\n      text += (part.cssClass ? '<span class=\"' + part.cssClass + '\">' + part.text + '</span>' : part.text) + '<br/>';\n    });\n    return text;\n  }\n}\n_defineProperty(CalendarComponent, \"MONTH_COMPACT_THRESHOLD\", 100);","map":{"version":3,"names":["dates","Popup","Range","scout","strings","Widget","$","CalendarComponent","constructor","selected","fullDay","item","_$parts","_init","model","_syncCoveredDaysRange","coveredDaysRange","parseJsonDate","from","to","_remove","forEach","$part","remove","_startLoopDay","compare","parent","viewRange","_render","partDay","$day","loopDay","appointmentToDate","toDate","appointmentFromDate","fromDate","coveredDaysRangeTo","truncToDate","trunc","isSameDay","shiftTime","shift","toJsonDate","lastComponentDay","_isMonth","_findDayInGrid","$topGrid","$grid","appendDiv","addClass","cssClass","data","mouseup","_onMouseUp","bind","on","_onContextMenu","subject","push","width","toggleClass","MONTH_COMPACT_THRESHOLD","alreadyExistingTasks","length","_arrangeTask","partFrom","_getHours","partTo","_partPosition","date","d","getHours","getMinutes","getLengthInHoursDecimal","toTimestamp","fromTimestamp","find","filter","i","elem","eq","_isTask","taskOffset","css","_isDayPart","_getHourRange","day","hourRange","dateRange","getPartDayPosition","_getDisplayDayPosition","range","preferredRange","_dayPosition","minRangeSize","Math","round","numberOfHourDivisions","size","y1","y2","compensateBottom","min","r","_renderProperties","_renderSelected","setSelected","setProperty","updateSelectedComponent","updateScrollPosition","_selectedComponentChanged","event","_moveData","moving","delegateTarget","button","popup","create","$anchor","closeOnAnchorMouseDown","closeOnMouseDownOutside","closeOnOtherPopupOpen","horizontalAlignment","Alignment","LEFT","verticalAlignment","CENTER","trimWidth","trimHeight","horizontalSwitch","verticalSwitch","withArrow","scrollType","location","y","originalEvent","clientY","widget","objectType","htmlEnabled","value","_description","open","_showContextMenu","_format","pattern","format","session","locale","descParts","text","hasText","encode","description","nl2br","part"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/calendar/CalendarComponent.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2019 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {dates, Popup, Range, scout, strings, Widget} from '../index';\nimport $ from 'jquery';\n\nexport default class CalendarComponent extends Widget {\n\n  constructor() {\n    super();\n\n    /**\n     * Selected is a GUI only property (the model doesn't have it)\n     */\n    this.selected = false;\n    this.fullDay = false;\n    this.item = null;\n    this._$parts = [];\n  }\n\n  /**\n   * If day of a month is smaller than 100px, the components get the class compact\n   */\n  static MONTH_COMPACT_THRESHOLD = 100;\n\n  _init(model) {\n    super._init(model);\n\n    this._syncCoveredDaysRange(this.coveredDaysRange);\n  }\n\n  _syncCoveredDaysRange(coveredDaysRange) {\n    if (coveredDaysRange) {\n      this.coveredDaysRange = new Range(\n        dates.parseJsonDate(coveredDaysRange.from),\n        dates.parseJsonDate(coveredDaysRange.to));\n    }\n  }\n\n  _remove() {\n    // remove $parts because they're not children of this.$container\n    this._$parts.forEach($part => {\n      $part.remove();\n    });\n    this._$parts = [];\n    super._remove();\n  }\n\n  _startLoopDay() {\n    // start date is either beginning of the component or beginning of viewRange\n    if (dates.compare(this.coveredDaysRange.from, this.parent.viewRange.from) > 0) {\n      return this.coveredDaysRange.from;\n    }\n    return this.parent.viewRange.from;\n  }\n\n  _render() {\n    let partDay, $day, $part;\n    if (!this.coveredDaysRange) {\n      // coveredDaysRange is not set on current CalendarComponent. Cannot show calendar component without from and to values.\n      return;\n    }\n\n    let loopDay = this._startLoopDay();\n\n    let appointmentToDate = dates.parseJsonDate(this.toDate);\n    let appointmentFromDate = dates.parseJsonDate(this.fromDate);\n    let coveredDaysRangeTo = this.coveredDaysRange.to;\n\n    if (!this.fullDay) {\n      let truncToDate = dates.trunc(appointmentToDate);\n      if (!dates.isSameDay(appointmentFromDate, appointmentToDate) && dates.compare(appointmentToDate, truncToDate) === 0) {\n        appointmentToDate = dates.shiftTime(appointmentToDate, 0, 0, 0, -1);\n        coveredDaysRangeTo = dates.shift(coveredDaysRangeTo, 0, 0, -1);\n      }\n    }\n    appointmentToDate = dates.toJsonDate(appointmentToDate);\n\n    let lastComponentDay = dates.shift(coveredDaysRangeTo, 0, 0, 1);\n\n    if (dates.compare(loopDay, lastComponentDay) > 0) {\n      // start day for the while loop is greater then the exit condition\n      return;\n    }\n\n    while (!dates.isSameDay(loopDay, lastComponentDay)) {\n      partDay = loopDay;\n      loopDay = dates.shift(loopDay, 0, 0, 1); // increase day for loop\n\n      // check if day is in visible view range\n      if (dates.compare(partDay, this.parent.viewRange.to) > 0) {\n        // break condition, partDay is now out of range.\n        break;\n      }\n\n      if (this.fullDay && !this.parent._isMonth()) {\n        $day = this._findDayInGrid(partDay, this.parent.$topGrid);\n      } else {\n        $day = this._findDayInGrid(partDay, this.parent.$grid);\n      }\n      if (!$day) {\n        // next day, partDay not found in grid\n        continue;\n      }\n      $part = $day.appendDiv('calendar-component');\n\n      $part\n        .addClass(this.item.cssClass)\n        .data('component', this)\n        .data('partDay', partDay)\n        .mouseup(this._onMouseUp.bind(this))\n        .on('contextmenu', this._onContextMenu.bind(this));\n      $part.appendDiv('calendar-component-leftcolorborder');\n      $part.appendDiv('content', this.item.subject);\n\n      this._$parts.push($part);\n\n      if (this.parent._isMonth()) {\n        let width = $day.data('new-width') || $day.width(); // prefer width from layoutSize\n        $part.addClass('component-month')\n          .toggleClass('compact', width < CalendarComponent.MONTH_COMPACT_THRESHOLD);\n      } else {\n        if (this.fullDay) {\n          // Full day tasks are rendered in the topGrid\n          let alreadyExistingTasks = $('.component-task', $day).length;\n          // Offset of initial task: 30px for the day-of-month number\n          // Offset of following tasks: 26px * preceding number of tasks. 26px: Task 23px high, 1px border. Spaced by 2px\n          this._arrangeTask(30 + 26 * alreadyExistingTasks);\n          $part.addClass('component-task');\n        } else {\n          let\n            fromDate = dates.parseJsonDate(this.fromDate),\n            toDate = dates.parseJsonDate(appointmentToDate),\n            partFrom = this._getHours(this.fromDate),\n            partTo = this._getHours(appointmentToDate);\n\n          // position and height depending on start and end date\n          $part.addClass('component-day');\n          if (dates.isSameDay(dates.trunc(this.coveredDaysRange.from), dates.trunc(coveredDaysRangeTo))) {\n            this._partPosition($part, partFrom, partTo);\n          } else if (dates.isSameDay(partDay, fromDate)) {\n            this._partPosition($part, partFrom, 25) // 25: indicate that it takes longer than that day\n              .addClass('component-open-bottom');\n          } else if (dates.isSameDay(partDay, toDate)) {\n            // Start at zero: No need to indicate that it starts earlier since indicator needs no extra space\n            this._partPosition($part, 0, partTo)\n              .addClass('component-open-top');\n          } else {\n\n            this._partPosition($part, 0, 25) // 25: indicate that it takes longer than that day\n              .addClass('component-open-top')\n              .addClass('component-open-bottom');\n          }\n        }\n      }\n    }\n  }\n\n  _getHours(date) {\n    let d = dates.parseJsonDate(date);\n    return d.getHours() + d.getMinutes() / 60;\n  }\n\n  getLengthInHoursDecimal() {\n    let toTimestamp = dates.parseJsonDate(this.toDate, true);\n    let fromTimestamp = dates.parseJsonDate(this.fromDate, true);\n    return (toTimestamp - fromTimestamp) / (1000 * 60 * 60);\n  }\n\n  _findDayInGrid(date, $grid) {\n    return $grid.find('.calendar-day').filter(\n      function(i, elem) {\n        return dates.isSameDay($(this).data('date'), date);\n      }).eq(0);\n  }\n\n  _isTask() {\n    return !this.parent._isMonth() && this.fullDay;\n  }\n\n  _arrangeTask(taskOffset) {\n    this._$parts.forEach($part => {\n      $part.css('top', taskOffset + 'px');\n    });\n  }\n\n  _isDayPart() {\n    return !this.parent._isMonth() && !this.fullDay;\n  }\n\n  _getHourRange(day) {\n    let hourRange = new Range(this._getHours(this.fromDate), this._getHours(this.toDate));\n    let dateRange = new Range(dates.parseJsonDate(this.fromDate), dates.parseJsonDate(this.toDate));\n\n    if (dates.isSameDay(day, dateRange.from) && dates.isSameDay(day, dateRange.to)) {\n      return new Range(hourRange.from, hourRange.to);\n    } else if (dates.isSameDay(day, dateRange.from)) {\n      return new Range(hourRange.from, 24);\n    } else if (dates.isSameDay(day, dateRange.to)) {\n      return new Range(0, hourRange.to);\n    }\n    return new Range(0, 24);\n  }\n\n  getPartDayPosition(day) {\n    return this._getDisplayDayPosition(this._getHourRange(day));\n  }\n\n  _getDisplayDayPosition(range) {\n    // Doesn't support minutes yet...\n    let preferredRange = new Range(this.parent._dayPosition(range.from, 0), this.parent._dayPosition(range.to, 0));\n    // Fixed number of divisions...\n    let minRangeSize = Math.round(100 * 100 / 24 / this.parent.numberOfHourDivisions) / 100; // Round to two digits\n    if (preferredRange.size() < minRangeSize) {\n      return new Range(preferredRange.from, preferredRange.from + minRangeSize);\n    }\n    return preferredRange;\n  }\n\n  _partPosition($part, y1, y2) {\n    // Compensate open bottom (height: square of 16px, rotated 45°, approx. 23px = sqrt(16^2 + 16^2)\n    let compensateBottom = y2 === 25 ? 23 : 0;\n    y2 = Math.min(24, y2);\n\n    let range = new Range(y1, y2);\n    let r = this._getDisplayDayPosition(range);\n\n    // Convert to %, rounded to two decimal places\n    compensateBottom = Math.round(100 * (100 / 1920 * compensateBottom)) / 100;\n\n    return $part\n      .css('top', r.from + '%')\n      .css('height', r.to - r.from - compensateBottom + '%');\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderSelected();\n  }\n\n  _renderSelected() {\n    this._$parts.forEach(function($part) {\n      $part.toggleClass('comp-selected', this.selected);\n    }, this);\n  }\n\n  setSelected(selected) {\n    this.setProperty('selected', selected);\n  }\n\n  updateSelectedComponent($part, updateScrollPosition) {\n    this.parent._selectedComponentChanged(this, $part.data('partDay'), updateScrollPosition);\n  }\n\n  _onMouseUp(event) {\n    // don't show popup if dragging is in process\n    if (this.parent._moveData && this.parent._moveData.moving) {\n      return;\n    }\n\n    let $part = $(event.delegateTarget);\n    this.updateSelectedComponent($part, false);\n\n    if (event.button === 0) {\n      let popup = scout.create('WidgetPopup', {\n        parent: this.parent,\n        $anchor: $part,\n        closeOnAnchorMouseDown: true,\n        closeOnMouseDownOutside: true,\n        closeOnOtherPopupOpen: true,\n        horizontalAlignment: Popup.Alignment.LEFT,\n        verticalAlignment: Popup.Alignment.CENTER,\n        trimWidth: false,\n        trimHeight: false,\n        horizontalSwitch: true,\n        verticalSwitch: true,\n        withArrow: true,\n        cssClass: 'tooltip',\n        scrollType: 'remove',\n        location: {\n          y: event.originalEvent.clientY\n        },\n        widget: {\n          objectType: 'Label',\n          htmlEnabled: true,\n          cssClass: 'tooltip-content',\n          value: this._description()\n        }\n      });\n      popup.open();\n    }\n  }\n\n  _onContextMenu(event) {\n    this.parent._showContextMenu(event, 'Calendar.CalendarComponent');\n  }\n\n  _format(date, pattern) {\n    return dates.format(date, this.session.locale, pattern);\n  }\n\n  _description() {\n    let descParts = [],\n      range = null,\n      text = '',\n      fromDate = dates.parseJsonDate(this.fromDate),\n      toDate = dates.parseJsonDate(this.toDate);\n\n    // subject\n    if (strings.hasText(this.item.subject)) {\n      descParts.push({\n        text: strings.encode(this.item.subject),\n        cssClass: 'calendar-component-title'\n      });\n    }\n\n    // time-range\n    if (this.fullDay) {\n      // NOP\n    } else if (dates.isSameDay(fromDate, toDate)) {\n      range = this.session.text('ui.FromXToY', this._format(fromDate, 'HH:mm'), this._format(toDate, 'HH:mm'));\n    } else {\n      range = this.session.text('ui.FromXToY', this._format(fromDate, 'EEEE HH:mm '), this._format(toDate, 'EEEE HH:mm'));\n    }\n\n    if (strings.hasText(range)) {\n      descParts.push({\n        text: range,\n        cssClass: 'calendar-component-intro'\n      });\n    }\n\n    // description\n    if (strings.hasText(this.item.description)) {\n      descParts.push({\n        text: strings.nl2br(this.item.description)\n      });\n    }\n\n    // build text\n    descParts.forEach(part => {\n      text += (part.cssClass ? '<span class=\"' + part.cssClass + '\">' + part.text + '</span>' : part.text) + '<br/>';\n    });\n\n    return text;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}