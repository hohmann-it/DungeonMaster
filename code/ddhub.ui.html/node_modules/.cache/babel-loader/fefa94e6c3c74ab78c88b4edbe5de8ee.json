{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout, Dimension, graphics } from '../../index';\nexport default class CellEditorPopupLayout extends AbstractLayout {\n  constructor(cellEditorPopup) {\n    super();\n    this.cellEditorPopup = cellEditorPopup;\n    this._field = cellEditorPopup.cell.field;\n    this._htmlContainer = cellEditorPopup.htmlComp;\n  }\n  layout($container) {\n    let size,\n      htmlField = this._field.htmlComp;\n    size = this._htmlContainer.availableSize({\n      exact: true\n    }).subtract(this._htmlContainer.insets()).subtract(htmlField.margins());\n    htmlField.setSize(size);\n  }\n  preferredLayoutSize($container) {\n    let cellBounds,\n      rowBounds,\n      margin,\n      $row = this.cellEditorPopup.row.$row,\n      $cell = this.cellEditorPopup.$anchor;\n    cellBounds = graphics.bounds($cell, {\n      exact: true\n    });\n    rowBounds = graphics.bounds($row, {\n      exact: true\n    });\n    margin = this.cellEditorPopup.$container.cssMarginLeft();\n    if (margin < 0) {\n      // extend the width if the popup has a negative margin\n      cellBounds.width = cellBounds.width + -margin;\n    }\n    let selectionHeight = this.cellEditorPopup._rowSelectionBounds().height;\n    if (selectionHeight) {\n      // Use height of selection if available (the selection may be larger than the row if it covers the border of the previous row)\n      this._htmlContainer.$comp.toggleClass('overflow-bottom', selectionHeight > rowBounds.height && this._htmlContainer.$comp.cssMarginTop() === 0);\n      rowBounds.height = selectionHeight;\n    }\n    return new Dimension(cellBounds.width, rowBounds.height);\n  }\n}","map":{"version":3,"names":["AbstractLayout","Dimension","graphics","CellEditorPopupLayout","constructor","cellEditorPopup","_field","cell","field","_htmlContainer","htmlComp","layout","$container","size","htmlField","availableSize","exact","subtract","insets","margins","setSize","preferredLayoutSize","cellBounds","rowBounds","margin","$row","row","$cell","$anchor","bounds","cssMarginLeft","width","selectionHeight","_rowSelectionBounds","height","$comp","toggleClass","cssMarginTop"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/table/editor/CellEditorPopupLayout.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout, Dimension, graphics} from '../../index';\n\nexport default class CellEditorPopupLayout extends AbstractLayout {\n\n  constructor(cellEditorPopup) {\n    super();\n    this.cellEditorPopup = cellEditorPopup;\n    this._field = cellEditorPopup.cell.field;\n    this._htmlContainer = cellEditorPopup.htmlComp;\n  }\n\n  layout($container) {\n    let size,\n      htmlField = this._field.htmlComp;\n\n    size = this._htmlContainer.availableSize({\n      exact: true\n    })\n      .subtract(this._htmlContainer.insets())\n      .subtract(htmlField.margins());\n    htmlField.setSize(size);\n  }\n\n  preferredLayoutSize($container) {\n    let cellBounds, rowBounds, margin,\n      $row = this.cellEditorPopup.row.$row,\n      $cell = this.cellEditorPopup.$anchor;\n\n    cellBounds = graphics.bounds($cell, {\n      exact: true\n    });\n    rowBounds = graphics.bounds($row, {\n      exact: true\n    });\n    margin = this.cellEditorPopup.$container.cssMarginLeft();\n    if (margin < 0) {\n      // extend the width if the popup has a negative margin\n      cellBounds.width = cellBounds.width + -margin;\n    }\n    let selectionHeight = this.cellEditorPopup._rowSelectionBounds().height;\n    if (selectionHeight) {\n      // Use height of selection if available (the selection may be larger than the row if it covers the border of the previous row)\n      this._htmlContainer.$comp.toggleClass('overflow-bottom', selectionHeight > rowBounds.height && this._htmlContainer.$comp.cssMarginTop() === 0);\n      rowBounds.height = selectionHeight;\n    }\n    return new Dimension(cellBounds.width, rowBounds.height);\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,cAAc,EAAEC,SAAS,EAAEC,QAAQ,QAAO,aAAa;AAE/D,eAAe,MAAMC,qBAAqB,SAASH,cAAc,CAAC;EAEhEI,WAAW,CAACC,eAAe,EAAE;IAC3B,KAAK,EAAE;IACP,IAAI,CAACA,eAAe,GAAGA,eAAe;IACtC,IAAI,CAACC,MAAM,GAAGD,eAAe,CAACE,IAAI,CAACC,KAAK;IACxC,IAAI,CAACC,cAAc,GAAGJ,eAAe,CAACK,QAAQ;EAChD;EAEAC,MAAM,CAACC,UAAU,EAAE;IACjB,IAAIC,IAAI;MACNC,SAAS,GAAG,IAAI,CAACR,MAAM,CAACI,QAAQ;IAElCG,IAAI,GAAG,IAAI,CAACJ,cAAc,CAACM,aAAa,CAAC;MACvCC,KAAK,EAAE;IACT,CAAC,CAAC,CACCC,QAAQ,CAAC,IAAI,CAACR,cAAc,CAACS,MAAM,EAAE,CAAC,CACtCD,QAAQ,CAACH,SAAS,CAACK,OAAO,EAAE,CAAC;IAChCL,SAAS,CAACM,OAAO,CAACP,IAAI,CAAC;EACzB;EAEAQ,mBAAmB,CAACT,UAAU,EAAE;IAC9B,IAAIU,UAAU;MAAEC,SAAS;MAAEC,MAAM;MAC/BC,IAAI,GAAG,IAAI,CAACpB,eAAe,CAACqB,GAAG,CAACD,IAAI;MACpCE,KAAK,GAAG,IAAI,CAACtB,eAAe,CAACuB,OAAO;IAEtCN,UAAU,GAAGpB,QAAQ,CAAC2B,MAAM,CAACF,KAAK,EAAE;MAClCX,KAAK,EAAE;IACT,CAAC,CAAC;IACFO,SAAS,GAAGrB,QAAQ,CAAC2B,MAAM,CAACJ,IAAI,EAAE;MAChCT,KAAK,EAAE;IACT,CAAC,CAAC;IACFQ,MAAM,GAAG,IAAI,CAACnB,eAAe,CAACO,UAAU,CAACkB,aAAa,EAAE;IACxD,IAAIN,MAAM,GAAG,CAAC,EAAE;MACd;MACAF,UAAU,CAACS,KAAK,GAAGT,UAAU,CAACS,KAAK,GAAG,CAACP,MAAM;IAC/C;IACA,IAAIQ,eAAe,GAAG,IAAI,CAAC3B,eAAe,CAAC4B,mBAAmB,EAAE,CAACC,MAAM;IACvE,IAAIF,eAAe,EAAE;MACnB;MACA,IAAI,CAACvB,cAAc,CAAC0B,KAAK,CAACC,WAAW,CAAC,iBAAiB,EAAEJ,eAAe,GAAGT,SAAS,CAACW,MAAM,IAAI,IAAI,CAACzB,cAAc,CAAC0B,KAAK,CAACE,YAAY,EAAE,KAAK,CAAC,CAAC;MAC9Id,SAAS,CAACW,MAAM,GAAGF,eAAe;IACpC;IACA,OAAO,IAAI/B,SAAS,CAACqB,UAAU,CAACS,KAAK,EAAER,SAAS,CAACW,MAAM,CAAC;EAC1D;AACF"},"metadata":{},"sourceType":"module"}