{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, Form, graphics, keys, scout, scrollbars, Status, strings, Widget } from '../index';\nimport $ from 'jquery';\nexport default class Tooltip extends Widget {\n  constructor() {\n    super();\n\n    /**\n     * Either a String or a function which returns a String\n     */\n    this.text = null;\n    this.severity = Status.Severity.INFO;\n    this.arrowPosition = 16;\n    this.arrowPositionUnit = 'px';\n    this.windowPaddingX = 10;\n    this.windowPaddingY = 5;\n    this.origin = null;\n\n    /**\n     * When the origin point is calculated using $element.offset(),\n     * the result is absolute to the window. When positioning the tooltip, the $parent's offset must\n     * be subtracted. When the given origin is already relative to the parent, set this option to\n     * \"true\" to disable this additional calculation.\n     */\n    this.originRelativeToParent = false;\n    this.$anchor = null;\n    this.autoRemove = true;\n    this.tooltipPosition = 'top';\n    this.tooltipDirection = 'right';\n    this.scrollType = 'position';\n    this.htmlEnabled = false;\n    this.$arrow = null;\n    this.$content = null;\n    this.menus = [];\n    this._addWidgetProperties(['menus']);\n    this._openLater = false;\n  }\n  render($parent) {\n    // Use entry point by default\n    let $tooltipParent = $parent || this.entryPoint();\n    // when the parent is detached it is not possible to render the popup -> do it later\n    if (!$tooltipParent || !$tooltipParent.length || !$tooltipParent.isAttached()) {\n      this._openLater = true;\n      this.$parent = $tooltipParent;\n      return;\n    }\n    super.render($tooltipParent);\n  }\n  _render() {\n    this.$container = this.$parent.appendDiv('tooltip').data('tooltip', this);\n    if (this.cssClass) {\n      this.$container.addClass(this.cssClass);\n    }\n    this.$arrow = this.$container.appendDiv('tooltip-arrow');\n    this.$content = this.$container.appendDiv('tooltip-content');\n    this._renderText();\n    this._renderSeverity();\n    this._renderMenus();\n    if (this.autoRemove) {\n      // Every user action will remove the tooltip\n      this._mouseDownHandler = this._onDocumentMouseDown.bind(this);\n      // The listener needs to be executed in the capturing phase -> Allows for having context menus inside the tooltip, otherwise click on context menu header would close the tooltip\n      this.$container.document(true).addEventListener('mousedown', this._mouseDownHandler, true); // true=the event handler is executed in the capturing phase\n\n      this._keydownHandler = this._onDocumentKeyDown.bind(this);\n      this.$container.document().on('keydown', this._keydownHandler);\n    }\n    if (this.$anchor && this.scrollType) {\n      this._anchorScrollHandler = this._onAnchorScroll.bind(this);\n      scrollbars.onScroll(this.$anchor, this._anchorScrollHandler);\n    }\n\n    // If the tooltip is rendered inside a (popup) dialog, get a reference to the dialog.\n    this.dialog = null;\n    let parent = this.parent;\n    while (parent) {\n      if (parent instanceof Form && parent.isDialog()) {\n        this.dialog = parent;\n        break;\n      }\n      parent = parent.parent;\n    }\n\n    // If inside a dialog, attach a listener to reposition the tooltip when the dialog is moved\n    if (this.dialog) {\n      this._moveHandler = this.position.bind(this);\n      this.dialog.on('move', this._moveHandler);\n    }\n  }\n  _postRender() {\n    super._postRender();\n    this.position();\n  }\n  _remove() {\n    if (this._mouseDownHandler) {\n      this.$container.document(true).removeEventListener('mousedown', this._mouseDownHandler, true);\n      this._mouseDownHandler = null;\n    }\n    if (this._keydownHandler) {\n      this.$container.document().off('keydown', this._keydownHandler);\n      this._keydownHandler = null;\n    }\n    if (this._anchorScrollHandler) {\n      scrollbars.offScroll(this._anchorScrollHandler);\n      this._anchorScrollHandler = null;\n    }\n    if (this._moveHandler) {\n      if (this.dialog) {\n        this.dialog.off('move', this._moveHandler);\n      }\n      this._moveHandler = null;\n    }\n    this.dialog = null;\n    this.$menus = null;\n    super._remove();\n  }\n  _onAttach() {\n    super._onAttach();\n    if (this._openLater && !this.rendered) {\n      this._openLater = false;\n      this.render();\n    }\n  }\n  _renderOnDetach() {\n    this._openLater = true;\n    this.remove();\n    super._onDetach();\n  }\n  _isRemovalPrevented() {\n    // If removal of a parent is pending due to an animation then don't return true to make sure tooltips are closed before the parent animation starts.\n    // However, if the tooltip itself is removed by an animation, removal should be prevented to ensure remove() won't run multiple times.\n    return this.removalPending;\n  }\n  setText(text) {\n    this.setProperty('text', text);\n  }\n  setSeverity(severity) {\n    this.setProperty('severity', severity);\n  }\n  _renderText() {\n    let text = this.text || '';\n    if (this.htmlEnabled) {\n      this.$content.html(text);\n    } else {\n      // use nl2br to allow tooltips with line breaks\n      this.$content.html(strings.nl2br(text));\n    }\n    this.$content.setVisible(!!text);\n    this.$container.toggleClass('no-text', !text);\n    if (!this.rendering) {\n      this.position();\n    }\n  }\n  _renderSeverity() {\n    this.$container.removeClass(Status.SEVERITY_CSS_CLASSES);\n    this.$container.addClass(Status.cssClassForSeverity(this.severity));\n  }\n  setMenus(menus) {\n    menus = arrays.ensure(menus);\n    this.setProperty('menus', menus);\n  }\n  _renderMenus() {\n    let maxIconWidth = 0,\n      menus = this.menus;\n    if (menus.length > 0 && !this.$menus) {\n      this.$menus = this.$container.appendDiv('tooltip-menus');\n    } else if (menus.length === 0 && this.$menus) {\n      this.$menus.remove();\n      this.$menus = null;\n    }\n\n    // Render menus\n    menus.forEach(function (menu) {\n      let iconWidth = 0;\n      menu.render(this.$menus);\n      if (menu.iconId) {\n        iconWidth = menu.get$Icon().outerWidth(true);\n        maxIconWidth = Math.max(iconWidth, maxIconWidth);\n      }\n    }, this);\n\n    // Align menus if there is one with an icon\n    if (maxIconWidth > 0) {\n      menus.forEach(menu => {\n        if (!menu.iconId) {\n          menu.$text.cssPaddingLeft(maxIconWidth);\n        } else {\n          menu.$text.cssPaddingLeft(maxIconWidth - menu.get$Icon().outerWidth(true));\n        }\n      }, this);\n    }\n    this.$container.toggleClass('has-menus', menus.length > 0);\n    if (!this.rendering) {\n      // New text might be shorter or longer -> recompute position.\n      // Resetting the current position first ensures that the position is computed the\n      // same as if the tooltip was opened initially with the new text, even when the tooltip\n      // is at the right side of the screen. Otherwise, text wrapping might occur.\n      this.$container.cssLeft('').cssTop('');\n      this.position();\n    }\n  }\n  position() {\n    let top, left, arrowSizeX, arrowSizeY, overlapX, overlapY, x, y, origin, tooltipWidth, tooltipHeight, arrowPosition, inView;\n    if (this.origin) {\n      origin = this.origin;\n      x = origin.x;\n    } else {\n      origin = graphics.offsetBounds(this.$anchor);\n      x = origin.x + origin.width / 2;\n    }\n    y = origin.y;\n    if (this.$anchor) {\n      // Sticky tooltip must only be visible if the location where the tooltip points is in view (prevents that the tooltip points at an invisible anchor)\n      inView = scrollbars.isLocationInView(origin, this.$anchor.scrollParent());\n      this.$container.setVisible(inView);\n    }\n\n    // this.$parent might not be at (0,0) of the document\n    if (!this.originRelativeToParent) {\n      let parentOffset = this.$parent.offset();\n      x -= parentOffset.left;\n      y -= parentOffset.top;\n    }\n    arrowSizeX = 7;\n    arrowSizeY = 4;\n    tooltipHeight = this.$container.outerHeight();\n    tooltipWidth = this.$container.outerWidth();\n\n    // Compute actual arrow position if position is provided in percentage\n    arrowPosition = this.arrowPosition;\n    if (this.arrowPositionUnit === '%') {\n      arrowPosition = tooltipWidth * this.arrowPosition / 100;\n    }\n    if (this.tooltipDirection === 'left') {\n      arrowPosition = tooltipWidth - arrowPosition;\n    }\n    top = y - tooltipHeight - arrowSizeY;\n    left = x - arrowPosition;\n    overlapX = left + tooltipWidth + this.windowPaddingX - this.$parent.width();\n    overlapY = top - this.windowPaddingY;\n\n    // Move tooltip to the left until it gets fully visible\n    if (overlapX > 0) {\n      left -= overlapX;\n      arrowPosition = x - left;\n    }\n    // Move tooltip to the right if it overlaps the left edge\n    if (left < this.windowPaddingX) {\n      left = this.windowPaddingX;\n      arrowPosition = x - this.windowPaddingX;\n    }\n\n    // Move tooltip to the bottom, arrow on top\n    this.$arrow.removeClass('arrow-top arrow-bottom');\n    if (this.tooltipPosition === 'bottom' || overlapY < 0) {\n      this.$arrow.addClass('arrow-top');\n      top = y + origin.height + arrowSizeY;\n    } else {\n      this.$arrow.addClass('arrow-bottom');\n    }\n\n    // Make sure arrow is never positioned outside of the tooltip\n    arrowPosition = Math.min(arrowPosition, this.$container.outerWidth() - arrowSizeX);\n    arrowPosition = Math.max(arrowPosition, arrowSizeX);\n    this.$arrow.cssLeft(arrowPosition - this.$arrow.cssBorderLeftWidth());\n    this.$container.cssLeft(left).cssTop(top);\n\n    // If there are menu popups make sure they are positioned correctly\n    this.menus.forEach(menu => {\n      if (menu.popup) {\n        menu.popup.position();\n      }\n    }, this);\n  }\n  _onAnchorScroll(event) {\n    if (!this.rendered) {\n      // Scroll events may be fired delayed, even if scroll listener are already removed.\n      return;\n    }\n    if (this.scrollType === 'position') {\n      this.position();\n    } else if (this.scrollType === 'remove') {\n      this.destroy();\n    }\n  }\n  _onDocumentMouseDown(event) {\n    if (!this.rendered) {\n      return false;\n    }\n    if (this._isMouseDownOutside(event)) {\n      this._onMouseDownOutside(event);\n    }\n  }\n  _isMouseDownOutside(event) {\n    let $target = $(event.target),\n      targetWidget = scout.widget($target);\n\n    // Only remove the tooltip if the click is outside of the container or the $anchor (= status icon)\n    // Also ignore clicks if the tooltip is covert by a glasspane\n    return !this.isOrHas(targetWidget) && this.$anchor && !this.$anchor.isOrHas($target[0]) && !this.session.focusManager.isElementCovertByGlassPane(this.$container[0]);\n  }\n\n  /**\n   * Method invoked once a mouse down event occurs outside the tooltip.\n   */\n  _onMouseDownOutside() {\n    this.destroy();\n  }\n  _onDocumentKeyDown(event) {\n    if (scout.isOneOf(event.which, keys.CTRL, keys.SHIFT, keys.ALT, keys.NUM_LOCK, keys.CAPS_LOCK, keys.SCROLL_LOCK, keys.WIN_LEFT, keys.WIN_RIGHT, keys.SELECT, keys.PAUSE, keys.PRINT_SCREEN)) {\n      return;\n    }\n    this.destroy();\n  }\n}","map":{"version":3,"names":["arrays","Form","graphics","keys","scout","scrollbars","Status","strings","Widget","$","Tooltip","constructor","text","severity","Severity","INFO","arrowPosition","arrowPositionUnit","windowPaddingX","windowPaddingY","origin","originRelativeToParent","$anchor","autoRemove","tooltipPosition","tooltipDirection","scrollType","htmlEnabled","$arrow","$content","menus","_addWidgetProperties","_openLater","render","$parent","$tooltipParent","entryPoint","length","isAttached","_render","$container","appendDiv","data","cssClass","addClass","_renderText","_renderSeverity","_renderMenus","_mouseDownHandler","_onDocumentMouseDown","bind","document","addEventListener","_keydownHandler","_onDocumentKeyDown","on","_anchorScrollHandler","_onAnchorScroll","onScroll","dialog","parent","isDialog","_moveHandler","position","_postRender","_remove","removeEventListener","off","offScroll","$menus","_onAttach","rendered","_renderOnDetach","remove","_onDetach","_isRemovalPrevented","removalPending","setText","setProperty","setSeverity","html","nl2br","setVisible","toggleClass","rendering","removeClass","SEVERITY_CSS_CLASSES","cssClassForSeverity","setMenus","ensure","maxIconWidth","forEach","menu","iconWidth","iconId","get$Icon","outerWidth","Math","max","$text","cssPaddingLeft","cssLeft","cssTop","top","left","arrowSizeX","arrowSizeY","overlapX","overlapY","x","y","tooltipWidth","tooltipHeight","inView","offsetBounds","width","isLocationInView","scrollParent","parentOffset","offset","outerHeight","height","min","cssBorderLeftWidth","popup","event","destroy","_isMouseDownOutside","_onMouseDownOutside","$target","target","targetWidget","widget","isOrHas","session","focusManager","isElementCovertByGlassPane","isOneOf","which","CTRL","SHIFT","ALT","NUM_LOCK","CAPS_LOCK","SCROLL_LOCK","WIN_LEFT","WIN_RIGHT","SELECT","PAUSE","PRINT_SCREEN"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/tooltip/Tooltip.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, Form, graphics, keys, scout, scrollbars, Status, strings, Widget} from '../index';\nimport $ from 'jquery';\n\nexport default class Tooltip extends Widget {\n\n  constructor() {\n    super();\n\n    /**\n     * Either a String or a function which returns a String\n     */\n    this.text = null;\n    this.severity = Status.Severity.INFO;\n    this.arrowPosition = 16;\n    this.arrowPositionUnit = 'px';\n    this.windowPaddingX = 10;\n    this.windowPaddingY = 5;\n    this.origin = null;\n\n    /**\n     * When the origin point is calculated using $element.offset(),\n     * the result is absolute to the window. When positioning the tooltip, the $parent's offset must\n     * be subtracted. When the given origin is already relative to the parent, set this option to\n     * \"true\" to disable this additional calculation.\n     */\n    this.originRelativeToParent = false;\n    this.$anchor = null;\n    this.autoRemove = true;\n    this.tooltipPosition = 'top';\n    this.tooltipDirection = 'right';\n    this.scrollType = 'position';\n    this.htmlEnabled = false;\n    this.$arrow = null;\n    this.$content = null;\n    this.menus = [];\n    this._addWidgetProperties(['menus']);\n\n    this._openLater = false;\n  }\n\n  render($parent) {\n    // Use entry point by default\n    let $tooltipParent = $parent || this.entryPoint();\n    // when the parent is detached it is not possible to render the popup -> do it later\n    if (!$tooltipParent || !$tooltipParent.length || !$tooltipParent.isAttached()) {\n      this._openLater = true;\n      this.$parent = $tooltipParent;\n      return;\n    }\n    super.render($tooltipParent);\n  }\n\n  _render() {\n    this.$container = this.$parent\n      .appendDiv('tooltip')\n      .data('tooltip', this);\n\n    if (this.cssClass) {\n      this.$container.addClass(this.cssClass);\n    }\n\n    this.$arrow = this.$container.appendDiv('tooltip-arrow');\n    this.$content = this.$container.appendDiv('tooltip-content');\n    this._renderText();\n    this._renderSeverity();\n    this._renderMenus();\n\n    if (this.autoRemove) {\n      // Every user action will remove the tooltip\n      this._mouseDownHandler = this._onDocumentMouseDown.bind(this);\n      // The listener needs to be executed in the capturing phase -> Allows for having context menus inside the tooltip, otherwise click on context menu header would close the tooltip\n      this.$container.document(true).addEventListener('mousedown', this._mouseDownHandler, true); // true=the event handler is executed in the capturing phase\n\n      this._keydownHandler = this._onDocumentKeyDown.bind(this);\n      this.$container.document()\n        .on('keydown', this._keydownHandler);\n    }\n\n    if (this.$anchor && this.scrollType) {\n      this._anchorScrollHandler = this._onAnchorScroll.bind(this);\n      scrollbars.onScroll(this.$anchor, this._anchorScrollHandler);\n    }\n\n    // If the tooltip is rendered inside a (popup) dialog, get a reference to the dialog.\n    this.dialog = null;\n    let parent = this.parent;\n    while (parent) {\n      if (parent instanceof Form && parent.isDialog()) {\n        this.dialog = parent;\n        break;\n      }\n      parent = parent.parent;\n    }\n\n    // If inside a dialog, attach a listener to reposition the tooltip when the dialog is moved\n    if (this.dialog) {\n      this._moveHandler = this.position.bind(this);\n      this.dialog.on('move', this._moveHandler);\n    }\n  }\n\n  _postRender() {\n    super._postRender();\n    this.position();\n  }\n\n  _remove() {\n    if (this._mouseDownHandler) {\n      this.$container.document(true).removeEventListener('mousedown', this._mouseDownHandler, true);\n      this._mouseDownHandler = null;\n    }\n    if (this._keydownHandler) {\n      this.$container.document().off('keydown', this._keydownHandler);\n      this._keydownHandler = null;\n    }\n    if (this._anchorScrollHandler) {\n      scrollbars.offScroll(this._anchorScrollHandler);\n      this._anchorScrollHandler = null;\n    }\n    if (this._moveHandler) {\n      if (this.dialog) {\n        this.dialog.off('move', this._moveHandler);\n      }\n      this._moveHandler = null;\n    }\n    this.dialog = null;\n    this.$menus = null;\n    super._remove();\n  }\n\n  _onAttach() {\n    super._onAttach();\n    if (this._openLater && !this.rendered) {\n      this._openLater = false;\n      this.render();\n    }\n  }\n\n  _renderOnDetach() {\n    this._openLater = true;\n    this.remove();\n    super._onDetach();\n  }\n\n  _isRemovalPrevented() {\n    // If removal of a parent is pending due to an animation then don't return true to make sure tooltips are closed before the parent animation starts.\n    // However, if the tooltip itself is removed by an animation, removal should be prevented to ensure remove() won't run multiple times.\n    return this.removalPending;\n  }\n\n  setText(text) {\n    this.setProperty('text', text);\n  }\n\n  setSeverity(severity) {\n    this.setProperty('severity', severity);\n  }\n\n  _renderText() {\n    let text = this.text || '';\n    if (this.htmlEnabled) {\n      this.$content.html(text);\n    } else {\n      // use nl2br to allow tooltips with line breaks\n      this.$content.html(strings.nl2br(text));\n    }\n    this.$content.setVisible(!!text);\n    this.$container.toggleClass('no-text', !text);\n    if (!this.rendering) {\n      this.position();\n    }\n  }\n\n  _renderSeverity() {\n    this.$container.removeClass(Status.SEVERITY_CSS_CLASSES);\n    this.$container.addClass(Status.cssClassForSeverity(this.severity));\n  }\n\n  setMenus(menus) {\n    menus = arrays.ensure(menus);\n    this.setProperty('menus', menus);\n  }\n\n  _renderMenus() {\n    let maxIconWidth = 0,\n      menus = this.menus;\n\n    if (menus.length > 0 && !this.$menus) {\n      this.$menus = this.$container.appendDiv('tooltip-menus');\n    } else if (menus.length === 0 && this.$menus) {\n      this.$menus.remove();\n      this.$menus = null;\n    }\n\n    // Render menus\n    menus.forEach(function(menu) {\n      let iconWidth = 0;\n      menu.render(this.$menus);\n      if (menu.iconId) {\n        iconWidth = menu.get$Icon().outerWidth(true);\n        maxIconWidth = Math.max(iconWidth, maxIconWidth);\n      }\n    }, this);\n\n    // Align menus if there is one with an icon\n    if (maxIconWidth > 0) {\n      menus.forEach(menu => {\n        if (!menu.iconId) {\n          menu.$text.cssPaddingLeft(maxIconWidth);\n        } else {\n          menu.$text.cssPaddingLeft(maxIconWidth - menu.get$Icon().outerWidth(true));\n        }\n      }, this);\n    }\n\n    this.$container.toggleClass('has-menus', menus.length > 0);\n\n    if (!this.rendering) {\n      // New text might be shorter or longer -> recompute position.\n      // Resetting the current position first ensures that the position is computed the\n      // same as if the tooltip was opened initially with the new text, even when the tooltip\n      // is at the right side of the screen. Otherwise, text wrapping might occur.\n      this.$container.cssLeft('').cssTop('');\n      this.position();\n    }\n  }\n\n  position() {\n    let top, left, arrowSizeX, arrowSizeY, overlapX, overlapY, x, y, origin,\n      tooltipWidth, tooltipHeight, arrowPosition, inView;\n\n    if (this.origin) {\n      origin = this.origin;\n      x = origin.x;\n    } else {\n      origin = graphics.offsetBounds(this.$anchor);\n      x = origin.x + origin.width / 2;\n    }\n    y = origin.y;\n\n    if (this.$anchor) {\n      // Sticky tooltip must only be visible if the location where the tooltip points is in view (prevents that the tooltip points at an invisible anchor)\n      inView = scrollbars.isLocationInView(origin, this.$anchor.scrollParent());\n      this.$container.setVisible(inView);\n    }\n\n    // this.$parent might not be at (0,0) of the document\n    if (!this.originRelativeToParent) {\n      let parentOffset = this.$parent.offset();\n      x -= parentOffset.left;\n      y -= parentOffset.top;\n    }\n\n    arrowSizeX = 7;\n    arrowSizeY = 4;\n\n    tooltipHeight = this.$container.outerHeight();\n    tooltipWidth = this.$container.outerWidth();\n\n    // Compute actual arrow position if position is provided in percentage\n    arrowPosition = this.arrowPosition;\n    if (this.arrowPositionUnit === '%') {\n      arrowPosition = tooltipWidth * this.arrowPosition / 100;\n    }\n    if (this.tooltipDirection === 'left') {\n      arrowPosition = tooltipWidth - arrowPosition;\n    }\n\n    top = y - tooltipHeight - arrowSizeY;\n    left = x - arrowPosition;\n    overlapX = left + tooltipWidth + this.windowPaddingX - this.$parent.width();\n    overlapY = top - this.windowPaddingY;\n\n    // Move tooltip to the left until it gets fully visible\n    if (overlapX > 0) {\n      left -= overlapX;\n      arrowPosition = x - left;\n    }\n    // Move tooltip to the right if it overlaps the left edge\n    if (left < this.windowPaddingX) {\n      left = this.windowPaddingX;\n      arrowPosition = x - this.windowPaddingX;\n    }\n\n    // Move tooltip to the bottom, arrow on top\n    this.$arrow.removeClass('arrow-top arrow-bottom');\n    if (this.tooltipPosition === 'bottom' || overlapY < 0) {\n      this.$arrow.addClass('arrow-top');\n      top = y + origin.height + arrowSizeY;\n    } else {\n      this.$arrow.addClass('arrow-bottom');\n    }\n\n    // Make sure arrow is never positioned outside of the tooltip\n    arrowPosition = Math.min(arrowPosition, this.$container.outerWidth() - arrowSizeX);\n    arrowPosition = Math.max(arrowPosition, arrowSizeX);\n    this.$arrow.cssLeft(arrowPosition - this.$arrow.cssBorderLeftWidth());\n    this.$container\n      .cssLeft(left)\n      .cssTop(top);\n\n    // If there are menu popups make sure they are positioned correctly\n    this.menus.forEach(menu => {\n      if (menu.popup) {\n        menu.popup.position();\n      }\n    }, this);\n  }\n\n  _onAnchorScroll(event) {\n    if (!this.rendered) {\n      // Scroll events may be fired delayed, even if scroll listener are already removed.\n      return;\n    }\n    if (this.scrollType === 'position') {\n      this.position();\n    } else if (this.scrollType === 'remove') {\n      this.destroy();\n    }\n  }\n\n  _onDocumentMouseDown(event) {\n    if (!this.rendered) {\n      return false;\n    }\n    if (this._isMouseDownOutside(event)) {\n      this._onMouseDownOutside(event);\n    }\n  }\n\n  _isMouseDownOutside(event) {\n    let $target = $(event.target),\n      targetWidget = scout.widget($target);\n\n    // Only remove the tooltip if the click is outside of the container or the $anchor (= status icon)\n    // Also ignore clicks if the tooltip is covert by a glasspane\n    return !this.isOrHas(targetWidget) &&\n      (this.$anchor && !this.$anchor.isOrHas($target[0])) &&\n      !this.session.focusManager.isElementCovertByGlassPane(this.$container[0]);\n  }\n\n  /**\n   * Method invoked once a mouse down event occurs outside the tooltip.\n   */\n  _onMouseDownOutside() {\n    this.destroy();\n  }\n\n  _onDocumentKeyDown(event) {\n    if (scout.isOneOf(event.which,\n      keys.CTRL, keys.SHIFT, keys.ALT,\n      keys.NUM_LOCK, keys.CAPS_LOCK, keys.SCROLL_LOCK,\n      keys.WIN_LEFT, keys.WIN_RIGHT, keys.SELECT,\n      keys.PAUSE, keys.PRINT_SCREEN)) {\n      return;\n    }\n\n    this.destroy();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}