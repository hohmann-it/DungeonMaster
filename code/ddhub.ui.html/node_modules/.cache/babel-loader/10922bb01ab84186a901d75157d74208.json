{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { AbstractLayout, Dimension, graphics } from '../../index';\nexport default class PageLayout extends AbstractLayout {\n  constructor(outline, page) {\n    super();\n    this.outline = outline;\n    this.page = page;\n  }\n  layout($container) {\n    let containerSize,\n      detailMenuBarSize,\n      htmlContainer = this.page.htmlComp,\n      $text = this.page.$text,\n      $icon = this.page.$icon(),\n      titleHeight = 0,\n      iconHeight = 0,\n      nodeMenuBar = this.outline.nodeMenuBar,\n      nodeMenuBarPrefSize = 0,\n      detailMenuBar = this.outline.detailMenuBar,\n      detailMenuBarHeight = 0,\n      textWidth = 0;\n    containerSize = htmlContainer.availableSize({\n      exact: true\n    }) // exact is important to calculate text width correctly and to prevent node menubar from wrapping\n    .subtract(htmlContainer.insets());\n    textWidth = containerSize.width;\n    if ($icon.length > 0) {\n      textWidth -= graphics.prefSize($icon).width;\n    }\n    if (nodeMenuBar.visible) {\n      nodeMenuBarPrefSize = nodeMenuBar.htmlComp.prefSize();\n      nodeMenuBar.htmlComp.setSize(nodeMenuBarPrefSize);\n      textWidth -= nodeMenuBarPrefSize.add(nodeMenuBar.htmlComp.margins()).width;\n    }\n    $text.cssWidth(textWidth);\n    if (detailMenuBar.visible) {\n      detailMenuBarHeight = detailMenuBar.htmlComp.prefSize().height;\n      detailMenuBarSize = new Dimension(containerSize.width, detailMenuBarHeight).subtract(detailMenuBar.htmlComp.margins());\n      detailMenuBar.htmlComp.setSize(detailMenuBarSize);\n    }\n    if (this.outline.detailContent) {\n      if ($icon.length > 0) {\n        iconHeight = $icon.outerHeight(true);\n      }\n      if ($text.isVisible()) {\n        titleHeight = $text.outerHeight(true);\n      }\n      titleHeight = Math.max(titleHeight, iconHeight);\n      let htmlDetailContent = this.outline.detailContent.htmlComp;\n      htmlDetailContent.setSize(new Dimension(containerSize.width, containerSize.height - titleHeight - detailMenuBarHeight - htmlDetailContent.margins().vertical()));\n    }\n  }\n  preferredLayoutSize($container, options) {\n    let prefSize,\n      textHeight,\n      iconHeight = 0,\n      htmlContainer = this.page.htmlComp,\n      detailContentPrefSize = new Dimension(),\n      $text = this.page.$text,\n      $icon = this.page.$icon(),\n      titlePrefHeight = 0,\n      detailMenuBar = this.outline.detailMenuBar,\n      detailMenuBarPrefSize = new Dimension(),\n      nodeMenuBar = this.outline.nodeMenuBar,\n      textWidth = 0;\n    textWidth = options.widthHint;\n    if ($icon.length > 0) {\n      textWidth -= graphics.prefSize($icon).width;\n    }\n    if (nodeMenuBar.visible && nodeMenuBar.rendered) {\n      textWidth -= nodeMenuBar.htmlComp.prefSize().width;\n    }\n\n    // needs a width to be able to calculate the pref height\n    textHeight = graphics.prefSize($text, {\n      includeMargin: true,\n      widthHint: textWidth,\n      enforceSizeHints: true,\n      exact: true\n    }).height;\n    if ($icon.length > 0) {\n      iconHeight = $icon.outerHeight(true);\n    }\n    titlePrefHeight = Math.max(textHeight, iconHeight);\n    if (detailMenuBar.visible && detailMenuBar.rendered) {\n      detailMenuBarPrefSize = detailMenuBar.htmlComp.prefSize();\n    }\n    if (this.outline.detailContent) {\n      let htmlDetailContent = this.outline.detailContent.htmlComp;\n      options = $.extend({}, options, {\n        enforceSizeHints: true,\n        exact: true\n      });\n      detailContentPrefSize = htmlDetailContent.prefSize(options).add(htmlDetailContent.margins());\n    }\n    prefSize = new Dimension(Math.max(detailContentPrefSize.width, detailMenuBarPrefSize.width), titlePrefHeight + detailMenuBarPrefSize.height + detailContentPrefSize.height);\n    prefSize = prefSize.add(htmlContainer.insets());\n    return prefSize;\n  }\n}","map":{"version":3,"names":["AbstractLayout","Dimension","graphics","PageLayout","constructor","outline","page","layout","$container","containerSize","detailMenuBarSize","htmlContainer","htmlComp","$text","$icon","titleHeight","iconHeight","nodeMenuBar","nodeMenuBarPrefSize","detailMenuBar","detailMenuBarHeight","textWidth","availableSize","exact","subtract","insets","width","length","prefSize","visible","setSize","add","margins","cssWidth","height","detailContent","outerHeight","isVisible","Math","max","htmlDetailContent","vertical","preferredLayoutSize","options","textHeight","detailContentPrefSize","titlePrefHeight","detailMenuBarPrefSize","widthHint","rendered","includeMargin","enforceSizeHints","$","extend"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/desktop/outline/PageLayout.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {AbstractLayout, Dimension, graphics} from '../../index';\n\nexport default class PageLayout extends AbstractLayout {\n\n  constructor(outline, page) {\n    super();\n    this.outline = outline;\n    this.page = page;\n  }\n\n  layout($container) {\n    let containerSize, detailMenuBarSize,\n      htmlContainer = this.page.htmlComp,\n      $text = this.page.$text,\n      $icon = this.page.$icon(),\n      titleHeight = 0,\n      iconHeight = 0,\n      nodeMenuBar = this.outline.nodeMenuBar,\n      nodeMenuBarPrefSize = 0,\n      detailMenuBar = this.outline.detailMenuBar,\n      detailMenuBarHeight = 0,\n      textWidth = 0;\n\n    containerSize = htmlContainer.availableSize({exact: true}) // exact is important to calculate text width correctly and to prevent node menubar from wrapping\n      .subtract(htmlContainer.insets());\n    textWidth = containerSize.width;\n\n    if ($icon.length > 0) {\n      textWidth -= graphics.prefSize($icon).width;\n    }\n\n    if (nodeMenuBar.visible) {\n      nodeMenuBarPrefSize = nodeMenuBar.htmlComp.prefSize();\n      nodeMenuBar.htmlComp.setSize(nodeMenuBarPrefSize);\n      textWidth -= nodeMenuBarPrefSize.add(nodeMenuBar.htmlComp.margins()).width;\n    }\n\n    $text.cssWidth(textWidth);\n\n    if (detailMenuBar.visible) {\n      detailMenuBarHeight = detailMenuBar.htmlComp.prefSize().height;\n      detailMenuBarSize = new Dimension(containerSize.width, detailMenuBarHeight)\n        .subtract(detailMenuBar.htmlComp.margins());\n      detailMenuBar.htmlComp.setSize(detailMenuBarSize);\n    }\n\n    if (this.outline.detailContent) {\n      if ($icon.length > 0) {\n        iconHeight = $icon.outerHeight(true);\n      }\n      if ($text.isVisible()) {\n        titleHeight = $text.outerHeight(true);\n      }\n      titleHeight = Math.max(titleHeight, iconHeight);\n      let htmlDetailContent = this.outline.detailContent.htmlComp;\n      htmlDetailContent.setSize(new Dimension(containerSize.width, containerSize.height - titleHeight - detailMenuBarHeight - htmlDetailContent.margins().vertical()));\n    }\n  }\n\n  preferredLayoutSize($container, options) {\n    let prefSize, textHeight,\n      iconHeight = 0,\n      htmlContainer = this.page.htmlComp,\n      detailContentPrefSize = new Dimension(),\n      $text = this.page.$text,\n      $icon = this.page.$icon(),\n      titlePrefHeight = 0,\n      detailMenuBar = this.outline.detailMenuBar,\n      detailMenuBarPrefSize = new Dimension(),\n      nodeMenuBar = this.outline.nodeMenuBar,\n      textWidth = 0;\n\n    textWidth = options.widthHint;\n\n    if ($icon.length > 0) {\n      textWidth -= graphics.prefSize($icon).width;\n    }\n\n    if (nodeMenuBar.visible && nodeMenuBar.rendered) {\n      textWidth -= nodeMenuBar.htmlComp.prefSize().width;\n    }\n\n    // needs a width to be able to calculate the pref height\n    textHeight = graphics.prefSize($text, {\n      includeMargin: true,\n      widthHint: textWidth,\n      enforceSizeHints: true,\n      exact: true\n    }).height;\n\n    if ($icon.length > 0) {\n      iconHeight = $icon.outerHeight(true);\n    }\n    titlePrefHeight = Math.max(textHeight, iconHeight);\n\n    if (detailMenuBar.visible && detailMenuBar.rendered) {\n      detailMenuBarPrefSize = detailMenuBar.htmlComp.prefSize();\n    }\n    if (this.outline.detailContent) {\n      let htmlDetailContent = this.outline.detailContent.htmlComp;\n      options = $.extend({}, options, {enforceSizeHints: true, exact: true});\n      detailContentPrefSize = htmlDetailContent.prefSize(options).add(htmlDetailContent.margins());\n    }\n\n    prefSize = new Dimension(Math.max(detailContentPrefSize.width, detailMenuBarPrefSize.width), titlePrefHeight + detailMenuBarPrefSize.height + detailContentPrefSize.height);\n    prefSize = prefSize.add(htmlContainer.insets());\n    return prefSize;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}