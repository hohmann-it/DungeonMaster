{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { CompositeField, FormField, graphics, objects, Widget } from '../../index';\n\n/**\n * JavaScript port of org.eclipse.scout.rt.ui.swing.form.fields.SwingScoutFormFieldGridData.\n * Merged with the base class LogicalGridData (for the default values). We don't need the base\n * class standalone, since we only used LGL for the group-box body in Html UI.\n */\nexport default class LogicalGridData {\n  constructor(vararg) {\n    this.gridx = 0;\n    this.gridy = 0;\n    this.gridw = 1;\n    this.gridh = 1;\n    this.weightx = 0.0;\n    this.weighty = 0.0;\n    this.useUiWidth = false;\n    this.useUiHeight = false;\n    this.widthHint = 0;\n    this.heightHint = 0;\n    this.horizontalAlignment = -1;\n    this.verticalAlignment = -1;\n    this.fillHorizontal = true;\n    this.fillVertical = true;\n    if (vararg instanceof LogicalGridData) {\n      // copy properties from LGD template\n      objects.copyProperties(vararg, this);\n    } else if (vararg instanceof Widget) {\n      // work with widget / validate\n      this.widget = vararg;\n    } else {\n      // NOP - default CTOR\n    }\n  }\n  validate() {\n    if (!this.widget) {\n      return;\n    }\n    let data = this.widget.gridData;\n    // setup constraints\n    this.gridx = data.x;\n    this.gridy = data.y;\n    this.gridw = data.w;\n    this.gridh = data.h;\n    this.weightx = data.weightX;\n    this.weighty = data.weightY;\n    if (this.weightx < 0) {\n      // inherit\n      this.weightx = Math.max(1.0, this.gridw);\n    }\n    if (this.weighty < 0) {\n      // inherit\n      this.weighty = this._inheritWeightY();\n    }\n    this.useUiWidth = data.useUiWidth;\n    this.useUiHeight = data.useUiHeight;\n    this.horizontalAlignment = data.horizontalAlignment;\n    this.verticalAlignment = data.verticalAlignment;\n    this.fillHorizontal = data.fillHorizontal;\n    this.fillVertical = data.fillVertical;\n    this.widthHint = data.widthInPixel;\n    this.heightHint = data.heightInPixel;\n\n    // when having the label on top, the row height has to be increased\n    if (this.widget.labelVisible && this.widget.$label && this.widget.labelPosition === FormField.LabelPosition.TOP) {\n      this.logicalRowHeightAddition = graphics.prefSize(this.widget.$label, true).height;\n    } else {\n      this.logicalRowHeightAddition = 0;\n    }\n  }\n  _inheritWeightY() {\n    let d = this._inheritWeightYRec(this.widget);\n    if (d === null) {\n      let data = this.widget.gridData;\n      if (data.weightY >= 0) {\n        d = data.weightY;\n      } else {\n        d = data.h >= 2 ? data.h : 0;\n      }\n    }\n    return d;\n  }\n  _inheritWeightYRec(widget) {\n    let found = false,\n      sumWy = 0;\n\n    // The children may have a dirty grid -> make sure the grid is valid before reading any grid data properties\n    widget.validateLogicalGrid();\n    if (widget instanceof CompositeField) {\n      let i,\n        inheritWeightY,\n        child,\n        children = widget.getFields();\n      for (i = 0; i < children.length; i++) {\n        child = children[i];\n        if (child.isVisible()) {\n          let data = child.gridData;\n          if (data.weightY < 0) {\n            inheritWeightY = this._inheritWeightYRec(child);\n            if (inheritWeightY !== null) {\n              found = true;\n              sumWy += inheritWeightY;\n            }\n          } else {\n            found = true;\n            sumWy += data.weightY;\n          }\n        }\n      }\n    } else {\n      sumWy = widget.gridData.h >= 2 ? widget.gridData.h : 0;\n      found = true;\n    }\n    if (found) {\n      return sumWy;\n    }\n    return null;\n  }\n  isValidateRoot() {\n    return !this.useUiHeight && !this.useUiWidth && this.fillVertical && this.fillHorizontal;\n  }\n}","map":{"version":3,"names":["CompositeField","FormField","graphics","objects","Widget","LogicalGridData","constructor","vararg","gridx","gridy","gridw","gridh","weightx","weighty","useUiWidth","useUiHeight","widthHint","heightHint","horizontalAlignment","verticalAlignment","fillHorizontal","fillVertical","copyProperties","widget","validate","data","gridData","x","y","w","h","weightX","weightY","Math","max","_inheritWeightY","widthInPixel","heightInPixel","labelVisible","$label","labelPosition","LabelPosition","TOP","logicalRowHeightAddition","prefSize","height","d","_inheritWeightYRec","found","sumWy","validateLogicalGrid","i","inheritWeightY","child","children","getFields","length","isVisible","isValidateRoot"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/layout/logicalgrid/LogicalGridData.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {CompositeField, FormField, graphics, objects, Widget} from '../../index';\n\n/**\n * JavaScript port of org.eclipse.scout.rt.ui.swing.form.fields.SwingScoutFormFieldGridData.\n * Merged with the base class LogicalGridData (for the default values). We don't need the base\n * class standalone, since we only used LGL for the group-box body in Html UI.\n */\nexport default class LogicalGridData {\n\n  constructor(vararg) {\n    this.gridx = 0;\n    this.gridy = 0;\n    this.gridw = 1;\n    this.gridh = 1;\n    this.weightx = 0.0;\n    this.weighty = 0.0;\n    this.useUiWidth = false;\n    this.useUiHeight = false;\n    this.widthHint = 0;\n    this.heightHint = 0;\n    this.horizontalAlignment = -1;\n    this.verticalAlignment = -1;\n    this.fillHorizontal = true;\n    this.fillVertical = true;\n\n    if (vararg instanceof LogicalGridData) {\n      // copy properties from LGD template\n      objects.copyProperties(vararg, this);\n    } else if (vararg instanceof Widget) {\n      // work with widget / validate\n      this.widget = vararg;\n    } else {\n      // NOP - default CTOR\n    }\n  }\n\n  validate() {\n    if (!this.widget) {\n      return;\n    }\n\n    let data = this.widget.gridData;\n    // setup constraints\n    this.gridx = data.x;\n    this.gridy = data.y;\n    this.gridw = data.w;\n    this.gridh = data.h;\n    this.weightx = data.weightX;\n    this.weighty = data.weightY;\n    if (this.weightx < 0) {\n      // inherit\n      this.weightx = Math.max(1.0, this.gridw);\n    }\n    if (this.weighty < 0) {\n      // inherit\n      this.weighty = this._inheritWeightY();\n    }\n    this.useUiWidth = data.useUiWidth;\n    this.useUiHeight = data.useUiHeight;\n    this.horizontalAlignment = data.horizontalAlignment;\n    this.verticalAlignment = data.verticalAlignment;\n    this.fillHorizontal = data.fillHorizontal;\n    this.fillVertical = data.fillVertical;\n    this.widthHint = data.widthInPixel;\n    this.heightHint = data.heightInPixel;\n\n    // when having the label on top, the row height has to be increased\n    if (this.widget.labelVisible && this.widget.$label && this.widget.labelPosition === FormField.LabelPosition.TOP) {\n      this.logicalRowHeightAddition = graphics.prefSize(this.widget.$label, true).height;\n    } else {\n      this.logicalRowHeightAddition = 0;\n    }\n  }\n\n  _inheritWeightY() {\n    let d = this._inheritWeightYRec(this.widget);\n    if (d === null) {\n      let data = this.widget.gridData;\n      if (data.weightY >= 0) {\n        d = data.weightY;\n      } else {\n        d = data.h >= 2 ? data.h : 0;\n      }\n    }\n    return d;\n  }\n\n  _inheritWeightYRec(widget) {\n    let found = false,\n      sumWy = 0;\n\n    // The children may have a dirty grid -> make sure the grid is valid before reading any grid data properties\n    widget.validateLogicalGrid();\n\n    if (widget instanceof CompositeField) {\n      let i, inheritWeightY, child, children = widget.getFields();\n      for (i = 0; i < children.length; i++) {\n        child = children[i];\n        if (child.isVisible()) {\n          let data = child.gridData;\n          if (data.weightY < 0) {\n            inheritWeightY = this._inheritWeightYRec(child);\n            if (inheritWeightY !== null) {\n              found = true;\n              sumWy += inheritWeightY;\n            }\n          } else {\n            found = true;\n            sumWy += data.weightY;\n          }\n        }\n      }\n    } else {\n      sumWy = (widget.gridData.h >= 2 ? widget.gridData.h : 0);\n      found = true;\n    }\n    if (found) {\n      return sumWy;\n    }\n    return null;\n  }\n\n  isValidateRoot() {\n    return !this.useUiHeight && !this.useUiWidth && this.fillVertical && this.fillHorizontal;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}