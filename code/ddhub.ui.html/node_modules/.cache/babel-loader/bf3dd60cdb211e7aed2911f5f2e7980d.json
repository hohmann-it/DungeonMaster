{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { ColumnUserFilter, objects } from '../../index';\nimport $ from 'jquery';\nexport default class NumberColumnUserFilter extends ColumnUserFilter {\n  constructor() {\n    super();\n    this.numberFrom = null;\n    this.numberFromField = null;\n    this.numberTo = null;\n    this.numberToField = null;\n    this.hasFilterFields = true;\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  createFilterAddedEventData() {\n    let data = super.createFilterAddedEventData();\n    data.numberFrom = this.numberFrom;\n    data.numberTo = this.numberTo;\n    return data;\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  fieldsFilterActive() {\n    return objects.isNumber(this.numberFrom) || objects.isNumber(this.numberTo);\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  acceptByFields(key, normKey, row) {\n    let hasFrom = objects.isNumber(this.numberFrom),\n      hasTo = objects.isNumber(this.numberTo);\n    if (hasFrom && hasTo) {\n      return normKey >= this.numberFrom && normKey <= this.numberTo;\n    } else if (hasFrom) {\n      return normKey >= this.numberFrom;\n    } else if (hasTo) {\n      return normKey <= this.numberTo;\n    }\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  filterFieldsTitle() {\n    return this.session.text('ui.NumberRange');\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  addFilterFields(groupBox) {\n    this.numberFromField = groupBox.addFilterField('NumberField', 'ui.from');\n    this.numberFromField.decimalFormat = this.column.decimalFormat;\n    this.numberFromField.setValue(this.numberFrom);\n    this.numberFromField.on('propertyChange', this._onPropertyChange.bind(this));\n    this.numberToField = groupBox.addFilterField('NumberField', 'ui.to');\n    this.numberToField.decimalFormat = this.column.decimalFormat;\n    this.numberToField.setValue(this.numberTo);\n    this.numberToField.on('propertyChange', this._onPropertyChange.bind(this));\n  }\n  _onPropertyChange(event) {\n    if (event.propertyName !== 'value') {\n      return;\n    }\n    this.numberFrom = this.numberFromField.value;\n    this.numberTo = this.numberToField.value;\n    $.log.isDebugEnabled() && $.log.debug('(NumberColumnUserFilter#_onPropertyChange) numberFrom=' + this.numberFrom + ' numberTo=' + this.numberTo);\n    this.triggerFilterFieldsChanged(event);\n  }\n}","map":{"version":3,"names":["ColumnUserFilter","objects","$","NumberColumnUserFilter","constructor","numberFrom","numberFromField","numberTo","numberToField","hasFilterFields","createFilterAddedEventData","data","fieldsFilterActive","isNumber","acceptByFields","key","normKey","row","hasFrom","hasTo","filterFieldsTitle","session","text","addFilterFields","groupBox","addFilterField","decimalFormat","column","setValue","on","_onPropertyChange","bind","event","propertyName","value","log","isDebugEnabled","debug","triggerFilterFieldsChanged"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/table/userfilter/NumberColumnUserFilter.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {ColumnUserFilter, objects} from '../../index';\nimport $ from 'jquery';\n\nexport default class NumberColumnUserFilter extends ColumnUserFilter {\n\n  constructor() {\n    super();\n\n    this.numberFrom = null;\n    this.numberFromField = null;\n    this.numberTo = null;\n    this.numberToField = null;\n\n    this.hasFilterFields = true;\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  createFilterAddedEventData() {\n    let data = super.createFilterAddedEventData();\n    data.numberFrom = this.numberFrom;\n    data.numberTo = this.numberTo;\n    return data;\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  fieldsFilterActive() {\n    return objects.isNumber(this.numberFrom) || objects.isNumber(this.numberTo);\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  acceptByFields(key, normKey, row) {\n    let\n      hasFrom = objects.isNumber(this.numberFrom),\n      hasTo = objects.isNumber(this.numberTo);\n    if (hasFrom && hasTo) {\n      return normKey >= this.numberFrom && normKey <= this.numberTo;\n    } else if (hasFrom) {\n      return normKey >= this.numberFrom;\n    } else if (hasTo) {\n      return normKey <= this.numberTo;\n    }\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  filterFieldsTitle() {\n    return this.session.text('ui.NumberRange');\n  }\n\n  /**\n   * @override ColumnUserFilter\n   */\n  addFilterFields(groupBox) {\n    this.numberFromField = groupBox.addFilterField('NumberField', 'ui.from');\n    this.numberFromField.decimalFormat = this.column.decimalFormat;\n    this.numberFromField.setValue(this.numberFrom);\n    this.numberFromField.on('propertyChange', this._onPropertyChange.bind(this));\n\n    this.numberToField = groupBox.addFilterField('NumberField', 'ui.to');\n    this.numberToField.decimalFormat = this.column.decimalFormat;\n    this.numberToField.setValue(this.numberTo);\n    this.numberToField.on('propertyChange', this._onPropertyChange.bind(this));\n  }\n\n  _onPropertyChange(event) {\n    if (event.propertyName !== 'value') {\n      return;\n    }\n    this.numberFrom = this.numberFromField.value;\n    this.numberTo = this.numberToField.value;\n    $.log.isDebugEnabled() && $.log.debug('(NumberColumnUserFilter#_onPropertyChange) numberFrom=' + this.numberFrom + ' numberTo=' + this.numberTo);\n    this.triggerFilterFieldsChanged(event);\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,gBAAgB,EAAEC,OAAO,QAAO,aAAa;AACrD,OAAOC,CAAC,MAAM,QAAQ;AAEtB,eAAe,MAAMC,sBAAsB,SAASH,gBAAgB,CAAC;EAEnEI,WAAW,GAAG;IACZ,KAAK,EAAE;IAEP,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,aAAa,GAAG,IAAI;IAEzB,IAAI,CAACC,eAAe,GAAG,IAAI;EAC7B;;EAEA;AACF;AACA;EACEC,0BAA0B,GAAG;IAC3B,IAAIC,IAAI,GAAG,KAAK,CAACD,0BAA0B,EAAE;IAC7CC,IAAI,CAACN,UAAU,GAAG,IAAI,CAACA,UAAU;IACjCM,IAAI,CAACJ,QAAQ,GAAG,IAAI,CAACA,QAAQ;IAC7B,OAAOI,IAAI;EACb;;EAEA;AACF;AACA;EACEC,kBAAkB,GAAG;IACnB,OAAOX,OAAO,CAACY,QAAQ,CAAC,IAAI,CAACR,UAAU,CAAC,IAAIJ,OAAO,CAACY,QAAQ,CAAC,IAAI,CAACN,QAAQ,CAAC;EAC7E;;EAEA;AACF;AACA;EACEO,cAAc,CAACC,GAAG,EAAEC,OAAO,EAAEC,GAAG,EAAE;IAChC,IACEC,OAAO,GAAGjB,OAAO,CAACY,QAAQ,CAAC,IAAI,CAACR,UAAU,CAAC;MAC3Cc,KAAK,GAAGlB,OAAO,CAACY,QAAQ,CAAC,IAAI,CAACN,QAAQ,CAAC;IACzC,IAAIW,OAAO,IAAIC,KAAK,EAAE;MACpB,OAAOH,OAAO,IAAI,IAAI,CAACX,UAAU,IAAIW,OAAO,IAAI,IAAI,CAACT,QAAQ;IAC/D,CAAC,MAAM,IAAIW,OAAO,EAAE;MAClB,OAAOF,OAAO,IAAI,IAAI,CAACX,UAAU;IACnC,CAAC,MAAM,IAAIc,KAAK,EAAE;MAChB,OAAOH,OAAO,IAAI,IAAI,CAACT,QAAQ;IACjC;EACF;;EAEA;AACF;AACA;EACEa,iBAAiB,GAAG;IAClB,OAAO,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,gBAAgB,CAAC;EAC5C;;EAEA;AACF;AACA;EACEC,eAAe,CAACC,QAAQ,EAAE;IACxB,IAAI,CAAClB,eAAe,GAAGkB,QAAQ,CAACC,cAAc,CAAC,aAAa,EAAE,SAAS,CAAC;IACxE,IAAI,CAACnB,eAAe,CAACoB,aAAa,GAAG,IAAI,CAACC,MAAM,CAACD,aAAa;IAC9D,IAAI,CAACpB,eAAe,CAACsB,QAAQ,CAAC,IAAI,CAACvB,UAAU,CAAC;IAC9C,IAAI,CAACC,eAAe,CAACuB,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACC,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IAE5E,IAAI,CAACvB,aAAa,GAAGgB,QAAQ,CAACC,cAAc,CAAC,aAAa,EAAE,OAAO,CAAC;IACpE,IAAI,CAACjB,aAAa,CAACkB,aAAa,GAAG,IAAI,CAACC,MAAM,CAACD,aAAa;IAC5D,IAAI,CAAClB,aAAa,CAACoB,QAAQ,CAAC,IAAI,CAACrB,QAAQ,CAAC;IAC1C,IAAI,CAACC,aAAa,CAACqB,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACC,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC5E;EAEAD,iBAAiB,CAACE,KAAK,EAAE;IACvB,IAAIA,KAAK,CAACC,YAAY,KAAK,OAAO,EAAE;MAClC;IACF;IACA,IAAI,CAAC5B,UAAU,GAAG,IAAI,CAACC,eAAe,CAAC4B,KAAK;IAC5C,IAAI,CAAC3B,QAAQ,GAAG,IAAI,CAACC,aAAa,CAAC0B,KAAK;IACxChC,CAAC,CAACiC,GAAG,CAACC,cAAc,EAAE,IAAIlC,CAAC,CAACiC,GAAG,CAACE,KAAK,CAAC,wDAAwD,GAAG,IAAI,CAAChC,UAAU,GAAG,YAAY,GAAG,IAAI,CAACE,QAAQ,CAAC;IAChJ,IAAI,CAAC+B,0BAA0B,CAACN,KAAK,CAAC;EACxC;AACF"},"metadata":{},"sourceType":"module"}