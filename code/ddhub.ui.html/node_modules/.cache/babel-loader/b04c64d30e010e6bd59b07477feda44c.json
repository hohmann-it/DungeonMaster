{"ast":null,"code":"/*\n * Copyright (c) 2010-2020 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n\nimport { arrays, HtmlComponent, Widget, scout, BreadcrumbBarLayout } from '../index';\nexport default class BreadcrumbBar extends Widget {\n  constructor() {\n    super();\n    this.breadcrumbItems = [];\n    this._ellipsisBreadcrumbItem = null;\n    this._addWidgetProperties(['breadcrumbItems']);\n  }\n  _init(model) {\n    super._init(model);\n    this._setBreadcrumbItems(this.breadcrumbItems);\n  }\n  _render() {\n    this.$container = this.$parent.appendDiv('breadcrumb-bar');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new BreadcrumbBarLayout(this));\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderBreadcrumbItems();\n  }\n  setBreadcrumbItems(breadcrumbItems) {\n    this.setProperty('breadcrumbItems', breadcrumbItems);\n  }\n  _setBreadcrumbItems(breadcrumbItems) {\n    this._setProperty('breadcrumbItems', arrays.ensure(breadcrumbItems));\n  }\n  _renderBreadcrumbItems() {\n    this.breadcrumbItems.forEach((breadcrumbItem, index) => {\n      if (index === 1) {\n        this._renderEllipsis(); // render ellipsis after first item\n      }\n\n      breadcrumbItem.render();\n    }, this);\n    this._updateMarkers();\n    // Invalidate layout because breadcrumb bar may now be longer or shorter\n    this.htmlComp.invalidateLayoutTree();\n  }\n  _renderEllipsis() {\n    if (this._ellipsisBreadcrumbItem) {\n      this._ellipsisBreadcrumbItem.destroy();\n    }\n    if (this.breadcrumbItems.length <= 2) {\n      return;\n    }\n    this._ellipsisBreadcrumbItem = scout.create('BreadcrumbItem', {\n      parent: this,\n      text: '...',\n      enabled: false\n    });\n    this._ellipsisBreadcrumbItem.render();\n  }\n  _updateMarkers() {\n    const visibleCrumbs = [];\n    this.breadcrumbItems.forEach(breadcrumb => {\n      if (breadcrumb.rendered) {\n        breadcrumb.$container.removeClass('first last');\n        if (breadcrumb.isVisible()) {\n          visibleCrumbs.push(breadcrumb);\n        }\n      }\n    });\n    if (visibleCrumbs.length) {\n      visibleCrumbs[0].$container.addClass('first');\n      visibleCrumbs[visibleCrumbs.length - 1].$container.addClass('last');\n    }\n  }\n}","map":{"version":3,"names":["arrays","HtmlComponent","Widget","scout","BreadcrumbBarLayout","BreadcrumbBar","constructor","breadcrumbItems","_ellipsisBreadcrumbItem","_addWidgetProperties","_init","model","_setBreadcrumbItems","_render","$container","$parent","appendDiv","htmlComp","install","session","setLayout","_renderProperties","_renderBreadcrumbItems","setBreadcrumbItems","setProperty","_setProperty","ensure","forEach","breadcrumbItem","index","_renderEllipsis","render","_updateMarkers","invalidateLayoutTree","destroy","length","create","parent","text","enabled","visibleCrumbs","breadcrumb","rendered","removeClass","isVisible","push","addClass"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/breadcrumbbar/BreadcrumbBar.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2020 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\n\nimport {arrays, HtmlComponent, Widget, scout, BreadcrumbBarLayout} from '../index';\n\nexport default class BreadcrumbBar extends Widget {\n\n  constructor() {\n    super();\n    this.breadcrumbItems = [];\n    this._ellipsisBreadcrumbItem = null;\n\n    this._addWidgetProperties(['breadcrumbItems']);\n  }\n\n  _init(model) {\n    super._init(model);\n    this._setBreadcrumbItems(this.breadcrumbItems);\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('breadcrumb-bar');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new BreadcrumbBarLayout(this));\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderBreadcrumbItems();\n  }\n\n  setBreadcrumbItems(breadcrumbItems) {\n    this.setProperty('breadcrumbItems', breadcrumbItems);\n  }\n\n  _setBreadcrumbItems(breadcrumbItems) {\n    this._setProperty('breadcrumbItems', arrays.ensure(breadcrumbItems));\n  }\n\n  _renderBreadcrumbItems() {\n    this.breadcrumbItems.forEach((breadcrumbItem, index) => {\n      if (index === 1) {\n        this._renderEllipsis(); // render ellipsis after first item\n      }\n      breadcrumbItem.render();\n    }, this);\n    this._updateMarkers();\n    // Invalidate layout because breadcrumb bar may now be longer or shorter\n    this.htmlComp.invalidateLayoutTree();\n  }\n\n  _renderEllipsis() {\n    if (this._ellipsisBreadcrumbItem) {\n      this._ellipsisBreadcrumbItem.destroy();\n    }\n    if (this.breadcrumbItems.length <= 2) {\n      return;\n    }\n\n    this._ellipsisBreadcrumbItem = scout.create('BreadcrumbItem', {\n      parent: this,\n      text: '...',\n      enabled: false\n    });\n\n    this._ellipsisBreadcrumbItem.render();\n  }\n\n  _updateMarkers() {\n    const visibleCrumbs = [];\n    this.breadcrumbItems.forEach(breadcrumb => {\n      if (breadcrumb.rendered) {\n        breadcrumb.$container.removeClass('first last');\n        if (breadcrumb.isVisible()) {\n          visibleCrumbs.push(breadcrumb);\n        }\n      }\n    });\n    if (visibleCrumbs.length) {\n      visibleCrumbs[0].$container.addClass('first');\n      visibleCrumbs[visibleCrumbs.length - 1].$container.addClass('last');\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}