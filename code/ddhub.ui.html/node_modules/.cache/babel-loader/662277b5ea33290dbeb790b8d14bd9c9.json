{"ast":null,"code":"/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { NullLogger, scout, URL } from '../index';\nimport $ from 'jquery';\nimport strings from '../util/strings';\nconst Level = {\n  TRACE: 'trace',\n  DEBUG: 'debug',\n  INFO: 'info',\n  WARN: 'warn',\n  ERROR: 'error',\n  FATAL: 'fatal'\n};\nconst DEFAULT_LEVEL = Level.TRACE;\nlet initialized = false;\nlet _appendersToAdd = [];\nlet showStackTraces = true;\n\n/***\n * Loads log4javascript.min.js if logging is enabled.\n * @param [options] options\n * @param {boolean} options.enabled\n * @param {boolean} options.showPopup\n * @param options.resourceUrl\n * @returns {Promise}\n */\nexport function bootstrap(options) {\n  let location = new URL(),\n    logging = location.getParameter('logging'),\n    logLevel = location.getParameter('logLevel');\n  options = scout.nvl(options, {});\n  let enabled = !!(options.enabled || logging),\n    showPopup = !!(options.showPopup || logging),\n    resourceUrl = strings.nvl(options.resourceUrl);\n  $.log = new NullLogger();\n  if (!enabled) {\n    return $.resolvedPromise();\n  }\n  if (window.log4javascript) {\n    initLog4Javascript(logLevel, showPopup);\n    return $.resolvedPromise();\n  }\n\n  // If log4javascript is not yet installed, dynamically load the library\n  return $.injectScript(resourceUrl + 'log4javascript-1.4.9/log4javascript.js').done(initLog4Javascript.bind(this, logLevel, showPopup));\n}\nexport function initLog4Javascript(logLevel, showPopup) {\n  logLevel = scout.nvl(logLevel, DEFAULT_LEVEL);\n  log4javascript.setShowStackTraces(showStackTraces);\n  let defaultLogger = log4javascript.getDefaultLogger();\n  defaultLogger.setLevel(parseLevel(logLevel));\n  $.log = defaultLogger;\n  initialized = true;\n  if (showPopup) {\n    // To avoid problems with our CSP rule which prohibits inline scripts we set the useDocumentWrite\n    // flag to false, so the console[_uncompressed].html/js is loaded instead.\n    defaultLogger.getEffectiveAppenders().forEach(appender => {\n      appender.setUseDocumentWrite(false);\n    });\n  } else {\n    // Remove default PopUpAppender (which is the only appender at this point)\n    defaultLogger.removeAllAppenders();\n  }\n\n  // Add appenders later\n  _appendersToAdd.forEach(obj => {\n    addAppender(obj.factoryName, obj.options);\n  }, this);\n  _appendersToAdd = [];\n}\nexport function parseLevel(level) {\n  if (!level) {\n    return;\n  }\n  level = level.toLowerCase();\n  switch (level) {\n    case Level.TRACE:\n      return log4javascript.Level.TRACE;\n    case Level.DEBUG:\n      return log4javascript.Level.DEBUG;\n    case Level.INFO:\n      return log4javascript.Level.INFO;\n    case Level.WARN:\n      return log4javascript.Level.WARN;\n    case Level.ERROR:\n      return log4javascript.Level.ERROR;\n    case Level.FATAL:\n      return log4javascript.Level.FATAL;\n  }\n}\nexport function addAppender(factoryName, options) {\n  if (!initialized) {\n    _appendersToAdd.push({\n      factoryName: factoryName,\n      options: options\n    });\n    return;\n  }\n  let factory = scout.create(factoryName, options);\n  $.log.addAppender(factory.create());\n}\nexport default {\n  DEFAULT_LEVEL,\n  Level,\n  addAppender,\n  bootstrap,\n  initLog4Javascript,\n  initialized,\n  parseLevel,\n  showStackTraces\n};","map":{"version":3,"names":["NullLogger","scout","URL","$","strings","Level","TRACE","DEBUG","INFO","WARN","ERROR","FATAL","DEFAULT_LEVEL","initialized","_appendersToAdd","showStackTraces","bootstrap","options","location","logging","getParameter","logLevel","nvl","enabled","showPopup","resourceUrl","log","resolvedPromise","window","log4javascript","initLog4Javascript","injectScript","done","bind","setShowStackTraces","defaultLogger","getDefaultLogger","setLevel","parseLevel","getEffectiveAppenders","forEach","appender","setUseDocumentWrite","removeAllAppenders","obj","addAppender","factoryName","level","toLowerCase","push","factory","create"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/logging/logging.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2017 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {NullLogger, scout, URL} from '../index';\nimport $ from 'jquery';\nimport strings from '../util/strings';\n\nconst Level = {\n  TRACE: 'trace',\n  DEBUG: 'debug',\n  INFO: 'info',\n  WARN: 'warn',\n  ERROR: 'error',\n  FATAL: 'fatal'\n};\n\nconst DEFAULT_LEVEL = Level.TRACE;\nlet initialized = false;\nlet _appendersToAdd = [];\nlet showStackTraces = true;\n\n/***\n * Loads log4javascript.min.js if logging is enabled.\n * @param [options] options\n * @param {boolean} options.enabled\n * @param {boolean} options.showPopup\n * @param options.resourceUrl\n * @returns {Promise}\n */\nexport function bootstrap(options) {\n  let location = new URL(),\n    logging = location.getParameter('logging'),\n    logLevel = location.getParameter('logLevel');\n\n  options = scout.nvl(options, {});\n\n  let enabled = !!(options.enabled || logging),\n    showPopup = !!(options.showPopup || logging),\n    resourceUrl = strings.nvl(options.resourceUrl);\n\n  $.log = new NullLogger();\n  if (!enabled) {\n    return $.resolvedPromise();\n  }\n  if (window.log4javascript) {\n    initLog4Javascript(logLevel, showPopup);\n    return $.resolvedPromise();\n  }\n\n  // If log4javascript is not yet installed, dynamically load the library\n  return $.injectScript(resourceUrl + 'log4javascript-1.4.9/log4javascript.js')\n    .done(initLog4Javascript.bind(this, logLevel, showPopup));\n}\n\nexport function initLog4Javascript(logLevel, showPopup) {\n  logLevel = scout.nvl(logLevel, DEFAULT_LEVEL);\n  log4javascript.setShowStackTraces(showStackTraces);\n  let defaultLogger = log4javascript.getDefaultLogger();\n  defaultLogger.setLevel(parseLevel(logLevel));\n  $.log = defaultLogger;\n\n  initialized = true;\n\n  if (showPopup) {\n    // To avoid problems with our CSP rule which prohibits inline scripts we set the useDocumentWrite\n    // flag to false, so the console[_uncompressed].html/js is loaded instead.\n    defaultLogger.getEffectiveAppenders().forEach(appender => {\n      appender.setUseDocumentWrite(false);\n    });\n  } else {\n    // Remove default PopUpAppender (which is the only appender at this point)\n    defaultLogger.removeAllAppenders();\n  }\n\n  // Add appenders later\n  _appendersToAdd.forEach(obj => {\n    addAppender(obj.factoryName, obj.options);\n  }, this);\n  _appendersToAdd = [];\n}\n\nexport function parseLevel(level) {\n  if (!level) {\n    return;\n  }\n  level = level.toLowerCase();\n  switch (level) {\n    case Level.TRACE:\n      return log4javascript.Level.TRACE;\n    case Level.DEBUG:\n      return log4javascript.Level.DEBUG;\n    case Level.INFO:\n      return log4javascript.Level.INFO;\n    case Level.WARN:\n      return log4javascript.Level.WARN;\n    case Level.ERROR:\n      return log4javascript.Level.ERROR;\n    case Level.FATAL:\n      return log4javascript.Level.FATAL;\n  }\n}\n\nexport function addAppender(factoryName, options) {\n  if (!initialized) {\n    _appendersToAdd.push({\n      factoryName: factoryName,\n      options: options\n    });\n    return;\n  }\n\n  let factory = scout.create(factoryName, options);\n  $.log.addAppender(factory.create());\n}\n\nexport default {\n  DEFAULT_LEVEL,\n  Level,\n  addAppender,\n  bootstrap,\n  initLog4Javascript,\n  initialized,\n  parseLevel,\n  showStackTraces\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}