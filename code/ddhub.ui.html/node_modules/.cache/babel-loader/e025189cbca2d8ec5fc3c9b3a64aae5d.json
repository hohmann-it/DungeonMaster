{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { Form, FormTableControlLayout, GroupBox, TabBox, TableControl } from '../../index';\nexport default class FormTableControl extends TableControl {\n  constructor() {\n    super();\n    this._addWidgetProperties('form');\n    this._formDestroyedHandler = this._onFormDestroyed.bind(this);\n  }\n  _init(model) {\n    super._init(model);\n    this._setForm(this.form);\n  }\n\n  /**\n   * @return {FormTableControlLayout}\n   */\n  _createLayout() {\n    return new FormTableControlLayout(this);\n  }\n  _renderContent($parent) {\n    this.form.renderInitialFocusEnabled = false;\n    this.form.render($parent);\n\n    // Tab box gets a special style if it is the first field in the root group box\n    let rootGroupBox = this.form.rootGroupBox;\n    if (rootGroupBox.controls[0] instanceof TabBox) {\n      rootGroupBox.controls[0].$container.addClass('in-table-control');\n    }\n    this.form.$container.height($parent.height());\n    this.form.$container.width($parent.width());\n    this.form.htmlComp.validateRoot = true;\n    this.form.htmlComp.validateLayout();\n  }\n  _removeContent() {\n    if (this.form) {\n      this.form.remove();\n    }\n  }\n  _removeForm() {\n    this.removeContent();\n  }\n  _renderForm(form) {\n    this.renderContent();\n  }\n\n  /**\n   * Returns true if the table control may be displayed (opened).\n   */\n  isContentAvailable() {\n    return !!this.form;\n  }\n  _setForm(form) {\n    if (this.form) {\n      this.form.off('destroy', this._formDestroyedHandler);\n    }\n    if (form) {\n      form.on('destroy', this._formDestroyedHandler);\n      this._adaptForm(form);\n    }\n    this._setProperty('form', form);\n  }\n  _adaptForm(form) {\n    form.rootGroupBox.setMenuBarPosition(GroupBox.MenuBarPosition.BOTTOM);\n    form.setDisplayHint(Form.DisplayHint.VIEW);\n    form.setModal(false);\n    form.setAskIfNeedSave(false);\n    form.setClosable(false);\n  }\n  onControlContainerOpened() {\n    if (!this.form || !this.form.rendered) {\n      return;\n    }\n    this.form.renderInitialFocus();\n  }\n  _onFormDestroyed(event) {\n    // Called when the inner form is destroyed --> unlink it from this table control\n    this._removeForm();\n    this._setForm(null);\n  }\n}","map":{"version":3,"names":["Form","FormTableControlLayout","GroupBox","TabBox","TableControl","FormTableControl","constructor","_addWidgetProperties","_formDestroyedHandler","_onFormDestroyed","bind","_init","model","_setForm","form","_createLayout","_renderContent","$parent","renderInitialFocusEnabled","render","rootGroupBox","controls","$container","addClass","height","width","htmlComp","validateRoot","validateLayout","_removeContent","remove","_removeForm","removeContent","_renderForm","renderContent","isContentAvailable","off","on","_adaptForm","_setProperty","setMenuBarPosition","MenuBarPosition","BOTTOM","setDisplayHint","DisplayHint","VIEW","setModal","setAskIfNeedSave","setClosable","onControlContainerOpened","rendered","renderInitialFocus","event"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/table/controls/FormTableControl.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {Form, FormTableControlLayout, GroupBox, TabBox, TableControl} from '../../index';\n\nexport default class FormTableControl extends TableControl {\n\n  constructor() {\n    super();\n    this._addWidgetProperties('form');\n\n    this._formDestroyedHandler = this._onFormDestroyed.bind(this);\n  }\n\n  _init(model) {\n    super._init(model);\n    this._setForm(this.form);\n  }\n\n  /**\n   * @return {FormTableControlLayout}\n   */\n  _createLayout() {\n    return new FormTableControlLayout(this);\n  }\n\n  _renderContent($parent) {\n    this.form.renderInitialFocusEnabled = false;\n    this.form.render($parent);\n\n    // Tab box gets a special style if it is the first field in the root group box\n    let rootGroupBox = this.form.rootGroupBox;\n    if (rootGroupBox.controls[0] instanceof TabBox) {\n      rootGroupBox.controls[0].$container.addClass('in-table-control');\n    }\n\n    this.form.$container.height($parent.height());\n    this.form.$container.width($parent.width());\n    this.form.htmlComp.validateRoot = true;\n    this.form.htmlComp.validateLayout();\n  }\n\n  _removeContent() {\n    if (this.form) {\n      this.form.remove();\n    }\n  }\n\n  _removeForm() {\n    this.removeContent();\n  }\n\n  _renderForm(form) {\n    this.renderContent();\n  }\n\n  /**\n   * Returns true if the table control may be displayed (opened).\n   */\n  isContentAvailable() {\n    return !!this.form;\n  }\n\n  _setForm(form) {\n    if (this.form) {\n      this.form.off('destroy', this._formDestroyedHandler);\n    }\n    if (form) {\n      form.on('destroy', this._formDestroyedHandler);\n      this._adaptForm(form);\n    }\n    this._setProperty('form', form);\n  }\n\n  _adaptForm(form) {\n    form.rootGroupBox.setMenuBarPosition(GroupBox.MenuBarPosition.BOTTOM);\n    form.setDisplayHint(Form.DisplayHint.VIEW);\n    form.setModal(false);\n    form.setAskIfNeedSave(false);\n    form.setClosable(false);\n  }\n\n  onControlContainerOpened() {\n    if (!this.form || !this.form.rendered) {\n      return;\n    }\n    this.form.renderInitialFocus();\n  }\n\n  _onFormDestroyed(event) {\n    // Called when the inner form is destroyed --> unlink it from this table control\n    this._removeForm();\n    this._setForm(null);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}