{"ast":null,"code":"/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { HtmlComponent, scout, Status, strings, texts, Widget } from '../index';\nimport $ from 'jquery';\nexport default class Notification extends Widget {\n  constructor() {\n    super();\n    this.status = Status.info();\n    this.closable = false;\n    this.htmlEnabled = false;\n    this._icon = null;\n  }\n  _init(model) {\n    super._init(model);\n\n    // this allows to set the properties severity and message directly on the model object\n    // without having a status object. because it's more convenient when you must create\n    // a notification programmatically.\n    if (model.severity || model.message || model.iconId) {\n      this.status = new Status({\n        severity: scout.nvl(model.severity, this.status.severity),\n        message: scout.nvl(model.message, this.status.message),\n        iconId: scout.nvl(model.iconId, this.status.iconId)\n      });\n    }\n    texts.resolveTextProperty(this.status, 'message', this.session);\n    this._setStatus(this.status);\n  }\n  _render() {\n    this.$container = this.$parent.appendDiv('notification');\n    this.$content = this.$container.appendDiv('notification-content');\n    this.$messageText = this.$content.appendDiv('notification-message');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n  }\n  _remove() {\n    super._remove();\n    this._removeCloser();\n    this._removeIcon();\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._renderStatus();\n    this._renderClosable();\n  }\n  setStatus(status) {\n    this.setProperty('status', status);\n  }\n  _setStatus(status) {\n    if (this.rendered) {\n      this._removeStatus();\n    }\n    status = Status.ensure(status);\n    this._setProperty('status', status);\n  }\n  _removeStatus() {\n    if (this.status) {\n      this.$container.removeClass(this.status.cssClass());\n    }\n  }\n  _renderStatus() {\n    if (this.status) {\n      this.$container.addClass(this.status.cssClass());\n      this._renderIconId();\n    }\n    this._renderMessage();\n  }\n  _renderMessage() {\n    let message = this.status.message || '';\n    if (this.htmlEnabled) {\n      this.$messageText.html(message);\n      // Add action to app-links\n      this.$messageText.find('.app-link').on('click', this._onAppLinkAction.bind(this));\n    } else {\n      this.$messageText.html(strings.nl2br(message));\n    }\n    this.invalidateLayoutTree();\n  }\n  setIconId(iconId) {\n    if (!this.status) {\n      this.status = Status.info();\n    }\n    this.status.iconId = iconId;\n    if (this.rendered) {\n      this._renderStatus();\n    }\n  }\n  _renderIconId() {\n    let hasIcon = this.status && !!this.status.iconId;\n    this.$container.toggleClass('has-icon', hasIcon);\n    this.$container.toggleClass('no-icon', !hasIcon);\n    if (hasIcon) {\n      this._renderIcon();\n    } else {\n      this._removeIcon();\n    }\n  }\n  _renderIcon() {\n    if (this._icon) {\n      this._icon.setIconDesc(this.status.iconId);\n      return;\n    }\n    this._icon = scout.create('Icon', {\n      parent: this,\n      iconDesc: this.status.iconId,\n      prepend: true\n    });\n    this._icon.one('destroy', () => {\n      this._icon = null;\n    });\n    this._icon.render();\n    this._icon.$container.addClass('notification-icon');\n  }\n  _removeIcon() {\n    if (this._icon) {\n      this._icon.destroy();\n    }\n  }\n  setClosable(closable) {\n    this.setProperty('closable', closable);\n  }\n  _renderClosable() {\n    this.$container.toggleClass('closable', this.closable);\n    this.$content.toggleClass('closable', this.closable);\n    if (!this.closable) {\n      this._removeCloser();\n    } else {\n      this._renderCloser();\n    }\n  }\n  _removeCloser() {\n    if (!this.$closer) {\n      return;\n    }\n    this.$closer.remove();\n    this.$closer = null;\n  }\n  _renderCloser() {\n    if (this.$closer) {\n      return;\n    }\n    this.$closer = this.$content.appendDiv('closer').on('click', this._onCloseIconClick.bind(this));\n  }\n  _onCloseIconClick() {\n    if (this._removing) {\n      return;\n    }\n    this.trigger('close');\n  }\n  _onAppLinkAction(event) {\n    let $target = $(event.delegateTarget);\n    let ref = $target.data('ref');\n    this.triggerAppLinkAction(ref);\n  }\n  triggerAppLinkAction(ref) {\n    this.trigger('appLinkAction', {\n      ref: ref\n    });\n  }\n}","map":{"version":3,"names":["HtmlComponent","scout","Status","strings","texts","Widget","$","Notification","constructor","status","info","closable","htmlEnabled","_icon","_init","model","severity","message","iconId","nvl","resolveTextProperty","session","_setStatus","_render","$container","$parent","appendDiv","$content","$messageText","htmlComp","install","_remove","_removeCloser","_removeIcon","_renderProperties","_renderStatus","_renderClosable","setStatus","setProperty","rendered","_removeStatus","ensure","_setProperty","removeClass","cssClass","addClass","_renderIconId","_renderMessage","html","find","on","_onAppLinkAction","bind","nl2br","invalidateLayoutTree","setIconId","hasIcon","toggleClass","_renderIcon","setIconDesc","create","parent","iconDesc","prepend","one","render","destroy","setClosable","_renderCloser","$closer","remove","_onCloseIconClick","_removing","trigger","event","$target","delegateTarget","ref","data","triggerAppLinkAction"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/notification/Notification.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2022 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {HtmlComponent, scout, Status, strings, texts, Widget} from '../index';\nimport $ from 'jquery';\n\nexport default class Notification extends Widget {\n\n  constructor() {\n    super();\n    this.status = Status.info();\n    this.closable = false;\n    this.htmlEnabled = false;\n    this._icon = null;\n  }\n\n  _init(model) {\n    super._init(model);\n\n    // this allows to set the properties severity and message directly on the model object\n    // without having a status object. because it's more convenient when you must create\n    // a notification programmatically.\n    if (model.severity || model.message || model.iconId) {\n      this.status = new Status({\n        severity: scout.nvl(model.severity, this.status.severity),\n        message: scout.nvl(model.message, this.status.message),\n        iconId: scout.nvl(model.iconId, this.status.iconId)\n      });\n    }\n    texts.resolveTextProperty(this.status, 'message', this.session);\n    this._setStatus(this.status);\n  }\n\n  _render() {\n    this.$container = this.$parent.appendDiv('notification');\n    this.$content = this.$container.appendDiv('notification-content');\n    this.$messageText = this.$content.appendDiv('notification-message');\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n  }\n\n  _remove() {\n    super._remove();\n    this._removeCloser();\n    this._removeIcon();\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._renderStatus();\n    this._renderClosable();\n  }\n\n  setStatus(status) {\n    this.setProperty('status', status);\n  }\n\n  _setStatus(status) {\n    if (this.rendered) {\n      this._removeStatus();\n    }\n    status = Status.ensure(status);\n    this._setProperty('status', status);\n  }\n\n  _removeStatus() {\n    if (this.status) {\n      this.$container.removeClass(this.status.cssClass());\n    }\n  }\n\n  _renderStatus() {\n    if (this.status) {\n      this.$container.addClass(this.status.cssClass());\n      this._renderIconId();\n    }\n    this._renderMessage();\n  }\n\n  _renderMessage() {\n    let message = this.status.message || '';\n    if (this.htmlEnabled) {\n      this.$messageText.html(message);\n      // Add action to app-links\n      this.$messageText.find('.app-link')\n        .on('click', this._onAppLinkAction.bind(this));\n    } else {\n      this.$messageText.html(strings.nl2br(message));\n    }\n    this.invalidateLayoutTree();\n  }\n\n  setIconId(iconId) {\n    if (!this.status) {\n      this.status = Status.info();\n    }\n    this.status.iconId = iconId;\n    if (this.rendered) {\n      this._renderStatus();\n    }\n  }\n\n  _renderIconId() {\n    let hasIcon = this.status && !!this.status.iconId;\n    this.$container.toggleClass('has-icon', hasIcon);\n    this.$container.toggleClass('no-icon', !hasIcon);\n    if (hasIcon) {\n      this._renderIcon();\n    } else {\n      this._removeIcon();\n    }\n  }\n\n  _renderIcon() {\n    if (this._icon) {\n      this._icon.setIconDesc(this.status.iconId);\n      return;\n    }\n\n    this._icon = scout.create('Icon', {\n      parent: this,\n      iconDesc: this.status.iconId,\n      prepend: true\n    });\n    this._icon.one('destroy', () => {\n      this._icon = null;\n    });\n    this._icon.render();\n    this._icon.$container.addClass('notification-icon');\n  }\n\n  _removeIcon() {\n    if (this._icon) {\n      this._icon.destroy();\n    }\n  }\n\n  setClosable(closable) {\n    this.setProperty('closable', closable);\n  }\n\n  _renderClosable() {\n    this.$container.toggleClass('closable', this.closable);\n    this.$content.toggleClass('closable', this.closable);\n    if (!this.closable) {\n      this._removeCloser();\n    } else {\n      this._renderCloser();\n    }\n  }\n\n  _removeCloser() {\n    if (!this.$closer) {\n      return;\n    }\n    this.$closer.remove();\n    this.$closer = null;\n  }\n\n  _renderCloser() {\n    if (this.$closer) {\n      return;\n    }\n    this.$closer = this.$content\n      .appendDiv('closer')\n      .on('click', this._onCloseIconClick.bind(this));\n  }\n\n  _onCloseIconClick() {\n    if (this._removing) {\n      return;\n    }\n    this.trigger('close');\n  }\n\n  _onAppLinkAction(event) {\n    let $target = $(event.delegateTarget);\n    let ref = $target.data('ref');\n    this.triggerAppLinkAction(ref);\n  }\n\n  triggerAppLinkAction(ref) {\n    this.trigger('appLinkAction', {\n      ref: ref\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}