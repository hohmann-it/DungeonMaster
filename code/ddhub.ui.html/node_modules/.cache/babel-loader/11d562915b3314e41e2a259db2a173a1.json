{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { objects, scout } from '../index';\nimport WidgetSupport from './WidgetSupport';\nexport default class LoadingSupport extends WidgetSupport {\n  /**\n   * @typedef {WidgetSupportOptions} LoadingSupportOptions\n   * @property {number} [loadingIndicatorDelay] if not set: 250 ms\n   */\n\n  /**\n   * @param {LoadingSupportOptions} options a mandatory options object\n   */\n  constructor(options) {\n    super(options);\n    this.loadingIndicatorDelay = scout.nvl(options.loadingIndicatorDelay, 250); // ms\n\n    this._$loadingIndicator = null;\n    this._loadingIndicatorTimeoutId = null;\n  }\n  setLoadingIndicatorDelay(loadingIndicatorDelay) {\n    this.loadingIndicatorDelay = loadingIndicatorDelay;\n  }\n  _ensure$Container() {\n    if (objects.isFunction(this.options$Container)) {\n      // resolve function provided by options.$container that returns a jQuery element\n      this.$container = this.options$Container();\n    } else if (this.options$Container) {\n      // use jQuery element provided by options.$container\n      this.$container = this.options$Container;\n    } else {\n      // default: when no options.$container is not set, use jQuery element of widget\n      this.$container = this.widget.$container;\n    }\n  }\n  renderLoading() {\n    // Clear any pending loading function\n    clearTimeout(this._loadingIndicatorTimeoutId);\n    this._ensure$Container();\n    if (this.widget.isLoading()) {\n      // add loading indicator\n      if (this.loadingIndicatorDelay && !this.widget.rendering) {\n        this._loadingIndicatorTimeoutId = setTimeout(this._renderLoadingIndicator.bind(this), this.loadingIndicatorDelay);\n      } else {\n        this._renderLoadingIndicator();\n      }\n    } else {\n      // remove loading indicator\n      this._removeLoadingIndicator();\n    }\n  }\n  _renderLoadingIndicator() {\n    if (this._$loadingIndicator || !this.widget.rendered && !this.widget.rendering) {\n      return;\n    }\n\n    // Hide widget content\n    this.$container.addClass('loading');\n    // Create loading indicator\n    this._$loadingIndicator = this.$container.appendDiv('loading-indicator');\n  }\n  _removeLoadingIndicator() {\n    if (!this._$loadingIndicator) {\n      return;\n    }\n    this._$loadingIndicator.css('opacity', this._$loadingIndicator.css('opacity'));\n    this._$loadingIndicator.addClass('animate-remove');\n    this._$loadingIndicator.oneAnimationEnd(() => {\n      this.remove();\n      if (this.widget.rendered) {\n        // Show widget's content (layout if necessary)\n        this.$container.removeClass('loading');\n        this.widget.invalidateLayoutTree();\n      }\n    });\n  }\n  remove() {\n    if (this._$loadingIndicator) {\n      this._$loadingIndicator.remove();\n      this._$loadingIndicator = null;\n    }\n  }\n}","map":{"version":3,"names":["objects","scout","WidgetSupport","LoadingSupport","constructor","options","loadingIndicatorDelay","nvl","_$loadingIndicator","_loadingIndicatorTimeoutId","setLoadingIndicatorDelay","_ensure$Container","isFunction","options$Container","$container","widget","renderLoading","clearTimeout","isLoading","rendering","setTimeout","_renderLoadingIndicator","bind","_removeLoadingIndicator","rendered","addClass","appendDiv","css","oneAnimationEnd","remove","removeClass","invalidateLayoutTree"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/widget/LoadingSupport.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {objects, scout} from '../index';\nimport WidgetSupport from './WidgetSupport';\n\nexport default class LoadingSupport extends WidgetSupport {\n\n  /**\n   * @typedef {WidgetSupportOptions} LoadingSupportOptions\n   * @property {number} [loadingIndicatorDelay] if not set: 250 ms\n   */\n\n  /**\n   * @param {LoadingSupportOptions} options a mandatory options object\n   */\n  constructor(options) {\n    super(options);\n    this.loadingIndicatorDelay = scout.nvl(options.loadingIndicatorDelay, 250); // ms\n\n    this._$loadingIndicator = null;\n    this._loadingIndicatorTimeoutId = null;\n  }\n\n  setLoadingIndicatorDelay(loadingIndicatorDelay) {\n    this.loadingIndicatorDelay = loadingIndicatorDelay;\n  }\n\n  _ensure$Container() {\n    if (objects.isFunction(this.options$Container)) {\n      // resolve function provided by options.$container that returns a jQuery element\n      this.$container = this.options$Container();\n    } else if (this.options$Container) {\n      // use jQuery element provided by options.$container\n      this.$container = this.options$Container;\n    } else {\n      // default: when no options.$container is not set, use jQuery element of widget\n      this.$container = this.widget.$container;\n    }\n  }\n\n  renderLoading() {\n    // Clear any pending loading function\n    clearTimeout(this._loadingIndicatorTimeoutId);\n    this._ensure$Container();\n\n    if (this.widget.isLoading()) {\n      // add loading indicator\n      if (this.loadingIndicatorDelay && !this.widget.rendering) {\n        this._loadingIndicatorTimeoutId = setTimeout(\n          this._renderLoadingIndicator.bind(this), this.loadingIndicatorDelay);\n      } else {\n        this._renderLoadingIndicator();\n      }\n    } else {\n      // remove loading indicator\n      this._removeLoadingIndicator();\n    }\n  }\n\n  _renderLoadingIndicator() {\n    if (this._$loadingIndicator || !this.widget.rendered && !this.widget.rendering) {\n      return;\n    }\n\n    // Hide widget content\n    this.$container.addClass('loading');\n    // Create loading indicator\n    this._$loadingIndicator = this.$container.appendDiv('loading-indicator');\n  }\n\n  _removeLoadingIndicator() {\n    if (!this._$loadingIndicator) {\n      return;\n    }\n\n    this._$loadingIndicator.css('opacity', this._$loadingIndicator.css('opacity'));\n    this._$loadingIndicator.addClass('animate-remove');\n    this._$loadingIndicator.oneAnimationEnd(() => {\n      this.remove();\n      if (this.widget.rendered) {\n        // Show widget's content (layout if necessary)\n        this.$container.removeClass('loading');\n        this.widget.invalidateLayoutTree();\n      }\n    });\n  }\n\n  remove() {\n    if (this._$loadingIndicator) {\n      this._$loadingIndicator.remove();\n      this._$loadingIndicator = null;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}