{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { Tile, ViewMenuPopupEnterKeyStroke, WidgetPopup } from '../../index';\n\n/**\n * Popup menu to switch between outlines.\n */\nexport default class ViewMenuPopup extends WidgetPopup {\n  constructor() {\n    super();\n    this.cssClass = 'view-menu-popup';\n    this.defaultIconId = null;\n    this.viewMenus = [];\n    this.trimWidth = true;\n  }\n  _init(options) {\n    super._init(options);\n    let tiles = this._createTiles();\n    let noIcons = tiles.every(tile => !tile.widgets[0].visible);\n    this.widget = scout.create('TileGrid', {\n      parent: this,\n      tiles: tiles,\n      cssClass: noIcons ? 'no-icons' : '',\n      selectable: true,\n      multiSelect: false,\n      gridColumnCount: this._computeGridColumnCount(tiles),\n      layoutConfig: {\n        columnWidth: 100,\n        rowHeight: -1,\n        vgap: 10,\n        hgap: 10\n      }\n    });\n    let tile = this.widget.tiles.find(tile => tile.viewMenu.selected);\n    if (tile) {\n      this.widget.selectTile(tile);\n    }\n  }\n  _computeGridColumnCount(tiles) {\n    if (tiles.length > 8) {\n      return 4;\n    }\n    if (tiles.length > 4) {\n      return 3;\n    }\n    return 2;\n  }\n  _createTiles() {\n    return this.viewMenus.map(menu => ({\n      objectType: 'CompositeTile',\n      displayStyle: Tile.DisplayStyle.PLAIN,\n      cssClass: scout.nvl(menu.cssClass, '') + ' view-menu-tile ' + (menu.selected ? 'checked ' : '') + (!menu.iconId ? 'text-only' : ''),\n      modelClass: menu.modelClass,\n      classId: menu.classId,\n      viewMenu: menu,\n      enabled: menu.enabled,\n      gridDataHints: {\n        useUiHeight: true\n      },\n      widgets: [{\n        objectType: 'Icon',\n        iconDesc: menu.iconId,\n        visible: !!menu.iconId,\n        prepend: true\n      }, {\n        objectType: 'Label',\n        value: menu.text,\n        cssClass: 'label'\n      }]\n    }));\n  }\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n    this.keyStrokeContext.registerKeyStroke([new ViewMenuPopupEnterKeyStroke(this)]);\n  }\n  _renderWidget() {\n    super._renderWidget();\n    this.widget.$container.on('click', '.tile', event => {\n      let target = scout.widget(event.target);\n      if (!(target instanceof Tile)) {\n        target = target.findParent(parent => parent instanceof Tile);\n      }\n      this.activateTile(target);\n    });\n  }\n  activateTile(tile) {\n    if (!tile || !tile.viewMenu.enabledComputed) {\n      return;\n    }\n    tile.viewMenu.doAction();\n    this.close();\n  }\n}","map":{"version":3,"names":["Tile","ViewMenuPopupEnterKeyStroke","WidgetPopup","ViewMenuPopup","constructor","cssClass","defaultIconId","viewMenus","trimWidth","_init","options","tiles","_createTiles","noIcons","every","tile","widgets","visible","widget","scout","create","parent","selectable","multiSelect","gridColumnCount","_computeGridColumnCount","layoutConfig","columnWidth","rowHeight","vgap","hgap","find","viewMenu","selected","selectTile","length","map","menu","objectType","displayStyle","DisplayStyle","PLAIN","nvl","iconId","modelClass","classId","enabled","gridDataHints","useUiHeight","iconDesc","prepend","value","text","_initKeyStrokeContext","keyStrokeContext","registerKeyStroke","_renderWidget","$container","on","event","target","findParent","activateTile","enabledComputed","doAction","close"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/desktop/viewbutton/ViewMenuPopup.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {Tile, ViewMenuPopupEnterKeyStroke, WidgetPopup} from '../../index';\n\n/**\n * Popup menu to switch between outlines.\n */\nexport default class ViewMenuPopup extends WidgetPopup {\n\n  constructor() {\n    super();\n    this.cssClass = 'view-menu-popup';\n    this.defaultIconId = null;\n    this.viewMenus = [];\n    this.trimWidth = true;\n  }\n\n  _init(options) {\n    super._init(options);\n    let tiles = this._createTiles();\n    let noIcons = tiles.every(tile => !tile.widgets[0].visible);\n    this.widget = scout.create('TileGrid', {\n      parent: this,\n      tiles: tiles,\n      cssClass: noIcons ? 'no-icons' : '',\n      selectable: true,\n      multiSelect: false,\n      gridColumnCount: this._computeGridColumnCount(tiles),\n      layoutConfig: {\n        columnWidth: 100,\n        rowHeight: -1,\n        vgap: 10,\n        hgap: 10\n      }\n    });\n    let tile = this.widget.tiles.find(tile => tile.viewMenu.selected);\n    if (tile) {\n      this.widget.selectTile(tile);\n    }\n  }\n\n  _computeGridColumnCount(tiles) {\n    if (tiles.length > 8) {\n      return 4;\n    }\n    if (tiles.length > 4) {\n      return 3;\n    }\n    return 2;\n  }\n\n  _createTiles() {\n    return this.viewMenus.map(menu => ({\n      objectType: 'CompositeTile',\n      displayStyle: Tile.DisplayStyle.PLAIN,\n      cssClass: scout.nvl(menu.cssClass, '') + ' view-menu-tile ' + (menu.selected ? 'checked ' : '') + (!menu.iconId ? 'text-only' : ''),\n      modelClass: menu.modelClass,\n      classId: menu.classId,\n      viewMenu: menu,\n      enabled: menu.enabled,\n      gridDataHints: {\n        useUiHeight: true\n      },\n      widgets: [\n        {\n          objectType: 'Icon',\n          iconDesc: menu.iconId,\n          visible: !!menu.iconId,\n          prepend: true\n        },\n        {\n          objectType: 'Label',\n          value: menu.text,\n          cssClass: 'label'\n        }\n      ]\n    }));\n  }\n\n  _initKeyStrokeContext() {\n    super._initKeyStrokeContext();\n\n    this.keyStrokeContext.registerKeyStroke([\n      new ViewMenuPopupEnterKeyStroke(this)\n    ]);\n  }\n\n  _renderWidget() {\n    super._renderWidget();\n    this.widget.$container.on('click', '.tile', event => {\n      let target = scout.widget(event.target);\n      if (!(target instanceof Tile)) {\n        target = target.findParent(parent => parent instanceof Tile);\n      }\n      this.activateTile(target);\n    });\n  }\n\n  activateTile(tile) {\n    if (!tile || !tile.viewMenu.enabledComputed) {\n      return;\n    }\n    tile.viewMenu.doAction();\n    this.close();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}