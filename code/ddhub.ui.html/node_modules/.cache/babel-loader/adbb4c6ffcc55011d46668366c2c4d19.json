{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, DeferredGlassPaneTarget, Form, scout } from '../index';\nimport $ from 'jquery';\n\n/**\n * Renders glassPanes over the 'glassPaneTargets' of a widget.\n */\nexport default class GlassPaneRenderer {\n  constructor(widget, enabled) {\n    this._widget = widget;\n    this.session = widget.session;\n    this._enabled = scout.nvl(enabled, true);\n    this._$glassPanes = [];\n    this._deferredGlassPanes = [];\n    this._resolvedDisplayParent = null;\n    this._registeredDisplayParent = null;\n    this._displayParentRenderHandler = this._onDisplayParentRender.bind(this);\n    this._glassPaneRemoveHandler = this._onGlassPaneRemove.bind(this);\n    this._glassPaneRendererRegistered = false;\n  }\n  renderGlassPanes() {\n    this.findGlassPaneTargets().forEach(function (glassPaneTarget) {\n      if (glassPaneTarget instanceof DeferredGlassPaneTarget) {\n        glassPaneTarget.rendererReady(this);\n        this._deferredGlassPanes.push(glassPaneTarget);\n      } else {\n        this.renderGlassPane(glassPaneTarget);\n      }\n    }, this);\n    if (!this._glassPaneRendererRegistered) {\n      this.session.focusManager.registerGlassPaneRenderer(this);\n      this._glassPaneRendererRegistered = true;\n    }\n  }\n\n  /**\n   * @param {($|HTMLElement)} $glassPaneTarget\n   */\n  renderGlassPane($glassPaneTarget) {\n    $glassPaneTarget = $.ensure($glassPaneTarget);\n    if (this._widget.$container && this._widget.$container[0] === $glassPaneTarget[0]) {\n      // Don't render a glass pane on the widget itself (necessary if glass pane is added after the widget is rendered)\n      return;\n    }\n\n    // If glassPaneTarget already has a glasspane added by this renderer, don't add another one\n    // May happen if a part of the display parent is removed and rendered again while covered by a glass pane\n    // E.g. display parent is set to outline and navigation is made invisible but bench is still there.\n    // When navigation is made visible again, renderGlassPanes is called but only the glass panes of the navigation need to be added and not the ones of the bench (because they are already there)\n    let alreadyRendered = this._$glassPanes.some($pane => {\n      return $pane.parent()[0] === $glassPaneTarget[0];\n    });\n    if (alreadyRendered) {\n      return;\n    }\n\n    // Render glasspanes onto glasspane targets.\n    let $glassPane = $glassPaneTarget.appendDiv('glasspane').on('mousedown', this._onMouseDown.bind(this));\n    this._adjustGlassPaneSize($glassPane, $glassPaneTarget);\n\n    // Glasspanes in popup-windows must be visible, otherwise the user cannot recognize that the popup\n    // is blocked, since the widget that blocks (e.g a message-box) may be opened in the main-window.\n    let window = $glassPane.window(true);\n    if (window && window.popupWindow) {\n      $glassPane.addClass('dark');\n    }\n    this._$glassPanes.push($glassPane);\n\n    // Register 'glassPaneTarget' in focus manager.\n    this.session.focusManager.registerGlassPaneTarget($glassPaneTarget);\n\n    // Ensure glass pane is removed properly on remove, especially necessary when display parent is removed while glass pane renderer is still active (navigation collapse case)\n    $glassPane.one('remove', this._glassPaneRemoveHandler);\n    this._registerDisplayParent();\n  }\n  _adjustGlassPaneSize($glassPane, $glassPaneTarget) {\n    // The glasspane must cover the border and overlapping children\n    let top = -$glassPaneTarget.cssBorderTopWidth(),\n      bottom = -$glassPaneTarget.cssBorderBottomWidth(),\n      left = -$glassPaneTarget.cssBorderLeftWidth(),\n      right = -$glassPaneTarget.cssBorderRightWidth();\n    $glassPaneTarget.children().each((idx, elem) => {\n      let element = $(elem);\n      top = Math.min(top, (element.cssTop() || 0) + (element.cssMarginTop() || 0));\n      bottom = Math.min(bottom, (element.cssBottom() || 0) + (element.cssMarginBottom() || 0));\n      left = Math.min(left, (element.cssLeft() || 0) + (element.cssMarginLeft() || 0));\n      right = Math.min(right, (element.cssRight() || 0) + (element.cssMarginRight() || 0));\n    });\n    $glassPane.cssTop(top).cssBottom(bottom).cssLeft(left).cssRight(right);\n  }\n  removeGlassPanes() {\n    // Remove glass-panes\n    this._$glassPanes.slice().forEach(function ($glassPane) {\n      this._removeGlassPane($glassPane);\n    }, this);\n\n    // Unregister all deferedGlassPaneTargets\n    this._deferredGlassPanes.forEach(function (glassPaneTarget) {\n      glassPaneTarget.removeGlassPaneRenderer(this);\n    }, this);\n    this._deferredGlassPanes = [];\n    this._unregisterDisplayParent();\n    this.session.focusManager.unregisterGlassPaneRenderer(this);\n    this._glassPaneRendererRegistered = false;\n  }\n  _removeGlassPane($glassPane) {\n    let $glassPaneTarget = $glassPane.parent();\n    $glassPane.off('remove', this._glassPaneRemoveHandler);\n    $glassPane.remove();\n    arrays.$remove(this._$glassPanes, $glassPane);\n    $glassPaneTarget.removeClass('glasspane-parent');\n    this.session.focusManager.unregisterGlassPaneTarget($glassPaneTarget);\n  }\n  eachGlassPane(func) {\n    this._$glassPanes.forEach($glassPane => {\n      func($glassPane);\n    });\n  }\n  findGlassPaneTargets() {\n    if (!this._enabled) {\n      return []; // No glasspanes to be rendered, e.g. for none-modal dialogs.\n    }\n\n    let displayParent = this._resolveDisplayParent();\n    if (!displayParent || !displayParent.glassPaneTargets) {\n      return []; // Parent is not a valid display parent.\n    }\n\n    return displayParent.glassPaneTargets(this._widget);\n  }\n  _resolveDisplayParent() {\n    // Note: This has to be done after rendering, because otherwise session.desktop could be undefined!\n    if (!this._resolvedDisplayParent) {\n      this._resolvedDisplayParent = this._widget.displayParent || this.session.desktop;\n    }\n    return this._resolvedDisplayParent;\n  }\n  _registerDisplayParent() {\n    // if this._resolvedDisplayParent is not yet resolved, do it now\n    if (!this._resolvedDisplayParent) {\n      this._resolveDisplayParent();\n    }\n    // if this._resolvedDisplayParent is resolved, but not yet registered\n    if (this._resolvedDisplayParent) {\n      if (!this._registeredDisplayParent) {\n        // register this._resolvedDisplayParent and remember it as this._registeredDisplayParent\n        this.session.focusManager.registerGlassPaneDisplayParent(this._resolvedDisplayParent);\n        this._registeredDisplayParent = this._resolvedDisplayParent;\n        this._registeredDisplayParent.on('render', this._displayParentRenderHandler);\n      }\n    }\n  }\n  _unregisterDisplayParent() {\n    // if this._registeredDisplayParent is defined, unregister it\n    if (this._registeredDisplayParent) {\n      this.session.focusManager.unregisterGlassPaneDisplayParent(this._registeredDisplayParent);\n      this._registeredDisplayParent.off('render', this._displayParentRenderHandler);\n      this._registeredDisplayParent = null;\n    }\n  }\n  _onMouseDown(event) {\n    let $animationTarget = null;\n\n    // notify the display parent to handle the mouse down on the glass pane.\n    let displayParent = this._resolveDisplayParent();\n    if (displayParent._onGlassPaneMouseDown) {\n      displayParent._onGlassPaneMouseDown(this._widget, $(event.target));\n    }\n    if (this._widget instanceof Form && this._widget.isView()) {\n      // If the blocking widget is a view, the $container cannot be animated (this only works for dialogs). Instead,\n      // highlight the view tab (or the overflow item, if the view tab is not visible).\n\n      let viewTab = this.session.desktop.bench.getViewTab(this._widget);\n      // View tab may not exist if view has neither a title nor a subtitle\n      if (viewTab) {\n        $animationTarget = viewTab.$container;\n        if (!$animationTarget.isVisible()) {\n          $animationTarget = $animationTarget.siblings('.overflow-tab-item');\n        }\n      }\n    } else if (this._widget.$container) {\n      $animationTarget = this._widget.$container;\n    }\n    if ($animationTarget) {\n      // If the animation target itself is covered by a glasspane, the event is passed on\n      let $glassPane = this._widget.$container.children('.glasspane');\n      if ($glassPane.length) {\n        $glassPane.trigger('mousedown');\n      } else {\n        $animationTarget.addClassForAnimation('animate-modality-highlight', {\n          // remove animate-open as well, user may click the glasspane before the widget itself was able to remove the animate-open class\n          classesToRemove: 'animate-modality-highlight animate-open'\n        });\n      }\n    }\n    $.suppressEvent(event);\n  }\n  _onDisplayParentRender(event) {\n    this.renderGlassPanes();\n  }\n  _onGlassPaneRemove(event) {\n    let $glassPane = $(event.target);\n    this._removeGlassPane($glassPane);\n  }\n}","map":{"version":3,"names":["arrays","DeferredGlassPaneTarget","Form","scout","$","GlassPaneRenderer","constructor","widget","enabled","_widget","session","_enabled","nvl","_$glassPanes","_deferredGlassPanes","_resolvedDisplayParent","_registeredDisplayParent","_displayParentRenderHandler","_onDisplayParentRender","bind","_glassPaneRemoveHandler","_onGlassPaneRemove","_glassPaneRendererRegistered","renderGlassPanes","findGlassPaneTargets","forEach","glassPaneTarget","rendererReady","push","renderGlassPane","focusManager","registerGlassPaneRenderer","$glassPaneTarget","ensure","$container","alreadyRendered","some","$pane","parent","$glassPane","appendDiv","on","_onMouseDown","_adjustGlassPaneSize","window","popupWindow","addClass","registerGlassPaneTarget","one","_registerDisplayParent","top","cssBorderTopWidth","bottom","cssBorderBottomWidth","left","cssBorderLeftWidth","right","cssBorderRightWidth","children","each","idx","elem","element","Math","min","cssTop","cssMarginTop","cssBottom","cssMarginBottom","cssLeft","cssMarginLeft","cssRight","cssMarginRight","removeGlassPanes","slice","_removeGlassPane","removeGlassPaneRenderer","_unregisterDisplayParent","unregisterGlassPaneRenderer","off","remove","$remove","removeClass","unregisterGlassPaneTarget","eachGlassPane","func","displayParent","_resolveDisplayParent","glassPaneTargets","desktop","registerGlassPaneDisplayParent","unregisterGlassPaneDisplayParent","event","$animationTarget","_onGlassPaneMouseDown","target","isView","viewTab","bench","getViewTab","isVisible","siblings","length","trigger","addClassForAnimation","classesToRemove","suppressEvent"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/glasspane/GlassPaneRenderer.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, DeferredGlassPaneTarget, Form, scout} from '../index';\nimport $ from 'jquery';\n\n/**\n * Renders glassPanes over the 'glassPaneTargets' of a widget.\n */\nexport default class GlassPaneRenderer {\n\n  constructor(widget, enabled) {\n    this._widget = widget;\n    this.session = widget.session;\n    this._enabled = scout.nvl(enabled, true);\n    this._$glassPanes = [];\n    this._deferredGlassPanes = [];\n    this._resolvedDisplayParent = null;\n    this._registeredDisplayParent = null;\n    this._displayParentRenderHandler = this._onDisplayParentRender.bind(this);\n    this._glassPaneRemoveHandler = this._onGlassPaneRemove.bind(this);\n    this._glassPaneRendererRegistered = false;\n  }\n\n  renderGlassPanes() {\n    this.findGlassPaneTargets().forEach(function(glassPaneTarget) {\n      if (glassPaneTarget instanceof DeferredGlassPaneTarget) {\n        glassPaneTarget.rendererReady(this);\n        this._deferredGlassPanes.push(glassPaneTarget);\n      } else {\n        this.renderGlassPane(glassPaneTarget);\n      }\n    }, this);\n    if (!this._glassPaneRendererRegistered) {\n      this.session.focusManager.registerGlassPaneRenderer(this);\n      this._glassPaneRendererRegistered = true;\n    }\n  }\n\n  /**\n   * @param {($|HTMLElement)} $glassPaneTarget\n   */\n  renderGlassPane($glassPaneTarget) {\n    $glassPaneTarget = $.ensure($glassPaneTarget);\n\n    if (this._widget.$container && this._widget.$container[0] === $glassPaneTarget[0]) {\n      // Don't render a glass pane on the widget itself (necessary if glass pane is added after the widget is rendered)\n      return;\n    }\n\n    // If glassPaneTarget already has a glasspane added by this renderer, don't add another one\n    // May happen if a part of the display parent is removed and rendered again while covered by a glass pane\n    // E.g. display parent is set to outline and navigation is made invisible but bench is still there.\n    // When navigation is made visible again, renderGlassPanes is called but only the glass panes of the navigation need to be added and not the ones of the bench (because they are already there)\n    let alreadyRendered = this._$glassPanes.some($pane => {\n      return $pane.parent()[0] === $glassPaneTarget[0];\n    });\n    if (alreadyRendered) {\n      return;\n    }\n\n    // Render glasspanes onto glasspane targets.\n    let $glassPane = $glassPaneTarget\n      .appendDiv('glasspane')\n      .on('mousedown', this._onMouseDown.bind(this));\n\n    this._adjustGlassPaneSize($glassPane, $glassPaneTarget);\n\n    // Glasspanes in popup-windows must be visible, otherwise the user cannot recognize that the popup\n    // is blocked, since the widget that blocks (e.g a message-box) may be opened in the main-window.\n    let window = $glassPane.window(true);\n    if (window && window.popupWindow) {\n      $glassPane.addClass('dark');\n    }\n    this._$glassPanes.push($glassPane);\n\n    // Register 'glassPaneTarget' in focus manager.\n    this.session.focusManager.registerGlassPaneTarget($glassPaneTarget);\n\n    // Ensure glass pane is removed properly on remove, especially necessary when display parent is removed while glass pane renderer is still active (navigation collapse case)\n    $glassPane.one('remove', this._glassPaneRemoveHandler);\n\n    this._registerDisplayParent();\n  }\n\n  _adjustGlassPaneSize($glassPane, $glassPaneTarget) {\n    // The glasspane must cover the border and overlapping children\n    let top = -$glassPaneTarget.cssBorderTopWidth(),\n      bottom = -$glassPaneTarget.cssBorderBottomWidth(),\n      left = -$glassPaneTarget.cssBorderLeftWidth(),\n      right = -$glassPaneTarget.cssBorderRightWidth();\n\n    $glassPaneTarget.children().each((idx, elem) => {\n      let element = $(elem);\n      top = Math.min(top, (element.cssTop() || 0) + (element.cssMarginTop() || 0));\n      bottom = Math.min(bottom, (element.cssBottom() || 0) + (element.cssMarginBottom() || 0));\n      left = Math.min(left, (element.cssLeft() || 0) + (element.cssMarginLeft() || 0));\n      right = Math.min(right, (element.cssRight() || 0) + (element.cssMarginRight() || 0));\n    });\n\n    $glassPane.cssTop(top)\n      .cssBottom(bottom)\n      .cssLeft(left)\n      .cssRight(right);\n  }\n\n  removeGlassPanes() {\n    // Remove glass-panes\n    this._$glassPanes.slice().forEach(function($glassPane) {\n      this._removeGlassPane($glassPane);\n    }, this);\n\n    // Unregister all deferedGlassPaneTargets\n    this._deferredGlassPanes.forEach(function(glassPaneTarget) {\n      glassPaneTarget.removeGlassPaneRenderer(this);\n    }, this);\n    this._deferredGlassPanes = [];\n\n    this._unregisterDisplayParent();\n    this.session.focusManager.unregisterGlassPaneRenderer(this);\n    this._glassPaneRendererRegistered = false;\n  }\n\n  _removeGlassPane($glassPane) {\n    let $glassPaneTarget = $glassPane.parent();\n    $glassPane.off('remove', this._glassPaneRemoveHandler);\n    $glassPane.remove();\n    arrays.$remove(this._$glassPanes, $glassPane);\n\n    $glassPaneTarget.removeClass('glasspane-parent');\n    this.session.focusManager.unregisterGlassPaneTarget($glassPaneTarget);\n  }\n\n  eachGlassPane(func) {\n    this._$glassPanes.forEach($glassPane => {\n      func($glassPane);\n    });\n  }\n\n  findGlassPaneTargets() {\n    if (!this._enabled) {\n      return []; // No glasspanes to be rendered, e.g. for none-modal dialogs.\n    }\n\n    let displayParent = this._resolveDisplayParent();\n    if (!displayParent || !displayParent.glassPaneTargets) {\n      return []; // Parent is not a valid display parent.\n    }\n\n    return displayParent.glassPaneTargets(this._widget);\n  }\n\n  _resolveDisplayParent() {\n    // Note: This has to be done after rendering, because otherwise session.desktop could be undefined!\n    if (!this._resolvedDisplayParent) {\n      this._resolvedDisplayParent = this._widget.displayParent || this.session.desktop;\n    }\n    return this._resolvedDisplayParent;\n  }\n\n  _registerDisplayParent() {\n    // if this._resolvedDisplayParent is not yet resolved, do it now\n    if (!this._resolvedDisplayParent) {\n      this._resolveDisplayParent();\n    }\n    // if this._resolvedDisplayParent is resolved, but not yet registered\n    if (this._resolvedDisplayParent) {\n      if (!this._registeredDisplayParent) {\n        // register this._resolvedDisplayParent and remember it as this._registeredDisplayParent\n        this.session.focusManager.registerGlassPaneDisplayParent(this._resolvedDisplayParent);\n        this._registeredDisplayParent = this._resolvedDisplayParent;\n        this._registeredDisplayParent.on('render', this._displayParentRenderHandler);\n      }\n    }\n  }\n\n  _unregisterDisplayParent() {\n    // if this._registeredDisplayParent is defined, unregister it\n    if (this._registeredDisplayParent) {\n      this.session.focusManager.unregisterGlassPaneDisplayParent(this._registeredDisplayParent);\n      this._registeredDisplayParent.off('render', this._displayParentRenderHandler);\n      this._registeredDisplayParent = null;\n    }\n  }\n\n  _onMouseDown(event) {\n    let $animationTarget = null;\n\n    // notify the display parent to handle the mouse down on the glass pane.\n    let displayParent = this._resolveDisplayParent();\n    if (displayParent._onGlassPaneMouseDown) {\n      displayParent._onGlassPaneMouseDown(this._widget, $(event.target));\n    }\n\n    if (this._widget instanceof Form && this._widget.isView()) {\n      // If the blocking widget is a view, the $container cannot be animated (this only works for dialogs). Instead,\n      // highlight the view tab (or the overflow item, if the view tab is not visible).\n\n      let viewTab = this.session.desktop.bench.getViewTab(this._widget);\n      // View tab may not exist if view has neither a title nor a subtitle\n      if (viewTab) {\n        $animationTarget = viewTab.$container;\n        if (!$animationTarget.isVisible()) {\n          $animationTarget = $animationTarget.siblings('.overflow-tab-item');\n        }\n      }\n    } else if (this._widget.$container) {\n      $animationTarget = this._widget.$container;\n    }\n\n    if ($animationTarget) {\n      // If the animation target itself is covered by a glasspane, the event is passed on\n      let $glassPane = this._widget.$container.children('.glasspane');\n      if ($glassPane.length) {\n        $glassPane.trigger('mousedown');\n      } else {\n        $animationTarget.addClassForAnimation('animate-modality-highlight', {\n          // remove animate-open as well, user may click the glasspane before the widget itself was able to remove the animate-open class\n          classesToRemove: 'animate-modality-highlight animate-open'\n        });\n      }\n    }\n\n    $.suppressEvent(event);\n  }\n\n  _onDisplayParentRender(event) {\n    this.renderGlassPanes();\n  }\n\n  _onGlassPaneRemove(event) {\n    let $glassPane = $(event.target);\n    this._removeGlassPane($glassPane);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}