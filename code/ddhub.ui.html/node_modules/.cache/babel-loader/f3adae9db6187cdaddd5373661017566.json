{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { HtmlComponent, objects, ProposalChooserLayout, ProposalField, scout, SmartField, Status, Table, Widget } from '../../../index';\nimport $ from 'jquery';\nexport default class ProposalChooser extends Widget {\n  constructor() {\n    super();\n    this.$container = null;\n    this.$status = null;\n    this.activeFilterGroup = null;\n    this.htmlComp = null;\n    this._updateStatusTimeout = null;\n    this.status = null;\n    this.statusVisible = true;\n    this.touch = false;\n  }\n  _init(model) {\n    super._init(model);\n\n    // If smartField is not explicitly provided by model, use smartField instance\n    // from parent (which is usually the SmartFieldPopup)\n    if (!model.smartField) {\n      this.smartField = this.parent.smartField;\n    }\n    this.model = this._createModel();\n  }\n  _createModel($parent) {\n    throw new Error('_createModel() not implemented');\n  }\n  setLookupResult(result) {\n    throw new Error('setLookupResult() not implemented');\n  }\n  selectFirstLookupRow() {\n    throw new Error('selectFirstLookupRow() not implemented');\n  }\n  clearSelection() {\n    throw new Error('clearSelection() not implemented');\n  }\n  clearLookupRows() {\n    throw new Error('clearLookupRows() not implemented');\n  }\n\n  /**\n   * @param row TableRow or TreeNode (both have the same properties)\n   */\n  triggerLookupRowSelected(row) {\n    row = row || this.selectedRow();\n    if (!row || !row.enabled) {\n      return;\n    }\n    this.trigger('lookupRowSelected', {\n      lookupRow: row.lookupRow\n    });\n  }\n\n  /**\n   * Implement this function to get the selected row or node from the proposal chooser.\n   * The implementation depends on the widget used by the chooser (Table or Tree).\n   */\n  selectedRow() {\n    throw new Error('selectedRow() not implemented');\n  }\n  _render() {\n    this.$container = this.$parent.appendDiv('proposal-chooser').toggleClass('touch', this.touch);\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new ProposalChooserLayout(this));\n    this._renderModel();\n\n    // status\n    this.$status = this.$container.appendDiv('status').setVisible(false);\n\n    // active filter\n    if (this.smartField.activeFilterEnabled) {\n      this.activeFilterGroup = scout.create('RadioButtonGroup', {\n        parent: this,\n        labelVisible: false,\n        statusVisible: false,\n        gridColumnCount: SmartField.ACTIVE_FILTER_VALUES.length\n      });\n\n      // add radio buttons\n      SmartField.ACTIVE_FILTER_VALUES.forEach(function (value, index) {\n        this._insertActiveFilterButton(value, index);\n      }, this);\n      this.activeFilterGroup.render();\n      this.activeFilterGroup.$container.addClass('active-filter');\n      this.activeFilterGroup.removeMandatoryIndicator();\n    }\n  }\n  _renderModel() {\n    this.model.render();\n\n    // Make sure container never gets the focus, but looks focused\n    this.model.$container.setTabbable(false);\n    this.model.$container.addClass('focused');\n  }\n  _renderProperties() {\n    super._renderProperties();\n    this._updateStatus();\n  }\n\n  /**\n   * Delegates an event (e.g. keyup, keydown) to the model.$container of this instance,\n   * calling the JQuery trigger method.\n   */\n  delegateEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this.model.$container.trigger(event);\n  }\n  delegateKeyEvent(event) {\n    this.model.$container.trigger(event);\n  }\n  _renderStatus() {\n    this._updateStatus();\n  }\n  _renderStatusVisible() {\n    this._updateStatus();\n  }\n  _computeStatusVisible() {\n    return !!(this.statusVisible && this.status);\n  }\n  _updateStatus() {\n    // Note: the UI has a special way to deal with the status. When the UI is rendered\n    // we do NOT render an OK status, even when it is set on the model. The status\n    // \"Search proposals...\" is set to severity OK. That status is only displayed, when\n    // it is still there after 250 ms. Usually a smart-field lookup is fast, so the user\n    // never sees the status message. However: it would be better if the status on the\n    // (Java-)model would implement the behavior described above, but\n    // this would require a timer thread, so it is easier to implement that in the UI.\n    // Status with other severities than OK are displayed immediately.\n    clearTimeout(this._updateStatusTimeout);\n    if (objects.optProperty(this.status, 'severity') === Status.Severity.OK) {\n      // compute statusVisible 250 ms later (status can change in the meantime)\n      this._updateStatusTimeout = setTimeout(this._updateStatusImpl.bind(this), 250);\n    } else {\n      this._updateStatusImpl();\n    }\n  }\n  _updateStatusImpl() {\n    if (!this.rendered && !this.rendering) {\n      return;\n    }\n    let oldVisible = this.$status.isVisible(),\n      oldMessage = this.$status.text(),\n      visible = this._computeStatusVisible();\n    if (oldVisible === visible && oldMessage === objects.optProperty(this.status, 'message')) {\n      return;\n    }\n    $.log.isDebugEnabled() && $.log.debug('(ProposalChooser#_updateStatusImpl) $status.visible=' + visible);\n    this.$status.setVisible(visible);\n    if (this.status) {\n      this._setStatusMessage(this.status.message);\n    } else {\n      this.$status.text('');\n    }\n    this.htmlComp.invalidateLayoutTree();\n  }\n\n  /**\n   * Replaces an ellipsis (...) at the end of the message-text with a CSS animation.\n   */\n  _setStatusMessage(message) {\n    Status.animateStatusMessage(this.$status, message);\n  }\n  _insertActiveFilterButton(value, index) {\n    let radio = scout.create('RadioButton', {\n      parent: this.activeFilterGroup,\n      label: this._activeFilterLabel(index),\n      radioValue: SmartField.ACTIVE_FILTER_VALUES[index],\n      selected: this.smartField.activeFilter === value,\n      focusWhenSelected: false,\n      gridDataHints: {\n        useUiWidth: true\n      }\n    });\n    radio.on('propertyChange', event => {\n      if (event.propertyName === 'selected' && event.newValue === true) {\n        this.trigger('activeFilterSelected', {\n          activeFilter: event.source.radioValue\n        });\n      }\n    });\n    this.activeFilterGroup.insertButton(radio);\n  }\n  setVirtual(virtual) {\n    if (this.model instanceof Table) {\n      this.model.setVirtual(virtual);\n    }\n  }\n  setStatus(status) {\n    this.setProperty('status', status);\n  }\n  setBusy(busy) {\n    this.model.setProperty('loading', busy);\n    this.model.setProperty('enabled', !busy);\n  }\n  _activeFilterLabel(index) {\n    return this.smartField.activeFilterLabels[index];\n  }\n\n  /**\n   * Override this function to implement update scrollbar behavior.\n   */\n  updateScrollbars() {\n    this.model.updateScrollbars();\n  }\n  _isProposal() {\n    return this.smartField instanceof ProposalField;\n  }\n  _selectProposal(result, proposals) {\n    if (this._isProposal()) {\n      return; // no pre-selection when field is a proposal field\n    }\n\n    if (result.byAll) {\n      this.trySelectCurrentValue();\n    } else if (proposals.length === 1) {\n      this.selectFirstLookupRow();\n    }\n  }\n}","map":{"version":3,"names":["HtmlComponent","objects","ProposalChooserLayout","ProposalField","scout","SmartField","Status","Table","Widget","$","ProposalChooser","constructor","$container","$status","activeFilterGroup","htmlComp","_updateStatusTimeout","status","statusVisible","touch","_init","model","smartField","parent","_createModel","$parent","Error","setLookupResult","result","selectFirstLookupRow","clearSelection","clearLookupRows","triggerLookupRowSelected","row","selectedRow","enabled","trigger","lookupRow","_render","appendDiv","toggleClass","install","session","setLayout","_renderModel","setVisible","activeFilterEnabled","create","labelVisible","gridColumnCount","ACTIVE_FILTER_VALUES","length","forEach","value","index","_insertActiveFilterButton","render","addClass","removeMandatoryIndicator","setTabbable","_renderProperties","_updateStatus","delegateEvent","event","originalEvent","smartFieldEvent","delegateKeyEvent","_renderStatus","_renderStatusVisible","_computeStatusVisible","clearTimeout","optProperty","Severity","OK","setTimeout","_updateStatusImpl","bind","rendered","rendering","oldVisible","isVisible","oldMessage","text","visible","log","isDebugEnabled","debug","_setStatusMessage","message","invalidateLayoutTree","animateStatusMessage","radio","label","_activeFilterLabel","radioValue","selected","activeFilter","focusWhenSelected","gridDataHints","useUiWidth","on","propertyName","newValue","source","insertButton","setVirtual","virtual","setStatus","setProperty","setBusy","busy","activeFilterLabels","updateScrollbars","_isProposal","_selectProposal","proposals","byAll","trySelectCurrentValue"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/form/fields/smartfield/ProposalChooser.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {HtmlComponent, objects, ProposalChooserLayout, ProposalField, scout, SmartField, Status, Table, Widget} from '../../../index';\nimport $ from 'jquery';\n\nexport default class ProposalChooser extends Widget {\n\n  constructor() {\n    super();\n\n    this.$container = null;\n    this.$status = null;\n    this.activeFilterGroup = null;\n    this.htmlComp = null;\n    this._updateStatusTimeout = null;\n    this.status = null;\n    this.statusVisible = true;\n    this.touch = false;\n  }\n\n  _init(model) {\n    super._init(model);\n\n    // If smartField is not explicitly provided by model, use smartField instance\n    // from parent (which is usually the SmartFieldPopup)\n    if (!model.smartField) {\n      this.smartField = this.parent.smartField;\n    }\n\n    this.model = this._createModel();\n  }\n\n  _createModel($parent) {\n    throw new Error('_createModel() not implemented');\n  }\n\n  setLookupResult(result) {\n    throw new Error('setLookupResult() not implemented');\n  }\n\n  selectFirstLookupRow() {\n    throw new Error('selectFirstLookupRow() not implemented');\n  }\n\n  clearSelection() {\n    throw new Error('clearSelection() not implemented');\n  }\n\n  clearLookupRows() {\n    throw new Error('clearLookupRows() not implemented');\n  }\n\n  /**\n   * @param row TableRow or TreeNode (both have the same properties)\n   */\n  triggerLookupRowSelected(row) {\n    row = row || this.selectedRow();\n    if (!row || !row.enabled) {\n      return;\n    }\n    this.trigger('lookupRowSelected', {\n      lookupRow: row.lookupRow\n    });\n  }\n\n  /**\n   * Implement this function to get the selected row or node from the proposal chooser.\n   * The implementation depends on the widget used by the chooser (Table or Tree).\n   */\n  selectedRow() {\n    throw new Error('selectedRow() not implemented');\n  }\n\n  _render() {\n    this.$container = this.$parent\n      .appendDiv('proposal-chooser')\n      .toggleClass('touch', this.touch);\n    this.htmlComp = HtmlComponent.install(this.$container, this.session);\n    this.htmlComp.setLayout(new ProposalChooserLayout(this));\n\n    this._renderModel();\n\n    // status\n    this.$status = this.$container\n      .appendDiv('status')\n      .setVisible(false);\n\n    // active filter\n    if (this.smartField.activeFilterEnabled) {\n      this.activeFilterGroup = scout.create('RadioButtonGroup', {\n        parent: this,\n        labelVisible: false,\n        statusVisible: false,\n        gridColumnCount: SmartField.ACTIVE_FILTER_VALUES.length\n      });\n\n      // add radio buttons\n      SmartField.ACTIVE_FILTER_VALUES.forEach(function(value, index) {\n        this._insertActiveFilterButton(value, index);\n      }, this);\n\n      this.activeFilterGroup.render();\n      this.activeFilterGroup.$container.addClass('active-filter');\n      this.activeFilterGroup.removeMandatoryIndicator();\n    }\n  }\n\n  _renderModel() {\n    this.model.render();\n\n    // Make sure container never gets the focus, but looks focused\n    this.model.$container.setTabbable(false);\n    this.model.$container.addClass('focused');\n  }\n\n  _renderProperties() {\n    super._renderProperties();\n    this._updateStatus();\n  }\n\n  /**\n   * Delegates an event (e.g. keyup, keydown) to the model.$container of this instance,\n   * calling the JQuery trigger method.\n   */\n  delegateEvent(event) {\n    event.originalEvent.smartFieldEvent = true;\n    this.model.$container.trigger(event);\n  }\n\n  delegateKeyEvent(event) {\n    this.model.$container.trigger(event);\n  }\n\n  _renderStatus() {\n    this._updateStatus();\n  }\n\n  _renderStatusVisible() {\n    this._updateStatus();\n  }\n\n  _computeStatusVisible() {\n    return !!(this.statusVisible && this.status);\n  }\n\n  _updateStatus() {\n    // Note: the UI has a special way to deal with the status. When the UI is rendered\n    // we do NOT render an OK status, even when it is set on the model. The status\n    // \"Search proposals...\" is set to severity OK. That status is only displayed, when\n    // it is still there after 250 ms. Usually a smart-field lookup is fast, so the user\n    // never sees the status message. However: it would be better if the status on the\n    // (Java-)model would implement the behavior described above, but\n    // this would require a timer thread, so it is easier to implement that in the UI.\n    // Status with other severities than OK are displayed immediately.\n    clearTimeout(this._updateStatusTimeout);\n    if (objects.optProperty(this.status, 'severity') === Status.Severity.OK) {\n      // compute statusVisible 250 ms later (status can change in the meantime)\n      this._updateStatusTimeout = setTimeout(\n        this._updateStatusImpl.bind(this), 250);\n    } else {\n      this._updateStatusImpl();\n    }\n  }\n\n  _updateStatusImpl() {\n    if (!this.rendered && !this.rendering) {\n      return;\n    }\n\n    let\n      oldVisible = this.$status.isVisible(),\n      oldMessage = this.$status.text(),\n      visible = this._computeStatusVisible();\n\n    if (oldVisible === visible &&\n      oldMessage === objects.optProperty(this.status, 'message')) {\n      return;\n    }\n\n    $.log.isDebugEnabled() && $.log.debug('(ProposalChooser#_updateStatusImpl) $status.visible=' + visible);\n    this.$status.setVisible(visible);\n    if (this.status) {\n      this._setStatusMessage(this.status.message);\n    } else {\n      this.$status.text('');\n    }\n    this.htmlComp.invalidateLayoutTree();\n  }\n\n  /**\n   * Replaces an ellipsis (...) at the end of the message-text with a CSS animation.\n   */\n  _setStatusMessage(message) {\n    Status.animateStatusMessage(this.$status, message);\n  }\n\n  _insertActiveFilterButton(value, index) {\n    let radio = scout.create('RadioButton', {\n      parent: this.activeFilterGroup,\n      label: this._activeFilterLabel(index),\n      radioValue: SmartField.ACTIVE_FILTER_VALUES[index],\n      selected: this.smartField.activeFilter === value,\n      focusWhenSelected: false,\n      gridDataHints: {\n        useUiWidth: true\n      }\n    });\n\n    radio.on('propertyChange', event => {\n      if (event.propertyName === 'selected' && event.newValue === true) {\n        this.trigger('activeFilterSelected', {\n          activeFilter: event.source.radioValue\n        });\n      }\n    });\n\n    this.activeFilterGroup.insertButton(radio);\n  }\n\n  setVirtual(virtual) {\n    if (this.model instanceof Table) {\n      this.model.setVirtual(virtual);\n    }\n  }\n\n  setStatus(status) {\n    this.setProperty('status', status);\n  }\n\n  setBusy(busy) {\n    this.model.setProperty('loading', busy);\n    this.model.setProperty('enabled', !busy);\n  }\n\n  _activeFilterLabel(index) {\n    return this.smartField.activeFilterLabels[index];\n  }\n\n  /**\n   * Override this function to implement update scrollbar behavior.\n   */\n  updateScrollbars() {\n    this.model.updateScrollbars();\n  }\n\n  _isProposal() {\n    return this.smartField instanceof ProposalField;\n  }\n\n  _selectProposal(result, proposals) {\n    if (this._isProposal()) {\n      return; // no pre-selection when field is a proposal field\n    }\n    if (result.byAll) {\n      this.trySelectCurrentValue();\n    } else if (proposals.length === 1) {\n      this.selectFirstLookupRow();\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}