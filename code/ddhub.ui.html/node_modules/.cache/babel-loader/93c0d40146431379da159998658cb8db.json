{"ast":null,"code":"/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { ModelAdapter } from '../index';\nexport default class FileChooserAdapter extends ModelAdapter {\n  constructor() {\n    super();\n  }\n  _onWidgetCancel(event) {\n    // Do not close the file chooser immediately, server will send the close event\n    event.preventDefault();\n    this._send('cancel');\n  }\n  _onWidgetEvent(event) {\n    if (event.type === 'cancel') {\n      this._onWidgetCancel(event);\n    } else if (event.type === 'upload') {\n      this._onUpload(event);\n    } else {\n      super._onWidgetEvent(event);\n    }\n  }\n  _onUpload(event) {\n    if (this.widget.rendered) {\n      this.widget.uploadButton.setEnabled(false);\n    }\n    if (this.widget.files.length === 0) {\n      return;\n    }\n    if (this.widget.fileInput.legacy) {\n      this.widget.fileInput.upload();\n    } else {\n      this.session.uploadFiles(this, this.widget.files, undefined, this.widget.maximumUploadSize);\n    }\n    this.session.listen().done(() => {\n      if (this.widget && this.widget.rendered) {\n        this.widget.uploadButton.setEnabled(true);\n      }\n    });\n  }\n}","map":{"version":3,"names":["ModelAdapter","FileChooserAdapter","constructor","_onWidgetCancel","event","preventDefault","_send","_onWidgetEvent","type","_onUpload","widget","rendered","uploadButton","setEnabled","files","length","fileInput","legacy","upload","session","uploadFiles","undefined","maximumUploadSize","listen","done"],"sources":["C:/git/d-d-hub/code/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/filechooser/FileChooserAdapter.js"],"sourcesContent":["/*\n * Copyright (c) 2010-2021 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {ModelAdapter} from '../index';\n\nexport default class FileChooserAdapter extends ModelAdapter {\n\n  constructor() {\n    super();\n  }\n\n  _onWidgetCancel(event) {\n    // Do not close the file chooser immediately, server will send the close event\n    event.preventDefault();\n\n    this._send('cancel');\n  }\n\n  _onWidgetEvent(event) {\n    if (event.type === 'cancel') {\n      this._onWidgetCancel(event);\n    } else if (event.type === 'upload') {\n      this._onUpload(event);\n    } else {\n      super._onWidgetEvent(event);\n    }\n  }\n\n  _onUpload(event) {\n    if (this.widget.rendered) {\n      this.widget.uploadButton.setEnabled(false);\n    }\n\n    if (this.widget.files.length === 0) {\n      return;\n    }\n\n    if (this.widget.fileInput.legacy) {\n      this.widget.fileInput.upload();\n    } else {\n      this.session.uploadFiles(this, this.widget.files, undefined, this.widget.maximumUploadSize);\n    }\n\n    this.session.listen().done(() => {\n      if (this.widget && this.widget.rendered) {\n        this.widget.uploadButton.setEnabled(true);\n      }\n    });\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQA,YAAY,QAAO,UAAU;AAErC,eAAe,MAAMC,kBAAkB,SAASD,YAAY,CAAC;EAE3DE,WAAW,GAAG;IACZ,KAAK,EAAE;EACT;EAEAC,eAAe,CAACC,KAAK,EAAE;IACrB;IACAA,KAAK,CAACC,cAAc,EAAE;IAEtB,IAAI,CAACC,KAAK,CAAC,QAAQ,CAAC;EACtB;EAEAC,cAAc,CAACH,KAAK,EAAE;IACpB,IAAIA,KAAK,CAACI,IAAI,KAAK,QAAQ,EAAE;MAC3B,IAAI,CAACL,eAAe,CAACC,KAAK,CAAC;IAC7B,CAAC,MAAM,IAAIA,KAAK,CAACI,IAAI,KAAK,QAAQ,EAAE;MAClC,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC;IACvB,CAAC,MAAM;MACL,KAAK,CAACG,cAAc,CAACH,KAAK,CAAC;IAC7B;EACF;EAEAK,SAAS,CAACL,KAAK,EAAE;IACf,IAAI,IAAI,CAACM,MAAM,CAACC,QAAQ,EAAE;MACxB,IAAI,CAACD,MAAM,CAACE,YAAY,CAACC,UAAU,CAAC,KAAK,CAAC;IAC5C;IAEA,IAAI,IAAI,CAACH,MAAM,CAACI,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MAClC;IACF;IAEA,IAAI,IAAI,CAACL,MAAM,CAACM,SAAS,CAACC,MAAM,EAAE;MAChC,IAAI,CAACP,MAAM,CAACM,SAAS,CAACE,MAAM,EAAE;IAChC,CAAC,MAAM;MACL,IAAI,CAACC,OAAO,CAACC,WAAW,CAAC,IAAI,EAAE,IAAI,CAACV,MAAM,CAACI,KAAK,EAAEO,SAAS,EAAE,IAAI,CAACX,MAAM,CAACY,iBAAiB,CAAC;IAC7F;IAEA,IAAI,CAACH,OAAO,CAACI,MAAM,EAAE,CAACC,IAAI,CAAC,MAAM;MAC/B,IAAI,IAAI,CAACd,MAAM,IAAI,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAE;QACvC,IAAI,CAACD,MAAM,CAACE,YAAY,CAACC,UAAU,CAAC,IAAI,CAAC;MAC3C;IACF,CAAC,CAAC;EACJ;AACF"},"metadata":{},"sourceType":"module"}