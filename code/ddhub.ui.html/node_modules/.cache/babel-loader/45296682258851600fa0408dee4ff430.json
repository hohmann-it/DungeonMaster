{"ast":null,"code":"/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport { arrays, Form, scout } from '../index';\n\n/**\n * Controller with functionality to register and render file choosers.\n *\n * The file choosers are put into the list fileChoosers contained in 'displayParent'.\n */\nexport default class FileChooserController {\n  constructor(displayParent, session) {\n    this.displayParent = displayParent;\n    this.session = session;\n  }\n\n  /**\n   * Adds the given file chooser to this controller and renders it.\n   */\n  registerAndRender(fileChooser) {\n    scout.assertProperty(fileChooser, 'displayParent');\n    this.displayParent.fileChoosers.push(fileChooser);\n    this._render(fileChooser);\n  }\n\n  /**\n   * Removes the given file chooser from this controller and DOM. However, the file chooser's adapter is not destroyed. That only happens once the file chooser is closed.\n   */\n  unregisterAndRemove(fileChooser) {\n    if (fileChooser) {\n      arrays.remove(this.displayParent.fileChoosers, fileChooser);\n      this._remove(fileChooser);\n    }\n  }\n\n  /**\n   * Removes all file choosers registered with this controller from DOM.\n   */\n  remove() {\n    this.displayParent.fileChoosers.forEach(this._remove.bind(this));\n  }\n\n  /**\n   * Renders all file choosers registered with this controller.\n   */\n  render() {\n    this.displayParent.fileChoosers.forEach(chooser => {\n      chooser.setDisplayParent(this.displayParent);\n      this._render(chooser);\n    });\n  }\n  _render(fileChooser) {\n    // missing displayParent (when render is called by reload), use displayParent of FileChooserController\n    if (!fileChooser.displayParent) {\n      fileChooser._setProperty('displayParent', this.displayParent);\n    }\n    // Use parent's function or (if not implemented) our own.\n    if (this.displayParent.acceptView) {\n      if (!this.displayParent.acceptView(fileChooser)) {\n        return;\n      }\n    } else if (!this.acceptView(fileChooser)) {\n      return;\n    }\n    // Prevent \"Already rendered\" errors --> TODO [7.0] bsh: Remove this hack! Fix it on model if possible. See #162954.\n    if (fileChooser.rendered) {\n      return;\n    }\n    // Open all file choosers in the center of the desktop, except the ones that belong to a popup-window\n    // Since the file chooser doesn't have a DOM element as parent when render is called, we must find the\n    // entryPoint by using the model.\n    let $parent;\n    if (this.displayParent instanceof Form && this.displayParent.isPopupWindow()) {\n      $parent = this.displayParent.popupWindow.$container;\n    } else {\n      $parent = this.session.desktop.$container;\n    }\n    // start focus tracking if not already started.\n    fileChooser.setTrackFocus(true);\n    fileChooser.render($parent);\n\n    // Only display the file chooser if its 'displayParent' is visible to the user.\n    if (!this.displayParent.inFront()) {\n      fileChooser.detach();\n    }\n  }\n  _remove(fileChooser) {\n    fileChooser.remove();\n  }\n\n  /**\n   * Attaches all file choosers to their original DOM parents.\n   * In contrast to 'render', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already attached.\n   */\n  attach() {\n    this.displayParent.fileChoosers.forEach(fileChooser => {\n      fileChooser.attach();\n    }, this);\n  }\n\n  /**\n   * Detaches all file choosers from their DOM parents. Thereby, modality glassPanes are not detached.\n   * In contrast to 'remove', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already detached.\n   */\n  detach() {\n    this.displayParent.fileChoosers.forEach(fileChooser => {\n      fileChooser.detach();\n    }, this);\n  }\n  acceptView(view) {\n    return this.displayParent.rendered;\n  }\n}","map":{"version":3,"names":["arrays","Form","scout","FileChooserController","constructor","displayParent","session","registerAndRender","fileChooser","assertProperty","fileChoosers","push","_render","unregisterAndRemove","remove","_remove","forEach","bind","render","chooser","setDisplayParent","_setProperty","acceptView","rendered","$parent","isPopupWindow","popupWindow","$container","desktop","setTrackFocus","inFront","detach","attach","view"],"sources":["C:/workspace/ddhub/ddhub/node_modules/.pnpm/@eclipse-scout+core@22.0.41/node_modules/@eclipse-scout/core/src/filechooser/FileChooserController.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2018 BSI Business Systems Integration AG.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *     BSI Business Systems Integration AG - initial API and implementation\n */\nimport {arrays, Form, scout} from '../index';\n\n/**\n * Controller with functionality to register and render file choosers.\n *\n * The file choosers are put into the list fileChoosers contained in 'displayParent'.\n */\nexport default class FileChooserController {\n\n  constructor(displayParent, session) {\n    this.displayParent = displayParent;\n    this.session = session;\n  }\n\n  /**\n   * Adds the given file chooser to this controller and renders it.\n   */\n  registerAndRender(fileChooser) {\n    scout.assertProperty(fileChooser, 'displayParent');\n    this.displayParent.fileChoosers.push(fileChooser);\n    this._render(fileChooser);\n  }\n\n  /**\n   * Removes the given file chooser from this controller and DOM. However, the file chooser's adapter is not destroyed. That only happens once the file chooser is closed.\n   */\n  unregisterAndRemove(fileChooser) {\n    if (fileChooser) {\n      arrays.remove(this.displayParent.fileChoosers, fileChooser);\n      this._remove(fileChooser);\n    }\n  }\n\n  /**\n   * Removes all file choosers registered with this controller from DOM.\n   */\n  remove() {\n    this.displayParent.fileChoosers.forEach(this._remove.bind(this));\n  }\n\n  /**\n   * Renders all file choosers registered with this controller.\n   */\n  render() {\n    this.displayParent.fileChoosers.forEach(chooser => {\n      chooser.setDisplayParent(this.displayParent);\n      this._render(chooser);\n    });\n  }\n\n  _render(fileChooser) {\n    // missing displayParent (when render is called by reload), use displayParent of FileChooserController\n    if (!fileChooser.displayParent) {\n      fileChooser._setProperty('displayParent', this.displayParent);\n    }\n    // Use parent's function or (if not implemented) our own.\n    if (this.displayParent.acceptView) {\n      if (!this.displayParent.acceptView(fileChooser)) {\n        return;\n      }\n    } else if (!this.acceptView(fileChooser)) {\n      return;\n    }\n    // Prevent \"Already rendered\" errors --> TODO [7.0] bsh: Remove this hack! Fix it on model if possible. See #162954.\n    if (fileChooser.rendered) {\n      return;\n    }\n    // Open all file choosers in the center of the desktop, except the ones that belong to a popup-window\n    // Since the file chooser doesn't have a DOM element as parent when render is called, we must find the\n    // entryPoint by using the model.\n    let $parent;\n    if (this.displayParent instanceof Form && this.displayParent.isPopupWindow()) {\n      $parent = this.displayParent.popupWindow.$container;\n    } else {\n      $parent = this.session.desktop.$container;\n    }\n    // start focus tracking if not already started.\n    fileChooser.setTrackFocus(true);\n    fileChooser.render($parent);\n\n    // Only display the file chooser if its 'displayParent' is visible to the user.\n    if (!this.displayParent.inFront()) {\n      fileChooser.detach();\n    }\n  }\n\n  _remove(fileChooser) {\n    fileChooser.remove();\n  }\n\n  /**\n   * Attaches all file choosers to their original DOM parents.\n   * In contrast to 'render', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already attached.\n   */\n  attach() {\n    this.displayParent.fileChoosers.forEach(fileChooser => {\n      fileChooser.attach();\n    }, this);\n  }\n\n  /**\n   * Detaches all file choosers from their DOM parents. Thereby, modality glassPanes are not detached.\n   * In contrast to 'remove', this method uses 'JQuery detach mechanism' to retain CSS properties, so that the model must not be interpreted anew.\n   *\n   * This method has no effect if already detached.\n   */\n  detach() {\n    this.displayParent.fileChoosers.forEach(fileChooser => {\n      fileChooser.detach();\n    }, this);\n  }\n\n  acceptView(view) {\n    return this.displayParent.rendered;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}